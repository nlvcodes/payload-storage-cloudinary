"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_";
exports.ids = ["vendor-chunks/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/connect.js":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/connect.js ***!
  \***************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connect: () => (/* binding */ connect)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/defaultBeginTransaction.js\");\n\n\nconst connect = async function connect(options = {\n    hotReload: false\n}) {\n    const { hotReload } = options;\n    if (this.url === false) {\n        return;\n    }\n    if (typeof this.url !== 'string') {\n        throw new Error('Error: missing MongoDB connection URL.');\n    }\n    const urlToConnect = this.url;\n    const connectionOptions = {\n        autoIndex: true,\n        ...this.connectOptions,\n        useFacet: undefined\n    };\n    if (hotReload) {\n        connectionOptions.autoIndex = false;\n    }\n    try {\n        this.connection = (await mongoose__WEBPACK_IMPORTED_MODULE_0__.connect(urlToConnect, connectionOptions)).connection;\n        // If we are running a replica set with MongoDB Memory Server,\n        // wait until the replica set elects a primary before proceeding\n        if (this.mongoMemoryServer) {\n            this.payload.logger.info('Waiting for MongoDB Memory Server replica set to elect a primary...');\n            await new Promise((resolve)=>setTimeout(resolve, 2000));\n        }\n        const client = this.connection.getClient();\n        if (!client.options.replicaSet) {\n            this.transactionOptions = false;\n            this.beginTransaction = (0,payload__WEBPACK_IMPORTED_MODULE_1__.defaultBeginTransaction)();\n        }\n        if (!hotReload) {\n            if (process.env.PAYLOAD_DROP_DATABASE === 'true') {\n                this.payload.logger.info('---- DROPPING DATABASE ----');\n                await mongoose__WEBPACK_IMPORTED_MODULE_0__.connection.dropDatabase();\n                this.payload.logger.info('---- DROPPED DATABASE ----');\n            }\n        }\n        if (this.ensureIndexes) {\n            await Promise.all(this.payload.config.collections.map(async (coll)=>{\n                await this.collections[coll.slug]?.ensureIndexes();\n            }));\n        }\n        if (false) {}\n    } catch (err) {\n        let msg = `Error: cannot connect to MongoDB.`;\n        if (typeof err === 'object' && err && 'message' in err && typeof err.message === 'string') {\n            msg = `${msg} Details: ${err.message}`;\n        }\n        this.payload.logger.error({\n            err,\n            msg\n        });\n        process.exit(1);\n    }\n};\n\n//# sourceMappingURL=connect.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY29ubmVjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFDa0I7QUFDM0M7QUFDUDtBQUNBLENBQUM7QUFDRCxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNkNBQWdCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxnRUFBdUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsZ0RBQW1CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFlBQVksS0FBNEQsRUFBRSxFQUlqRTtBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0EscUJBQXFCLEtBQUssV0FBVyxZQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY29ubmVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgZGVmYXVsdEJlZ2luVHJhbnNhY3Rpb24gfSBmcm9tICdwYXlsb2FkJztcbmV4cG9ydCBjb25zdCBjb25uZWN0ID0gYXN5bmMgZnVuY3Rpb24gY29ubmVjdChvcHRpb25zID0ge1xuICAgIGhvdFJlbG9hZDogZmFsc2Vcbn0pIHtcbiAgICBjb25zdCB7IGhvdFJlbG9hZCB9ID0gb3B0aW9ucztcbiAgICBpZiAodGhpcy51cmwgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLnVybCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogbWlzc2luZyBNb25nb0RCIGNvbm5lY3Rpb24gVVJMLicpO1xuICAgIH1cbiAgICBjb25zdCB1cmxUb0Nvbm5lY3QgPSB0aGlzLnVybDtcbiAgICBjb25zdCBjb25uZWN0aW9uT3B0aW9ucyA9IHtcbiAgICAgICAgYXV0b0luZGV4OiB0cnVlLFxuICAgICAgICAuLi50aGlzLmNvbm5lY3RPcHRpb25zLFxuICAgICAgICB1c2VGYWNldDogdW5kZWZpbmVkXG4gICAgfTtcbiAgICBpZiAoaG90UmVsb2FkKSB7XG4gICAgICAgIGNvbm5lY3Rpb25PcHRpb25zLmF1dG9JbmRleCA9IGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSAoYXdhaXQgbW9uZ29vc2UuY29ubmVjdCh1cmxUb0Nvbm5lY3QsIGNvbm5lY3Rpb25PcHRpb25zKSkuY29ubmVjdGlvbjtcbiAgICAgICAgLy8gSWYgd2UgYXJlIHJ1bm5pbmcgYSByZXBsaWNhIHNldCB3aXRoIE1vbmdvREIgTWVtb3J5IFNlcnZlcixcbiAgICAgICAgLy8gd2FpdCB1bnRpbCB0aGUgcmVwbGljYSBzZXQgZWxlY3RzIGEgcHJpbWFyeSBiZWZvcmUgcHJvY2VlZGluZ1xuICAgICAgICBpZiAodGhpcy5tb25nb01lbW9yeVNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5wYXlsb2FkLmxvZ2dlci5pbmZvKCdXYWl0aW5nIGZvciBNb25nb0RCIE1lbW9yeSBTZXJ2ZXIgcmVwbGljYSBzZXQgdG8gZWxlY3QgYSBwcmltYXJ5Li4uJyk7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PnNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuY29ubmVjdGlvbi5nZXRDbGllbnQoKTtcbiAgICAgICAgaWYgKCFjbGllbnQub3B0aW9ucy5yZXBsaWNhU2V0KSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uT3B0aW9ucyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5iZWdpblRyYW5zYWN0aW9uID0gZGVmYXVsdEJlZ2luVHJhbnNhY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhvdFJlbG9hZCkge1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52LlBBWUxPQURfRFJPUF9EQVRBQkFTRSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlsb2FkLmxvZ2dlci5pbmZvKCctLS0tIERST1BQSU5HIERBVEFCQVNFIC0tLS0nKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmRyb3BEYXRhYmFzZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGF5bG9hZC5sb2dnZXIuaW5mbygnLS0tLSBEUk9QUEVEIERBVEFCQVNFIC0tLS0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5lbnN1cmVJbmRleGVzKSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLnBheWxvYWQuY29uZmlnLmNvbGxlY3Rpb25zLm1hcChhc3luYyAoY29sbCk9PntcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbGxlY3Rpb25zW2NvbGwuc2x1Z10/LmVuc3VyZUluZGV4ZXMoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLnByb2RNaWdyYXRpb25zKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGUoe1xuICAgICAgICAgICAgICAgIG1pZ3JhdGlvbnM6IHRoaXMucHJvZE1pZ3JhdGlvbnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGxldCBtc2cgPSBgRXJyb3I6IGNhbm5vdCBjb25uZWN0IHRvIE1vbmdvREIuYDtcbiAgICAgICAgaWYgKHR5cGVvZiBlcnIgPT09ICdvYmplY3QnICYmIGVyciAmJiAnbWVzc2FnZScgaW4gZXJyICYmIHR5cGVvZiBlcnIubWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG1zZyA9IGAke21zZ30gRGV0YWlsczogJHtlcnIubWVzc2FnZX1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGF5bG9hZC5sb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgICAgZXJyLFxuICAgICAgICAgICAgbXNnXG4gICAgICAgIH0pO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29ubmVjdC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/connect.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/count.js":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/count.js ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   count: () => (/* binding */ count)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\n\nconst count = async function count({ collection: collectionSlug, locale, req, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        options.hint = {\n            _id: 1\n        };\n    }\n    let result;\n    if (useEstimatedCount) {\n        result = await Model.estimatedDocumentCount({\n            session: options.session\n        });\n    } else {\n        result = await Model.countDocuments(query, options);\n    }\n    return {\n        totalDocs: result\n    };\n};\n\n//# sourceMappingURL=count.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY291bnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0Q7QUFDRztBQUNJO0FBQ0Y7QUFDaEQscUNBQXFDLHFEQUFxRDtBQUNqRyxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdFQUF1QjtBQUNuRDtBQUNBO0FBQ0Esd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2NvdW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5leHBvcnQgY29uc3QgY291bnQgPSBhc3luYyBmdW5jdGlvbiBjb3VudCh7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBsb2NhbGUsIHJlcSwgd2hlcmUgPSB7fSB9KSB7XG4gICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnLCBNb2RlbCB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnXG4gICAgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBsZXQgaGFzTmVhckNvbnN0cmFpbnQgPSBmYWxzZTtcbiAgICBpZiAod2hlcmUpIHtcbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyh3aGVyZSk7XG4gICAgICAgIGhhc05lYXJDb25zdHJhaW50ID0gY29uc3RyYWludHMuc29tZSgocHJvcCk9Pk9iamVjdC5rZXlzKHByb3ApLnNvbWUoKGtleSk9PmtleSA9PT0gJ25lYXInKSk7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgLy8gdXNlRXN0aW1hdGVkQ291bnQgaXMgZmFzdGVyLCBidXQgbm90IGFjY3VyYXRlLCBhcyBpdCBpZ25vcmVzIGFueSBmaWx0ZXJzLiBJdCBpcyB0aHVzIHNldCB0byB0cnVlIGlmIHRoZXJlIGFyZSBubyBmaWx0ZXJzLlxuICAgIGNvbnN0IHVzZUVzdGltYXRlZENvdW50ID0gaGFzTmVhckNvbnN0cmFpbnQgfHwgIXF1ZXJ5IHx8IE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDA7XG4gICAgaWYgKCF1c2VFc3RpbWF0ZWRDb3VudCAmJiBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzYWJsZUluZGV4SGludHMgIT09IHRydWUpIHtcbiAgICAgICAgLy8gSW1wcm92ZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGNvdW50RG9jdW1lbnRzIHF1ZXJ5IHdoaWNoIGlzIHVzZWQgaWYgdXNlRXN0aW1hdGVkQ291bnQgaXMgc2V0IHRvIGZhbHNlIGJ5IGFkZGluZ1xuICAgICAgICAvLyBhIGhpbnQuIEJ5IGRlZmF1bHQsIGlmIG5vIGhpbnQgaXMgcHJvdmlkZWQsIE1vbmdvREIgZG9lcyBub3QgdXNlIGFuIGluZGV4ZWQgZmllbGQgdG8gY291bnQgdGhlIHJldHVybmVkIGRvY3VtZW50cyxcbiAgICAgICAgLy8gd2hpY2ggbWFrZXMgcXVlcmllcyB2ZXJ5IHNsb3cuIFRoaXMgb25seSBoYXBwZW5zIHdoZW4gbm8gcXVlcnkgKGZpbHRlcikgaXMgcHJvdmlkZWQuIElmIG9uZSBpcyBwcm92aWRlZCwgaXQgdXNlc1xuICAgICAgICAvLyB0aGUgY29ycmVjdCBpbmRleGVkIGZpZWxkXG4gICAgICAgIG9wdGlvbnMuaGludCA9IHtcbiAgICAgICAgICAgIF9pZDogMVxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgcmVzdWx0O1xuICAgIGlmICh1c2VFc3RpbWF0ZWRDb3VudCkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5lc3RpbWF0ZWREb2N1bWVudENvdW50KHtcbiAgICAgICAgICAgIHNlc3Npb246IG9wdGlvbnMuc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5jb3VudERvY3VtZW50cyhxdWVyeSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsRG9jczogcmVzdWx0XG4gICAgfTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/count.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/countGlobalVersions.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/countGlobalVersions.js ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countGlobalVersions: () => (/* binding */ countGlobalVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\n\nconst countGlobalVersions = async function countGlobalVersions({ global: globalSlug, locale, req, where = {} }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionGlobalFields)(this.payload.config, globalConfig, true),\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        options.hint = {\n            _id: 1\n        };\n    }\n    let result;\n    if (useEstimatedCount) {\n        result = await Model.estimatedDocumentCount({\n            session: options.session\n        });\n    } else {\n        result = await Model.countDocuments(query, options);\n    }\n    return {\n        totalDocs: result\n    };\n};\n\n//# sourceMappingURL=countGlobalVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY291bnRHbG9iYWxWZXJzaW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEU7QUFDdkI7QUFDQTtBQUNFO0FBQ2hELGlFQUFpRSw2Q0FBNkM7QUFDckgsWUFBWSxzQkFBc0IsRUFBRSxrRUFBUztBQUM3QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdFQUF1QjtBQUNuRDtBQUNBO0FBQ0Esd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0EsZ0JBQWdCLGlFQUF3QjtBQUN4QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jb3VudEdsb2JhbFZlcnNpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcywgZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBnZXRHbG9iYWwgfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuZXhwb3J0IGNvbnN0IGNvdW50R2xvYmFsVmVyc2lvbnMgPSBhc3luYyBmdW5jdGlvbiBjb3VudEdsb2JhbFZlcnNpb25zKHsgZ2xvYmFsOiBnbG9iYWxTbHVnLCBsb2NhbGUsIHJlcSwgd2hlcmUgPSB7fSB9KSB7XG4gICAgY29uc3QgeyBnbG9iYWxDb25maWcsIE1vZGVsIH0gPSBnZXRHbG9iYWwoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICB2ZXJzaW9uczogdHJ1ZVxuICAgIH0pO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgbGV0IGhhc05lYXJDb25zdHJhaW50ID0gZmFsc2U7XG4gICAgaWYgKHdoZXJlKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMod2hlcmUpO1xuICAgICAgICBoYXNOZWFyQ29uc3RyYWludCA9IGNvbnN0cmFpbnRzLnNvbWUoKHByb3ApPT5PYmplY3Qua2V5cyhwcm9wKS5zb21lKChrZXkpPT5rZXkgPT09ICduZWFyJykpO1xuICAgIH1cbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBmaWVsZHM6IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBnbG9iYWxDb25maWcsIHRydWUpLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgLy8gdXNlRXN0aW1hdGVkQ291bnQgaXMgZmFzdGVyLCBidXQgbm90IGFjY3VyYXRlLCBhcyBpdCBpZ25vcmVzIGFueSBmaWx0ZXJzLiBJdCBpcyB0aHVzIHNldCB0byB0cnVlIGlmIHRoZXJlIGFyZSBubyBmaWx0ZXJzLlxuICAgIGNvbnN0IHVzZUVzdGltYXRlZENvdW50ID0gaGFzTmVhckNvbnN0cmFpbnQgfHwgIXF1ZXJ5IHx8IE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDA7XG4gICAgaWYgKCF1c2VFc3RpbWF0ZWRDb3VudCAmJiBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzYWJsZUluZGV4SGludHMgIT09IHRydWUpIHtcbiAgICAgICAgLy8gSW1wcm92ZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGNvdW50RG9jdW1lbnRzIHF1ZXJ5IHdoaWNoIGlzIHVzZWQgaWYgdXNlRXN0aW1hdGVkQ291bnQgaXMgc2V0IHRvIGZhbHNlIGJ5IGFkZGluZ1xuICAgICAgICAvLyBhIGhpbnQuIEJ5IGRlZmF1bHQsIGlmIG5vIGhpbnQgaXMgcHJvdmlkZWQsIE1vbmdvREIgZG9lcyBub3QgdXNlIGFuIGluZGV4ZWQgZmllbGQgdG8gY291bnQgdGhlIHJldHVybmVkIGRvY3VtZW50cyxcbiAgICAgICAgLy8gd2hpY2ggbWFrZXMgcXVlcmllcyB2ZXJ5IHNsb3cuIFRoaXMgb25seSBoYXBwZW5zIHdoZW4gbm8gcXVlcnkgKGZpbHRlcikgaXMgcHJvdmlkZWQuIElmIG9uZSBpcyBwcm92aWRlZCwgaXQgdXNlc1xuICAgICAgICAvLyB0aGUgY29ycmVjdCBpbmRleGVkIGZpZWxkXG4gICAgICAgIG9wdGlvbnMuaGludCA9IHtcbiAgICAgICAgICAgIF9pZDogMVxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgcmVzdWx0O1xuICAgIGlmICh1c2VFc3RpbWF0ZWRDb3VudCkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5lc3RpbWF0ZWREb2N1bWVudENvdW50KHtcbiAgICAgICAgICAgIHNlc3Npb246IG9wdGlvbnMuc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5jb3VudERvY3VtZW50cyhxdWVyeSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsRG9jczogcmVzdWx0XG4gICAgfTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50R2xvYmFsVmVyc2lvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/countGlobalVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/countVersions.js":
/*!*********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/countVersions.js ***!
  \*********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countVersions: () => (/* binding */ countVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\n\nconst countVersions = async function countVersions({ collection: collectionSlug, locale, req, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true),\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        options.hint = {\n            _id: 1\n        };\n    }\n    let result;\n    if (useEstimatedCount) {\n        result = await Model.estimatedDocumentCount({\n            session: options.session\n        });\n    } else {\n        result = await Model.countDocuments(query, options);\n    }\n    return {\n        totalDocs: result\n    };\n};\n\n//# sourceMappingURL=countVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY291bnRWZXJzaW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBZ0Y7QUFDM0I7QUFDSTtBQUNGO0FBQ2hELHFEQUFxRCxxREFBcUQ7QUFDakgsWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdFQUF1QjtBQUNuRDtBQUNBO0FBQ0Esd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0EsZ0JBQWdCLHFFQUE0QjtBQUM1QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jb3VudFZlcnNpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHMsIGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5leHBvcnQgY29uc3QgY291bnRWZXJzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGNvdW50VmVyc2lvbnMoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgbG9jYWxlLCByZXEsIHdoZXJlID0ge30gfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGxldCBoYXNOZWFyQ29uc3RyYWludCA9IGZhbHNlO1xuICAgIGlmICh3aGVyZSkge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzKHdoZXJlKTtcbiAgICAgICAgaGFzTmVhckNvbnN0cmFpbnQgPSBjb25zdHJhaW50cy5zb21lKChwcm9wKT0+T2JqZWN0LmtleXMocHJvcCkuc29tZSgoa2V5KT0+a2V5ID09PSAnbmVhcicpKTtcbiAgICB9XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzOiBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGNvbGxlY3Rpb25Db25maWcsIHRydWUpLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgLy8gdXNlRXN0aW1hdGVkQ291bnQgaXMgZmFzdGVyLCBidXQgbm90IGFjY3VyYXRlLCBhcyBpdCBpZ25vcmVzIGFueSBmaWx0ZXJzLiBJdCBpcyB0aHVzIHNldCB0byB0cnVlIGlmIHRoZXJlIGFyZSBubyBmaWx0ZXJzLlxuICAgIGNvbnN0IHVzZUVzdGltYXRlZENvdW50ID0gaGFzTmVhckNvbnN0cmFpbnQgfHwgIXF1ZXJ5IHx8IE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDA7XG4gICAgaWYgKCF1c2VFc3RpbWF0ZWRDb3VudCAmJiBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzYWJsZUluZGV4SGludHMgIT09IHRydWUpIHtcbiAgICAgICAgLy8gSW1wcm92ZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGNvdW50RG9jdW1lbnRzIHF1ZXJ5IHdoaWNoIGlzIHVzZWQgaWYgdXNlRXN0aW1hdGVkQ291bnQgaXMgc2V0IHRvIGZhbHNlIGJ5IGFkZGluZ1xuICAgICAgICAvLyBhIGhpbnQuIEJ5IGRlZmF1bHQsIGlmIG5vIGhpbnQgaXMgcHJvdmlkZWQsIE1vbmdvREIgZG9lcyBub3QgdXNlIGFuIGluZGV4ZWQgZmllbGQgdG8gY291bnQgdGhlIHJldHVybmVkIGRvY3VtZW50cyxcbiAgICAgICAgLy8gd2hpY2ggbWFrZXMgcXVlcmllcyB2ZXJ5IHNsb3cuIFRoaXMgb25seSBoYXBwZW5zIHdoZW4gbm8gcXVlcnkgKGZpbHRlcikgaXMgcHJvdmlkZWQuIElmIG9uZSBpcyBwcm92aWRlZCwgaXQgdXNlc1xuICAgICAgICAvLyB0aGUgY29ycmVjdCBpbmRleGVkIGZpZWxkXG4gICAgICAgIG9wdGlvbnMuaGludCA9IHtcbiAgICAgICAgICAgIF9pZDogMVxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgcmVzdWx0O1xuICAgIGlmICh1c2VFc3RpbWF0ZWRDb3VudCkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5lc3RpbWF0ZWREb2N1bWVudENvdW50KHtcbiAgICAgICAgICAgIHNlc3Npb246IG9wdGlvbnMuc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5jb3VudERvY3VtZW50cyhxdWVyeSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsRG9jczogcmVzdWx0XG4gICAgfTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50VmVyc2lvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/countVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/create.js":
/*!**************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/create.js ***!
  \**************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create: () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_handleError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/handleError.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\nconst create = async function create({ collection: collectionSlug, data, req, returning }) {\n    const { collectionConfig, customIDType, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    let doc;\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data,\n        fields: collectionConfig.fields,\n        operation: 'write'\n    });\n    if (customIDType) {\n        data._id = data.id;\n    } else if (this.allowIDOnCreate && data.id) {\n        try {\n            data._id = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(data.id);\n        } catch (error) {\n            this.payload.logger.error(`It appears you passed ID to create operation data but it cannot be sanitized to ObjectID, value - ${JSON.stringify(data.id)}`);\n            throw error;\n        }\n    }\n    try {\n        ;\n        [doc] = await Model.create([\n            data\n        ], options);\n    } catch (error) {\n        (0,_utilities_handleError_js__WEBPACK_IMPORTED_MODULE_4__.handleError)({\n            collection: collectionSlug,\n            error,\n            req\n        });\n    }\n    if (returning === false) {\n        return null;\n    }\n    doc = doc.toObject();\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data: doc,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=create.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY3JlYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpQztBQUN3QjtBQUNGO0FBQ0U7QUFDSjtBQUM5Qyx1Q0FBdUMsa0RBQWtEO0FBQ2hHLFlBQVksd0NBQXdDLEVBQUUsc0VBQWE7QUFDbkU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixvRUFBVTtBQUNqQztBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSwyQkFBMkIsMkNBQUs7QUFDaEMsVUFBVTtBQUNWLDJJQUEySSx3QkFBd0I7QUFDbks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixRQUFRLHNFQUFXO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2NyZWF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUeXBlcyB9IGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgaGFuZGxlRXJyb3IgfSBmcm9tICcuL3V0aWxpdGllcy9oYW5kbGVFcnJvci5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZSA9IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZSh7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBkYXRhLCByZXEsIHJldHVybmluZyB9KSB7XG4gICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnLCBjdXN0b21JRFR5cGUsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWdcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGxldCBkb2M7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAnd3JpdGUnXG4gICAgfSk7XG4gICAgaWYgKGN1c3RvbUlEVHlwZSkge1xuICAgICAgICBkYXRhLl9pZCA9IGRhdGEuaWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLmFsbG93SURPbkNyZWF0ZSAmJiBkYXRhLmlkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkYXRhLl9pZCA9IG5ldyBUeXBlcy5PYmplY3RJZChkYXRhLmlkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGF5bG9hZC5sb2dnZXIuZXJyb3IoYEl0IGFwcGVhcnMgeW91IHBhc3NlZCBJRCB0byBjcmVhdGUgb3BlcmF0aW9uIGRhdGEgYnV0IGl0IGNhbm5vdCBiZSBzYW5pdGl6ZWQgdG8gT2JqZWN0SUQsIHZhbHVlIC0gJHtKU09OLnN0cmluZ2lmeShkYXRhLmlkKX1gKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIDtcbiAgICAgICAgW2RvY10gPSBhd2FpdCBNb2RlbC5jcmVhdGUoW1xuICAgICAgICAgICAgZGF0YVxuICAgICAgICBdLCBvcHRpb25zKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcih7XG4gICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgcmVxXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZG9jID0gZG9jLnRvT2JqZWN0KCk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogZG9jLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiBkb2M7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/create.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createGlobal.js":
/*!********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createGlobal.js ***!
  \********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGlobal: () => (/* binding */ createGlobal)\n/* harmony export */ });\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\nconst createGlobal = async function createGlobal({ slug: globalSlug, data, req, returning }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_1__.transform)({\n        adapter: this,\n        data,\n        fields: globalConfig.fields,\n        globalSlug,\n        operation: 'write'\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    let [result] = await Model.create([\n        data\n    ], options);\n    if (returning === false) {\n        return null;\n    }\n    result = result.toObject();\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_1__.transform)({\n        adapter: this,\n        data: result,\n        fields: globalConfig.fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=createGlobal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY3JlYXRlR2xvYmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUQ7QUFDRTtBQUNGO0FBQzlDLG1EQUFtRCx3Q0FBd0M7QUFDbEcsWUFBWSxzQkFBc0IsRUFBRSxrRUFBUztBQUM3QztBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdUJBQXVCLG9FQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY3JlYXRlR2xvYmFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUdsb2JhbCA9IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUdsb2JhbCh7IHNsdWc6IGdsb2JhbFNsdWcsIGRhdGEsIHJlcSwgcmV0dXJuaW5nIH0pIHtcbiAgICBjb25zdCB7IGdsb2JhbENvbmZpZywgTW9kZWwgfSA9IGdldEdsb2JhbCh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGdsb2JhbFNsdWdcbiAgICB9KTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhLFxuICAgICAgICBmaWVsZHM6IGdsb2JhbENvbmZpZy5maWVsZHMsXG4gICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgIG9wZXJhdGlvbjogJ3dyaXRlJ1xuICAgIH0pO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgbGV0IFtyZXN1bHRdID0gYXdhaXQgTW9kZWwuY3JlYXRlKFtcbiAgICAgICAgZGF0YVxuICAgIF0sIG9wdGlvbnMpO1xuICAgIGlmIChyZXR1cm5pbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXN1bHQgPSByZXN1bHQudG9PYmplY3QoKTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIGZpZWxkczogZ2xvYmFsQ29uZmlnLmZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlR2xvYmFsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createGlobal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createGlobalVersion.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createGlobalVersion.js ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGlobalVersion: () => (/* binding */ createGlobalVersion)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\nconst createGlobalVersion = async function createGlobalVersion({ autosave, createdAt, globalSlug, parent, publishedLocale, req, returning, snapshot, updatedAt, versionData }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    const data = {\n        autosave,\n        createdAt,\n        latest: true,\n        parent,\n        publishedLocale,\n        snapshot,\n        updatedAt,\n        version: versionData\n    };\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_2__.buildVersionGlobalFields)(this.payload.config, globalConfig);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data,\n        fields,\n        operation: 'write'\n    });\n    let [doc] = await Model.create([\n        data\n    ], options, req);\n    await Model.updateMany({\n        $and: [\n            {\n                _id: {\n                    $ne: doc._id\n                }\n            },\n            {\n                parent: {\n                    $eq: parent\n                }\n            },\n            {\n                latest: {\n                    $eq: true\n                }\n            }\n        ]\n    }, {\n        $unset: {\n            latest: 1\n        }\n    }, options);\n    if (returning === false) {\n        return null;\n    }\n    doc = doc.toObject();\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data: doc,\n        fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=createGlobalVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY3JlYXRlR2xvYmFsVmVyc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtRDtBQUNFO0FBQ0U7QUFDRjtBQUM5QyxpRUFBaUUsNEdBQTRHO0FBQ3BMLFlBQVksc0JBQXNCLEVBQUUsa0VBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdUJBQXVCLG9FQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUVBQXdCO0FBQzNDLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jcmVhdGVHbG9iYWxWZXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgY3JlYXRlR2xvYmFsVmVyc2lvbiA9IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUdsb2JhbFZlcnNpb24oeyBhdXRvc2F2ZSwgY3JlYXRlZEF0LCBnbG9iYWxTbHVnLCBwYXJlbnQsIHB1Ymxpc2hlZExvY2FsZSwgcmVxLCByZXR1cm5pbmcsIHNuYXBzaG90LCB1cGRhdGVkQXQsIHZlcnNpb25EYXRhIH0pIHtcbiAgICBjb25zdCB7IGdsb2JhbENvbmZpZywgTW9kZWwgfSA9IGdldEdsb2JhbCh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBhdXRvc2F2ZSxcbiAgICAgICAgY3JlYXRlZEF0LFxuICAgICAgICBsYXRlc3Q6IHRydWUsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgcHVibGlzaGVkTG9jYWxlLFxuICAgICAgICBzbmFwc2hvdCxcbiAgICAgICAgdXBkYXRlZEF0LFxuICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uRGF0YVxuICAgIH07XG4gICAgY29uc3QgZmllbGRzID0gYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGdsb2JhbENvbmZpZyk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICd3cml0ZSdcbiAgICB9KTtcbiAgICBsZXQgW2RvY10gPSBhd2FpdCBNb2RlbC5jcmVhdGUoW1xuICAgICAgICBkYXRhXG4gICAgXSwgb3B0aW9ucywgcmVxKTtcbiAgICBhd2FpdCBNb2RlbC51cGRhdGVNYW55KHtcbiAgICAgICAgJGFuZDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIF9pZDoge1xuICAgICAgICAgICAgICAgICAgICAkbmU6IGRvYy5faWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmVudDoge1xuICAgICAgICAgICAgICAgICAgICAkZXE6IHBhcmVudFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGF0ZXN0OiB7XG4gICAgICAgICAgICAgICAgICAgICRlcTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH0sIHtcbiAgICAgICAgJHVuc2V0OiB7XG4gICAgICAgICAgICBsYXRlc3Q6IDFcbiAgICAgICAgfVxuICAgIH0sIG9wdGlvbnMpO1xuICAgIGlmIChyZXR1cm5pbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBkb2MgPSBkb2MudG9PYmplY3QoKTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiBkb2MsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gZG9jO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlR2xvYmFsVmVyc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createGlobalVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createMigration.js":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createMigration.js ***!
  \***********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMigration: () => (/* binding */ createMigration)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/migrations/getPredefinedMigration.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/migrations/writeMigrationIndex.js\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n\n\n\n\nconst migrationTemplate = ({ downSQL, imports, upSQL })=>`import {\n  MigrateDownArgs,\n  MigrateUpArgs,\n} from '@payloadcms/db-mongodb'\n${imports ?? ''}\nexport async function up({ payload, req, session }: MigrateUpArgs): Promise<void> {\n${upSQL ?? `  // Migration code`}\n}\n\nexport async function down({ payload, req, session }: MigrateDownArgs): Promise<void> {\n${downSQL ?? `  // Migration code`}\n}\n`;\nconst createMigration = async function createMigration({ file, migrationName, payload, skipEmpty }) {\n    const filename = (0,url__WEBPACK_IMPORTED_MODULE_2__.fileURLToPath)(\"file:///Users/nick/Desktop/Business/PayloadCMS/payload-storage-cloudinary/dev/node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createMigration.js\");\n    const dirname = path__WEBPACK_IMPORTED_MODULE_1__.dirname(filename);\n    const dir = payload.db.migrationDir;\n    if (!fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(dir)) {\n        fs__WEBPACK_IMPORTED_MODULE_0__.mkdirSync(dir);\n    }\n    const predefinedMigration = await (0,payload__WEBPACK_IMPORTED_MODULE_3__.getPredefinedMigration)({\n        dirname,\n        file,\n        migrationName,\n        payload\n    });\n    const migrationFileContent = migrationTemplate(predefinedMigration);\n    const [yyymmdd, hhmmss] = new Date().toISOString().split('T');\n    const formattedDate = yyymmdd.replace(/\\D/g, '');\n    const formattedTime = hhmmss.split('.')[0].replace(/\\D/g, '');\n    const timestamp = `${formattedDate}_${formattedTime}`;\n    const formattedName = migrationName?.replace(/\\W/g, '_');\n    const fileName = migrationName ? `${timestamp}_${formattedName}.ts` : `${timestamp}_migration.ts`;\n    const filePath = `${dir}/${fileName}`;\n    if (!skipEmpty) {\n        fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync(filePath, migrationFileContent);\n    }\n    (0,payload__WEBPACK_IMPORTED_MODULE_4__.writeMigrationIndex)({\n        migrationsDir: payload.db.migrationDir\n    });\n    payload.logger.info({\n        msg: `Migration created at ${filePath}`\n    });\n};\n\n//# sourceMappingURL=createMigration.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY3JlYXRlTWlncmF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvQjtBQUNJO0FBQzhDO0FBQ2xDO0FBQ3BDLDZCQUE2Qix5QkFBeUI7QUFDdEQ7QUFDQTtBQUNBLEVBQUU7QUFDRixFQUFFO0FBQ0YsMkJBQTJCLHVCQUF1QjtBQUNsRCxFQUFFO0FBQ0Y7O0FBRUEsNkJBQTZCLHVCQUF1QjtBQUNwRCxFQUFFO0FBQ0Y7QUFDQTtBQUNPLHlEQUF5RCx5Q0FBeUM7QUFDekcscUJBQXFCLGtEQUFhLENBQUMsNk9BQWU7QUFDbEQsb0JBQW9CLHlDQUFZO0FBQ2hDO0FBQ0EsU0FBUywwQ0FBYTtBQUN0QixRQUFRLHlDQUFZO0FBQ3BCO0FBQ0Esc0NBQXNDLCtEQUFzQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixjQUFjLEdBQUcsY0FBYztBQUN4RDtBQUNBLHdDQUF3QyxVQUFVLEdBQUcsY0FBYyxVQUFVLFVBQVU7QUFDdkYsd0JBQXdCLElBQUksR0FBRyxTQUFTO0FBQ3hDO0FBQ0EsUUFBUSw2Q0FBZ0I7QUFDeEI7QUFDQSxJQUFJLDREQUFtQjtBQUN2QjtBQUNBLEtBQUs7QUFDTDtBQUNBLHFDQUFxQyxTQUFTO0FBQzlDLEtBQUs7QUFDTDs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY3JlYXRlTWlncmF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGdldFByZWRlZmluZWRNaWdyYXRpb24sIHdyaXRlTWlncmF0aW9uSW5kZXggfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGZpbGVVUkxUb1BhdGggfSBmcm9tICd1cmwnO1xuY29uc3QgbWlncmF0aW9uVGVtcGxhdGUgPSAoeyBkb3duU1FMLCBpbXBvcnRzLCB1cFNRTCB9KT0+YGltcG9ydCB7XG4gIE1pZ3JhdGVEb3duQXJncyxcbiAgTWlncmF0ZVVwQXJncyxcbn0gZnJvbSAnQHBheWxvYWRjbXMvZGItbW9uZ29kYidcbiR7aW1wb3J0cyA/PyAnJ31cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cCh7IHBheWxvYWQsIHJlcSwgc2Vzc2lvbiB9OiBNaWdyYXRlVXBBcmdzKTogUHJvbWlzZTx2b2lkPiB7XG4ke3VwU1FMID8/IGAgIC8vIE1pZ3JhdGlvbiBjb2RlYH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRvd24oeyBwYXlsb2FkLCByZXEsIHNlc3Npb24gfTogTWlncmF0ZURvd25BcmdzKTogUHJvbWlzZTx2b2lkPiB7XG4ke2Rvd25TUUwgPz8gYCAgLy8gTWlncmF0aW9uIGNvZGVgfVxufVxuYDtcbmV4cG9ydCBjb25zdCBjcmVhdGVNaWdyYXRpb24gPSBhc3luYyBmdW5jdGlvbiBjcmVhdGVNaWdyYXRpb24oeyBmaWxlLCBtaWdyYXRpb25OYW1lLCBwYXlsb2FkLCBza2lwRW1wdHkgfSkge1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZmlsZVVSTFRvUGF0aChpbXBvcnQubWV0YS51cmwpO1xuICAgIGNvbnN0IGRpcm5hbWUgPSBwYXRoLmRpcm5hbWUoZmlsZW5hbWUpO1xuICAgIGNvbnN0IGRpciA9IHBheWxvYWQuZGIubWlncmF0aW9uRGlyO1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhkaXIpKSB7XG4gICAgICAgIGZzLm1rZGlyU3luYyhkaXIpO1xuICAgIH1cbiAgICBjb25zdCBwcmVkZWZpbmVkTWlncmF0aW9uID0gYXdhaXQgZ2V0UHJlZGVmaW5lZE1pZ3JhdGlvbih7XG4gICAgICAgIGRpcm5hbWUsXG4gICAgICAgIGZpbGUsXG4gICAgICAgIG1pZ3JhdGlvbk5hbWUsXG4gICAgICAgIHBheWxvYWRcbiAgICB9KTtcbiAgICBjb25zdCBtaWdyYXRpb25GaWxlQ29udGVudCA9IG1pZ3JhdGlvblRlbXBsYXRlKHByZWRlZmluZWRNaWdyYXRpb24pO1xuICAgIGNvbnN0IFt5eXltbWRkLCBoaG1tc3NdID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJyk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IHl5eW1tZGQucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gaGhtbXNzLnNwbGl0KCcuJylbMF0ucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBgJHtmb3JtYXR0ZWREYXRlfV8ke2Zvcm1hdHRlZFRpbWV9YDtcbiAgICBjb25zdCBmb3JtYXR0ZWROYW1lID0gbWlncmF0aW9uTmFtZT8ucmVwbGFjZSgvXFxXL2csICdfJyk7XG4gICAgY29uc3QgZmlsZU5hbWUgPSBtaWdyYXRpb25OYW1lID8gYCR7dGltZXN0YW1wfV8ke2Zvcm1hdHRlZE5hbWV9LnRzYCA6IGAke3RpbWVzdGFtcH1fbWlncmF0aW9uLnRzYDtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGAke2Rpcn0vJHtmaWxlTmFtZX1gO1xuICAgIGlmICghc2tpcEVtcHR5KSB7XG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIG1pZ3JhdGlvbkZpbGVDb250ZW50KTtcbiAgICB9XG4gICAgd3JpdGVNaWdyYXRpb25JbmRleCh7XG4gICAgICAgIG1pZ3JhdGlvbnNEaXI6IHBheWxvYWQuZGIubWlncmF0aW9uRGlyXG4gICAgfSk7XG4gICAgcGF5bG9hZC5sb2dnZXIuaW5mbyh7XG4gICAgICAgIG1zZzogYE1pZ3JhdGlvbiBjcmVhdGVkIGF0ICR7ZmlsZVBhdGh9YFxuICAgIH0pO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlTWlncmF0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createMigration.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createVersion.js":
/*!*********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createVersion.js ***!
  \*********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createVersion: () => (/* binding */ createVersion)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\nconst createVersion = async function createVersion({ autosave, collectionSlug, createdAt, parent, publishedLocale, req, returning, snapshot, updatedAt, versionData }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    const data = {\n        autosave,\n        createdAt,\n        latest: true,\n        parent,\n        publishedLocale,\n        snapshot,\n        updatedAt,\n        version: versionData\n    };\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_2__.buildVersionCollectionFields)(this.payload.config, collectionConfig);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data,\n        fields,\n        operation: 'write'\n    });\n    let [doc] = await Model.create([\n        data\n    ], options, req);\n    const parentQuery = {\n        $or: [\n            {\n                parent: {\n                    $eq: data.parent\n                }\n            }\n        ]\n    };\n    await Model.updateMany({\n        $and: [\n            {\n                _id: {\n                    $ne: doc._id\n                }\n            },\n            parentQuery,\n            {\n                latest: {\n                    $eq: true\n                }\n            },\n            {\n                updatedAt: {\n                    $lt: new Date(doc.updatedAt)\n                }\n            }\n        ]\n    }, {\n        $unset: {\n            latest: 1\n        }\n    }, options);\n    if (returning === false) {\n        return null;\n    }\n    doc = doc.toObject();\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data: doc,\n        fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=createVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY3JlYXRlVmVyc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RDtBQUNFO0FBQ0Y7QUFDRjtBQUM5QyxxREFBcUQsZ0hBQWdIO0FBQzVLLFlBQVksMEJBQTBCLEVBQUUsc0VBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdUJBQXVCLG9FQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUVBQTRCO0FBQy9DLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2NyZWF0ZVZlcnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVZlcnNpb24gPSBhc3luYyBmdW5jdGlvbiBjcmVhdGVWZXJzaW9uKHsgYXV0b3NhdmUsIGNvbGxlY3Rpb25TbHVnLCBjcmVhdGVkQXQsIHBhcmVudCwgcHVibGlzaGVkTG9jYWxlLCByZXEsIHJldHVybmluZywgc25hcHNob3QsIHVwZGF0ZWRBdCwgdmVyc2lvbkRhdGEgfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIGF1dG9zYXZlLFxuICAgICAgICBjcmVhdGVkQXQsXG4gICAgICAgIGxhdGVzdDogdHJ1ZSxcbiAgICAgICAgcGFyZW50LFxuICAgICAgICBwdWJsaXNoZWRMb2NhbGUsXG4gICAgICAgIHNuYXBzaG90LFxuICAgICAgICB1cGRhdGVkQXQsXG4gICAgICAgIHZlcnNpb246IHZlcnNpb25EYXRhXG4gICAgfTtcbiAgICBjb25zdCBmaWVsZHMgPSBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGNvbGxlY3Rpb25Db25maWcpO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAnd3JpdGUnXG4gICAgfSk7XG4gICAgbGV0IFtkb2NdID0gYXdhaXQgTW9kZWwuY3JlYXRlKFtcbiAgICAgICAgZGF0YVxuICAgIF0sIG9wdGlvbnMsIHJlcSk7XG4gICAgY29uc3QgcGFyZW50UXVlcnkgPSB7XG4gICAgICAgICRvcjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmVudDoge1xuICAgICAgICAgICAgICAgICAgICAkZXE6IGRhdGEucGFyZW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfTtcbiAgICBhd2FpdCBNb2RlbC51cGRhdGVNYW55KHtcbiAgICAgICAgJGFuZDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIF9pZDoge1xuICAgICAgICAgICAgICAgICAgICAkbmU6IGRvYy5faWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFyZW50UXVlcnksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGF0ZXN0OiB7XG4gICAgICAgICAgICAgICAgICAgICRlcTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiB7XG4gICAgICAgICAgICAgICAgICAgICRsdDogbmV3IERhdGUoZG9jLnVwZGF0ZWRBdClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9LCB7XG4gICAgICAgICR1bnNldDoge1xuICAgICAgICAgICAgbGF0ZXN0OiAxXG4gICAgICAgIH1cbiAgICB9LCBvcHRpb25zKTtcbiAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZG9jID0gZG9jLnRvT2JqZWN0KCk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogZG9jLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIGRvYztcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteMany.js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteMany.js ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteMany: () => (/* binding */ deleteMany)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\nconst deleteMany = async function deleteMany({ collection: collectionSlug, req, where }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_2__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        where\n    });\n    await Model.deleteMany(query, options);\n};\n\n//# sourceMappingURL=deleteMany.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZGVsZXRlTWFueS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFEO0FBQ0k7QUFDRjtBQUNoRCwrQ0FBK0Msd0NBQXdDO0FBQzlGLFlBQVksMEJBQTBCLEVBQUUsc0VBQWE7QUFDckQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9kZWxldGVNYW55LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBnZXRDb2xsZWN0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmV4cG9ydCBjb25zdCBkZWxldGVNYW55ID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlTWFueSh7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCByZXEsIHdoZXJlIH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWdcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIGF3YWl0IE1vZGVsLmRlbGV0ZU1hbnkocXVlcnksIG9wdGlvbnMpO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsZXRlTWFueS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteMany.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteOne.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteOne.js ***!
  \*****************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteOne: () => (/* binding */ deleteOne)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\nconst deleteOne = async function deleteOne({ collection: collectionSlug, req, returning, select, where }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const options = {\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: collectionConfig.flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        where\n    });\n    if (returning === false) {\n        await Model.deleteOne(query, options)?.lean();\n        return null;\n    }\n    const doc = await Model.findOneAndDelete(query, options)?.lean();\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data: doc,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=deleteOne.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZGVsZXRlT25lLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxRDtBQUNnQztBQUM1QjtBQUNGO0FBQ0Y7QUFDOUMsNkNBQTZDLDJEQUEyRDtBQUMvRyxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQkFBb0Isa0dBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQSx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9kZWxldGVPbmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QgfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCBkZWxldGVPbmUgPSBhc3luYyBmdW5jdGlvbiBkZWxldGVPbmUoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgcmVxLCByZXR1cm5pbmcsIHNlbGVjdCwgd2hlcmUgfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1Z1xuICAgIH0pO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIHByb2plY3Rpb246IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3Qoe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSksXG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgaWYgKHJldHVybmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgYXdhaXQgTW9kZWwuZGVsZXRlT25lKHF1ZXJ5LCBvcHRpb25zKT8ubGVhbigpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZG9jID0gYXdhaXQgTW9kZWwuZmluZE9uZUFuZERlbGV0ZShxdWVyeSwgb3B0aW9ucyk/LmxlYW4oKTtcbiAgICBpZiAoIWRvYykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogZG9jLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiBkb2M7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxldGVPbmUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteOne.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteVersions.js":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteVersions.js ***!
  \**********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteVersions: () => (/* binding */ deleteVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\n\nconst deleteVersions = async function deleteVersions({ collection: collectionSlug, globalSlug, locale, req, where }) {\n    let fields;\n    let VersionsModel;\n    if (globalSlug) {\n        const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n            adapter: this,\n            globalSlug,\n            versions: true\n        });\n        fields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig, true);\n        VersionsModel = Model;\n    } else if (collectionSlug) {\n        const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n            adapter: this,\n            collectionSlug,\n            versions: true\n        });\n        fields = (0,payload__WEBPACK_IMPORTED_MODULE_2__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true);\n        VersionsModel = Model;\n    } else {\n        throw new payload__WEBPACK_IMPORTED_MODULE_3__.APIError('Either collection or globalSlug must be passed.');\n    }\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_4__.getSession)(this, req);\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__.buildQuery)({\n        adapter: this,\n        fields,\n        locale,\n        where\n    });\n    await VersionsModel.deleteMany(query, {\n        session\n    });\n};\n\n//# sourceMappingURL=deleteVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZGVsZXRlVmVyc2lvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyRjtBQUN0QztBQUNlO0FBQ2I7QUFDaEQsdURBQXVELDREQUE0RDtBQUMxSDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCLEVBQUUsa0VBQVM7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGlCQUFpQixpRUFBd0I7QUFDekM7QUFDQSxNQUFNO0FBQ04sZ0JBQWdCLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxpQkFBaUIscUVBQTRCO0FBQzdDO0FBQ0EsTUFBTTtBQUNOLGtCQUFrQiw2Q0FBUTtBQUMxQjtBQUNBLDBCQUEwQixvRUFBVTtBQUNwQyx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZGVsZXRlVmVyc2lvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJRXJyb3IsIGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHMsIGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24sIGdldEdsb2JhbCB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5leHBvcnQgY29uc3QgZGVsZXRlVmVyc2lvbnMgPSBhc3luYyBmdW5jdGlvbiBkZWxldGVWZXJzaW9ucyh7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBnbG9iYWxTbHVnLCBsb2NhbGUsIHJlcSwgd2hlcmUgfSkge1xuICAgIGxldCBmaWVsZHM7XG4gICAgbGV0IFZlcnNpb25zTW9kZWw7XG4gICAgaWYgKGdsb2JhbFNsdWcpIHtcbiAgICAgICAgY29uc3QgeyBnbG9iYWxDb25maWcsIE1vZGVsIH0gPSBnZXRHbG9iYWwoe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgICAgICB2ZXJzaW9uczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgZmllbGRzID0gYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGdsb2JhbENvbmZpZywgdHJ1ZSk7XG4gICAgICAgIFZlcnNpb25zTW9kZWwgPSBNb2RlbDtcbiAgICB9IGVsc2UgaWYgKGNvbGxlY3Rpb25TbHVnKSB7XG4gICAgICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGZpZWxkcyA9IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgY29sbGVjdGlvbkNvbmZpZywgdHJ1ZSk7XG4gICAgICAgIFZlcnNpb25zTW9kZWwgPSBNb2RlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoJ0VpdGhlciBjb2xsZWN0aW9uIG9yIGdsb2JhbFNsdWcgbXVzdCBiZSBwYXNzZWQuJyk7XG4gICAgfVxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSk7XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgYXdhaXQgVmVyc2lvbnNNb2RlbC5kZWxldGVNYW55KHF1ZXJ5LCB7XG4gICAgICAgIHNlc3Npb25cbiAgICB9KTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGV0ZVZlcnNpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/destroy.js":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/destroy.js ***!
  \***************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   destroy: () => (/* binding */ destroy)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n\nconst destroy = async function destroy() {\n    await mongoose__WEBPACK_IMPORTED_MODULE_0__.disconnect();\n    Object.keys(mongoose__WEBPACK_IMPORTED_MODULE_0__.models).map((model)=>mongoose__WEBPACK_IMPORTED_MODULE_0__.deleteModel(model));\n};\n\n//# sourceMappingURL=destroy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZGVzdHJveS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnQztBQUN6QjtBQUNQLFVBQVUsZ0RBQW1CO0FBQzdCLGdCQUFnQiw0Q0FBZSxlQUFlLGlEQUFvQjtBQUNsRTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZGVzdHJveS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuZXhwb3J0IGNvbnN0IGRlc3Ryb3kgPSBhc3luYyBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIGF3YWl0IG1vbmdvb3NlLmRpc2Nvbm5lY3QoKTtcbiAgICBPYmplY3Qua2V5cyhtb25nb29zZS5tb2RlbHMpLm1hcCgobW9kZWwpPT5tb25nb29zZS5kZWxldGVNb2RlbChtb2RlbCkpO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVzdHJveS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/destroy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/find.js":
/*!************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/find.js ***!
  \************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   find: () => (/* binding */ find)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/aggregatePaginate.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js\");\n/* harmony import */ var _utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/buildJoinAggregation.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\n\n\nconst find = async function find({ collection: collectionSlug, draftsEnabled, joins = {}, limit = 0, locale, page, pagination, projection, req, select, sort: sortArg, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req);\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const sortAggregation = [];\n    let sort;\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_3__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields: collectionConfig.flattenedFields,\n            locale,\n            sort: sortArg || collectionConfig.defaultSort,\n            sortAggregation,\n            timestamps: true\n        });\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    const paginationOptions = {\n        lean: true,\n        leanWithId: true,\n        options: {\n            session\n        },\n        page,\n        pagination,\n        projection,\n        sort,\n        useEstimatedCount\n    };\n    if (select) {\n        paginationOptions.projection = (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_5__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: collectionConfig.flattenedFields,\n            select\n        });\n    }\n    if (this.collation) {\n        const defaultLocale = 'en';\n        paginationOptions.collation = {\n            locale: locale && locale !== 'all' && locale !== '*' ? locale : defaultLocale,\n            ...this.collation\n        };\n    }\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        paginationOptions.useCustomCountFn = ()=>{\n            return Promise.resolve(Model.countDocuments(query, {\n                hint: {\n                    _id: 1\n                },\n                session\n            }));\n        };\n    }\n    if (limit >= 0) {\n        paginationOptions.limit = limit;\n        // limit must also be set here, it's ignored when pagination is false\n        paginationOptions.options.limit = limit;\n        // Disable pagination if limit is 0\n        if (limit === 0) {\n            paginationOptions.pagination = false;\n        }\n    }\n    let result;\n    const aggregate = await (0,_utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_6__.buildJoinAggregation)({\n        adapter: this,\n        collection: collectionSlug,\n        collectionConfig,\n        draftsEnabled,\n        joins,\n        locale,\n        query\n    });\n    if (aggregate || sortAggregation.length > 0) {\n        result = await (0,_utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_7__.aggregatePaginate)({\n            adapter: this,\n            collation: paginationOptions.collation,\n            joinAggregation: aggregate,\n            limit: paginationOptions.limit,\n            Model,\n            page: paginationOptions.page,\n            pagination: paginationOptions.pagination,\n            projection: paginationOptions.projection,\n            query,\n            session: paginationOptions.options?.session ?? undefined,\n            sort: paginationOptions.sort,\n            sortAggregation,\n            useEstimatedCount: paginationOptions.useEstimatedCount\n        });\n    } else {\n        result = await Model.paginate(query, paginationOptions);\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_8__.transform)({\n        adapter: this,\n        data: result.docs,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=find.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZmluZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQ0c7QUFDUTtBQUNRO0FBQ007QUFDVTtBQUM1QjtBQUNGO0FBQ0Y7QUFDOUMsbUNBQW1DLHFEQUFxRCwyRkFBMkY7QUFDMUwsWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMLDBCQUEwQixvRUFBVTtBQUNwQztBQUNBO0FBQ0EsNEJBQTRCLGdFQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwRUFBYztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGtHQUF5QjtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsd0ZBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdUJBQXVCLGtGQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRTb3J0UGFyYW0gfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRTb3J0UGFyYW0uanMnO1xuaW1wb3J0IHsgYWdncmVnYXRlUGFnaW5hdGUgfSBmcm9tICcuL3V0aWxpdGllcy9hZ2dyZWdhdGVQYWdpbmF0ZS5qcyc7XG5pbXBvcnQgeyBidWlsZEpvaW5BZ2dyZWdhdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkSm9pbkFnZ3JlZ2F0aW9uLmpzJztcbmltcG9ydCB7IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QgfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCBmaW5kID0gYXN5bmMgZnVuY3Rpb24gZmluZCh7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBkcmFmdHNFbmFibGVkLCBqb2lucyA9IHt9LCBsaW1pdCA9IDAsIGxvY2FsZSwgcGFnZSwgcGFnaW5hdGlvbiwgcHJvamVjdGlvbiwgcmVxLCBzZWxlY3QsIHNvcnQ6IHNvcnRBcmcsIHdoZXJlID0ge30gfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1Z1xuICAgIH0pO1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSk7XG4gICAgbGV0IGhhc05lYXJDb25zdHJhaW50ID0gZmFsc2U7XG4gICAgaWYgKHdoZXJlKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMod2hlcmUpO1xuICAgICAgICBoYXNOZWFyQ29uc3RyYWludCA9IGNvbnN0cmFpbnRzLnNvbWUoKHByb3ApPT5PYmplY3Qua2V5cyhwcm9wKS5zb21lKChrZXkpPT5rZXkgPT09ICduZWFyJykpO1xuICAgIH1cbiAgICBjb25zdCBzb3J0QWdncmVnYXRpb24gPSBbXTtcbiAgICBsZXQgc29ydDtcbiAgICBpZiAoIWhhc05lYXJDb25zdHJhaW50KSB7XG4gICAgICAgIHNvcnQgPSBidWlsZFNvcnRQYXJhbSh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLnBheWxvYWQuY29uZmlnLFxuICAgICAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgIHNvcnQ6IHNvcnRBcmcgfHwgY29sbGVjdGlvbkNvbmZpZy5kZWZhdWx0U29ydCxcbiAgICAgICAgICAgIHNvcnRBZ2dyZWdhdGlvbixcbiAgICAgICAgICAgIHRpbWVzdGFtcHM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgLy8gdXNlRXN0aW1hdGVkQ291bnQgaXMgZmFzdGVyLCBidXQgbm90IGFjY3VyYXRlLCBhcyBpdCBpZ25vcmVzIGFueSBmaWx0ZXJzLiBJdCBpcyB0aHVzIHNldCB0byB0cnVlIGlmIHRoZXJlIGFyZSBubyBmaWx0ZXJzLlxuICAgIGNvbnN0IHVzZUVzdGltYXRlZENvdW50ID0gaGFzTmVhckNvbnN0cmFpbnQgfHwgIXF1ZXJ5IHx8IE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDA7XG4gICAgY29uc3QgcGFnaW5hdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIGxlYW5XaXRoSWQ6IHRydWUsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSxcbiAgICAgICAgcGFnZSxcbiAgICAgICAgcGFnaW5hdGlvbixcbiAgICAgICAgcHJvamVjdGlvbixcbiAgICAgICAgc29ydCxcbiAgICAgICAgdXNlRXN0aW1hdGVkQ291bnRcbiAgICB9O1xuICAgIGlmIChzZWxlY3QpIHtcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMucHJvamVjdGlvbiA9IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3Qoe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbGxhdGlvbikge1xuICAgICAgICBjb25zdCBkZWZhdWx0TG9jYWxlID0gJ2VuJztcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMuY29sbGF0aW9uID0ge1xuICAgICAgICAgICAgbG9jYWxlOiBsb2NhbGUgJiYgbG9jYWxlICE9PSAnYWxsJyAmJiBsb2NhbGUgIT09ICcqJyA/IGxvY2FsZSA6IGRlZmF1bHRMb2NhbGUsXG4gICAgICAgICAgICAuLi50aGlzLmNvbGxhdGlvblxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXVzZUVzdGltYXRlZENvdW50ICYmIE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDAgJiYgdGhpcy5kaXNhYmxlSW5kZXhIaW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAvLyBJbXByb3ZlIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGUgY291bnREb2N1bWVudHMgcXVlcnkgd2hpY2ggaXMgdXNlZCBpZiB1c2VFc3RpbWF0ZWRDb3VudCBpcyBzZXQgdG8gZmFsc2UgYnkgYWRkaW5nXG4gICAgICAgIC8vIGEgaGludC4gQnkgZGVmYXVsdCwgaWYgbm8gaGludCBpcyBwcm92aWRlZCwgTW9uZ29EQiBkb2VzIG5vdCB1c2UgYW4gaW5kZXhlZCBmaWVsZCB0byBjb3VudCB0aGUgcmV0dXJuZWQgZG9jdW1lbnRzLFxuICAgICAgICAvLyB3aGljaCBtYWtlcyBxdWVyaWVzIHZlcnkgc2xvdy4gVGhpcyBvbmx5IGhhcHBlbnMgd2hlbiBubyBxdWVyeSAoZmlsdGVyKSBpcyBwcm92aWRlZC4gSWYgb25lIGlzIHByb3ZpZGVkLCBpdCB1c2VzXG4gICAgICAgIC8vIHRoZSBjb3JyZWN0IGluZGV4ZWQgZmllbGRcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMudXNlQ3VzdG9tQ291bnRGbiA9ICgpPT57XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKE1vZGVsLmNvdW50RG9jdW1lbnRzKHF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgaGludDoge1xuICAgICAgICAgICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGxpbWl0ID49IDApIHtcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgLy8gbGltaXQgbXVzdCBhbHNvIGJlIHNldCBoZXJlLCBpdCdzIGlnbm9yZWQgd2hlbiBwYWdpbmF0aW9uIGlzIGZhbHNlXG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLm9wdGlvbnMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgLy8gRGlzYWJsZSBwYWdpbmF0aW9uIGlmIGxpbWl0IGlzIDBcbiAgICAgICAgaWYgKGxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy5wYWdpbmF0aW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJlc3VsdDtcbiAgICBjb25zdCBhZ2dyZWdhdGUgPSBhd2FpdCBidWlsZEpvaW5BZ2dyZWdhdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBjb2xsZWN0aW9uQ29uZmlnLFxuICAgICAgICBkcmFmdHNFbmFibGVkLFxuICAgICAgICBqb2lucyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBxdWVyeVxuICAgIH0pO1xuICAgIGlmIChhZ2dyZWdhdGUgfHwgc29ydEFnZ3JlZ2F0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgYWdncmVnYXRlUGFnaW5hdGUoe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGNvbGxhdGlvbjogcGFnaW5hdGlvbk9wdGlvbnMuY29sbGF0aW9uLFxuICAgICAgICAgICAgam9pbkFnZ3JlZ2F0aW9uOiBhZ2dyZWdhdGUsXG4gICAgICAgICAgICBsaW1pdDogcGFnaW5hdGlvbk9wdGlvbnMubGltaXQsXG4gICAgICAgICAgICBNb2RlbCxcbiAgICAgICAgICAgIHBhZ2U6IHBhZ2luYXRpb25PcHRpb25zLnBhZ2UsXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uT3B0aW9ucy5wYWdpbmF0aW9uLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogcGFnaW5hdGlvbk9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgc2Vzc2lvbjogcGFnaW5hdGlvbk9wdGlvbnMub3B0aW9ucz8uc2Vzc2lvbiA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBzb3J0OiBwYWdpbmF0aW9uT3B0aW9ucy5zb3J0LFxuICAgICAgICAgICAgc29ydEFnZ3JlZ2F0aW9uLFxuICAgICAgICAgICAgdXNlRXN0aW1hdGVkQ291bnQ6IHBhZ2luYXRpb25PcHRpb25zLnVzZUVzdGltYXRlZENvdW50XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IE1vZGVsLnBhZ2luYXRlKHF1ZXJ5LCBwYWdpbmF0aW9uT3B0aW9ucyk7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IHJlc3VsdC5kb2NzLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5kLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/find.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findGlobal.js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findGlobal.js ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findGlobal: () => (/* binding */ findGlobal)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/combineQueries.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nconst findGlobal = async function findGlobal({ slug: globalSlug, locale, req, select, where = {} }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug\n    });\n    const fields = globalConfig.flattenedFields;\n    const options = {\n        lean: true,\n        select: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__.buildProjectionFromSelect)({\n            adapter: this,\n            fields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        fields,\n        globalSlug,\n        locale,\n        where: (0,payload__WEBPACK_IMPORTED_MODULE_4__.combineQueries)({\n            globalType: {\n                equals: globalSlug\n            }\n        }, where)\n    });\n    const doc = await Model.findOne(query, {}, options);\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: doc,\n        fields: globalConfig.fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=findGlobal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZmluZEdsb2JhbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXlDO0FBQ1k7QUFDZ0M7QUFDaEM7QUFDRTtBQUNGO0FBQzlDLCtDQUErQyxtREFBbUQ7QUFDekcsWUFBWSxzQkFBc0IsRUFBRSxrRUFBUztBQUM3QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrR0FBeUI7QUFDekM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdURBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2ZpbmRHbG9iYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tYmluZVF1ZXJpZXMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdC5qcyc7XG5pbXBvcnQgeyBnZXRHbG9iYWwgfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCBmaW5kR2xvYmFsID0gYXN5bmMgZnVuY3Rpb24gZmluZEdsb2JhbCh7IHNsdWc6IGdsb2JhbFNsdWcsIGxvY2FsZSwgcmVxLCBzZWxlY3QsIHdoZXJlID0ge30gfSkge1xuICAgIGNvbnN0IHsgZ2xvYmFsQ29uZmlnLCBNb2RlbCB9ID0gZ2V0R2xvYmFsKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZ2xvYmFsU2x1Z1xuICAgIH0pO1xuICAgIGNvbnN0IGZpZWxkcyA9IGdsb2JhbENvbmZpZy5mbGF0dGVuZWRGaWVsZHM7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgc2VsZWN0OiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSksXG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlOiBjb21iaW5lUXVlcmllcyh7XG4gICAgICAgICAgICBnbG9iYWxUeXBlOiB7XG4gICAgICAgICAgICAgICAgZXF1YWxzOiBnbG9iYWxTbHVnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHdoZXJlKVxuICAgIH0pO1xuICAgIGNvbnN0IGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRPbmUocXVlcnksIHt9LCBvcHRpb25zKTtcbiAgICBpZiAoIWRvYykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogZG9jLFxuICAgICAgICBmaWVsZHM6IGdsb2JhbENvbmZpZy5maWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIGRvYztcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmRHbG9iYWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findGlobal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findGlobalVersions.js":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findGlobalVersions.js ***!
  \**************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findGlobalVersions: () => (/* binding */ findGlobalVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\nconst findGlobalVersions = async function findGlobalVersions({ global: globalSlug, limit, locale, page, pagination, req, select, skip, sort: sortArg, where = {} }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug,\n        versions: true\n    });\n    const versionFields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig, true);\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req);\n    const options = {\n        limit,\n        session,\n        skip\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_3__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    let sort;\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_4__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields: versionFields,\n            locale,\n            sort: sortArg || '-updatedAt',\n            timestamps: true\n        });\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__.buildQuery)({\n        adapter: this,\n        fields: versionFields,\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    const paginationOptions = {\n        lean: true,\n        leanWithId: true,\n        limit,\n        options,\n        page,\n        pagination,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_6__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: versionFields,\n            select\n        }),\n        sort,\n        useEstimatedCount\n    };\n    if (this.collation) {\n        const defaultLocale = 'en';\n        paginationOptions.collation = {\n            locale: locale && locale !== 'all' && locale !== '*' ? locale : defaultLocale,\n            ...this.collation\n        };\n    }\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        paginationOptions.useCustomCountFn = ()=>{\n            return Promise.resolve(Model.countDocuments(query, {\n                hint: {\n                    _id: 1\n                },\n                session\n            }));\n        };\n    }\n    if (limit && limit >= 0) {\n        paginationOptions.limit = limit;\n        // limit must also be set here, it's ignored when pagination is false\n        paginationOptions.options.limit = limit;\n        // Disable pagination if limit is 0\n        if (limit === 0) {\n            paginationOptions.pagination = false;\n        }\n    }\n    const result = await Model.paginate(query, paginationOptions);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_7__.transform)({\n        adapter: this,\n        data: result.docs,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig),\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=findGlobalVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZmluZEdsb2JhbFZlcnNpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE0RTtBQUN2QjtBQUNRO0FBQ3dCO0FBQ2hDO0FBQ0U7QUFDRjtBQUM5QywrREFBK0QsbUdBQW1HO0FBQ3pLLFlBQVksc0JBQXNCLEVBQUUsa0VBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDBCQUEwQixpRUFBd0I7QUFDbEQsMEJBQTBCLG9FQUFVO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdFQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMEVBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0EsZ0JBQWdCLGlFQUF3QjtBQUN4QztBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kR2xvYmFsVmVyc2lvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzLCBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkU29ydFBhcmFtIH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzJztcbmltcG9ydCB7IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QgfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzJztcbmltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IGZpbmRHbG9iYWxWZXJzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGZpbmRHbG9iYWxWZXJzaW9ucyh7IGdsb2JhbDogZ2xvYmFsU2x1ZywgbGltaXQsIGxvY2FsZSwgcGFnZSwgcGFnaW5hdGlvbiwgcmVxLCBzZWxlY3QsIHNraXAsIHNvcnQ6IHNvcnRBcmcsIHdoZXJlID0ge30gfSkge1xuICAgIGNvbnN0IHsgZ2xvYmFsQ29uZmlnLCBNb2RlbCB9ID0gZ2V0R2xvYmFsKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCB2ZXJzaW9uRmllbGRzID0gYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGdsb2JhbENvbmZpZywgdHJ1ZSk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBsaW1pdCxcbiAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgc2tpcFxuICAgIH07XG4gICAgbGV0IGhhc05lYXJDb25zdHJhaW50ID0gZmFsc2U7XG4gICAgaWYgKHdoZXJlKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMod2hlcmUpO1xuICAgICAgICBoYXNOZWFyQ29uc3RyYWludCA9IGNvbnN0cmFpbnRzLnNvbWUoKHByb3ApPT5PYmplY3Qua2V5cyhwcm9wKS5zb21lKChrZXkpPT5rZXkgPT09ICduZWFyJykpO1xuICAgIH1cbiAgICBsZXQgc29ydDtcbiAgICBpZiAoIWhhc05lYXJDb25zdHJhaW50KSB7XG4gICAgICAgIHNvcnQgPSBidWlsZFNvcnRQYXJhbSh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLnBheWxvYWQuY29uZmlnLFxuICAgICAgICAgICAgZmllbGRzOiB2ZXJzaW9uRmllbGRzLFxuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgc29ydDogc29ydEFyZyB8fCAnLXVwZGF0ZWRBdCcsXG4gICAgICAgICAgICB0aW1lc3RhbXBzOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBmaWVsZHM6IHZlcnNpb25GaWVsZHMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbiAgICAvLyB1c2VFc3RpbWF0ZWRDb3VudCBpcyBmYXN0ZXIsIGJ1dCBub3QgYWNjdXJhdGUsIGFzIGl0IGlnbm9yZXMgYW55IGZpbHRlcnMuIEl0IGlzIHRodXMgc2V0IHRvIHRydWUgaWYgdGhlcmUgYXJlIG5vIGZpbHRlcnMuXG4gICAgY29uc3QgdXNlRXN0aW1hdGVkQ291bnQgPSBoYXNOZWFyQ29uc3RyYWludCB8fCAhcXVlcnkgfHwgT2JqZWN0LmtleXMocXVlcnkpLmxlbmd0aCA9PT0gMDtcbiAgICBjb25zdCBwYWdpbmF0aW9uT3B0aW9ucyA9IHtcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgbGVhbldpdGhJZDogdHJ1ZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHBhZ2luYXRpb24sXG4gICAgICAgIHByb2plY3Rpb246IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3Qoe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGZpZWxkczogdmVyc2lvbkZpZWxkcyxcbiAgICAgICAgICAgIHNlbGVjdFxuICAgICAgICB9KSxcbiAgICAgICAgc29ydCxcbiAgICAgICAgdXNlRXN0aW1hdGVkQ291bnRcbiAgICB9O1xuICAgIGlmICh0aGlzLmNvbGxhdGlvbikge1xuICAgICAgICBjb25zdCBkZWZhdWx0TG9jYWxlID0gJ2VuJztcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMuY29sbGF0aW9uID0ge1xuICAgICAgICAgICAgbG9jYWxlOiBsb2NhbGUgJiYgbG9jYWxlICE9PSAnYWxsJyAmJiBsb2NhbGUgIT09ICcqJyA/IGxvY2FsZSA6IGRlZmF1bHRMb2NhbGUsXG4gICAgICAgICAgICAuLi50aGlzLmNvbGxhdGlvblxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXVzZUVzdGltYXRlZENvdW50ICYmIE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDAgJiYgdGhpcy5kaXNhYmxlSW5kZXhIaW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAvLyBJbXByb3ZlIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGUgY291bnREb2N1bWVudHMgcXVlcnkgd2hpY2ggaXMgdXNlZCBpZiB1c2VFc3RpbWF0ZWRDb3VudCBpcyBzZXQgdG8gZmFsc2UgYnkgYWRkaW5nXG4gICAgICAgIC8vIGEgaGludC4gQnkgZGVmYXVsdCwgaWYgbm8gaGludCBpcyBwcm92aWRlZCwgTW9uZ29EQiBkb2VzIG5vdCB1c2UgYW4gaW5kZXhlZCBmaWVsZCB0byBjb3VudCB0aGUgcmV0dXJuZWQgZG9jdW1lbnRzLFxuICAgICAgICAvLyB3aGljaCBtYWtlcyBxdWVyaWVzIHZlcnkgc2xvdy4gVGhpcyBvbmx5IGhhcHBlbnMgd2hlbiBubyBxdWVyeSAoZmlsdGVyKSBpcyBwcm92aWRlZC4gSWYgb25lIGlzIHByb3ZpZGVkLCBpdCB1c2VzXG4gICAgICAgIC8vIHRoZSBjb3JyZWN0IGluZGV4ZWQgZmllbGRcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMudXNlQ3VzdG9tQ291bnRGbiA9ICgpPT57XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKE1vZGVsLmNvdW50RG9jdW1lbnRzKHF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgaGludDoge1xuICAgICAgICAgICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGxpbWl0ICYmIGxpbWl0ID49IDApIHtcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgLy8gbGltaXQgbXVzdCBhbHNvIGJlIHNldCBoZXJlLCBpdCdzIGlnbm9yZWQgd2hlbiBwYWdpbmF0aW9uIGlzIGZhbHNlXG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLm9wdGlvbnMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgLy8gRGlzYWJsZSBwYWdpbmF0aW9uIGlmIGxpbWl0IGlzIDBcbiAgICAgICAgaWYgKGxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy5wYWdpbmF0aW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTW9kZWwucGFnaW5hdGUocXVlcnksIHBhZ2luYXRpb25PcHRpb25zKTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiByZXN1bHQuZG9jcyxcbiAgICAgICAgZmllbGRzOiBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgZ2xvYmFsQ29uZmlnKSxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluZEdsb2JhbFZlcnNpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findGlobalVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findOne.js":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findOne.js ***!
  \***************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findOne: () => (/* binding */ findOne)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/aggregatePaginate.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js\");\n/* harmony import */ var _utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/buildJoinAggregation.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\nconst findOne = async function findOne({ collection: collectionSlug, draftsEnabled, joins, locale, req, select, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req);\n    const options = {\n        lean: true,\n        session\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_2__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    const projection = (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_3__.buildProjectionFromSelect)({\n        adapter: this,\n        fields: collectionConfig.flattenedFields,\n        select\n    });\n    const aggregate = await (0,_utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_4__.buildJoinAggregation)({\n        adapter: this,\n        collection: collectionSlug,\n        collectionConfig,\n        draftsEnabled,\n        joins,\n        locale,\n        projection,\n        query\n    });\n    let doc;\n    if (aggregate) {\n        const { docs } = await (0,_utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_5__.aggregatePaginate)({\n            adapter: this,\n            joinAggregation: aggregate,\n            limit: 1,\n            Model,\n            pagination: false,\n            projection,\n            query,\n            session\n        });\n        doc = docs[0];\n    } else {\n        ;\n        options.projection = projection;\n        doc = await Model.findOne(query, {}, options);\n    }\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__.transform)({\n        adapter: this,\n        data: doc,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=findOne.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZmluZE9uZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxRDtBQUNnQjtBQUNNO0FBQ1U7QUFDNUI7QUFDRjtBQUNGO0FBQzlDLHlDQUF5QyxtRkFBbUY7QUFDbkksWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMLDBCQUEwQixvRUFBVTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1QixrR0FBeUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDRCQUE0Qix3RkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU8sUUFBUSxrRkFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2ZpbmRPbmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGFnZ3JlZ2F0ZVBhZ2luYXRlIH0gZnJvbSAnLi91dGlsaXRpZXMvYWdncmVnYXRlUGFnaW5hdGUuanMnO1xuaW1wb3J0IHsgYnVpbGRKb2luQWdncmVnYXRpb24gfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZEpvaW5BZ2dyZWdhdGlvbi5qcyc7XG5pbXBvcnQgeyBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdC5qcyc7XG5pbXBvcnQgeyBnZXRDb2xsZWN0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgZmluZE9uZSA9IGFzeW5jIGZ1bmN0aW9uIGZpbmRPbmUoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgZHJhZnRzRW5hYmxlZCwgam9pbnMsIGxvY2FsZSwgcmVxLCBzZWxlY3QsIHdoZXJlID0ge30gfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1Z1xuICAgIH0pO1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgc2Vzc2lvblxuICAgIH07XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbiAgICBjb25zdCBwcm9qZWN0aW9uID0gYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIHNlbGVjdFxuICAgIH0pO1xuICAgIGNvbnN0IGFnZ3JlZ2F0ZSA9IGF3YWl0IGJ1aWxkSm9pbkFnZ3JlZ2F0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvblNsdWcsXG4gICAgICAgIGNvbGxlY3Rpb25Db25maWcsXG4gICAgICAgIGRyYWZ0c0VuYWJsZWQsXG4gICAgICAgIGpvaW5zLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgIHF1ZXJ5XG4gICAgfSk7XG4gICAgbGV0IGRvYztcbiAgICBpZiAoYWdncmVnYXRlKSB7XG4gICAgICAgIGNvbnN0IHsgZG9jcyB9ID0gYXdhaXQgYWdncmVnYXRlUGFnaW5hdGUoe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGpvaW5BZ2dyZWdhdGlvbjogYWdncmVnYXRlLFxuICAgICAgICAgICAgbGltaXQ6IDEsXG4gICAgICAgICAgICBNb2RlbCxcbiAgICAgICAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcHJvamVjdGlvbixcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgZG9jID0gZG9jc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICA7XG4gICAgICAgIG9wdGlvbnMucHJvamVjdGlvbiA9IHByb2plY3Rpb247XG4gICAgICAgIGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRPbmUocXVlcnksIHt9LCBvcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKCFkb2MpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IGRvYyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gZG9jO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluZE9uZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findOne.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findVersions.js":
/*!********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findVersions.js ***!
  \********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findVersions: () => (/* binding */ findVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\nconst findVersions = async function findVersions({ collection: collectionSlug, limit, locale, page, pagination, req = {}, select, skip, sort: sortArg, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req);\n    const options = {\n        limit,\n        session,\n        skip\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    let sort;\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_3__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields: collectionConfig.flattenedFields,\n            locale,\n            sort: sortArg || '-updatedAt',\n            timestamps: true\n        });\n    }\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true);\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__.buildQuery)({\n        adapter: this,\n        fields,\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    const paginationOptions = {\n        lean: true,\n        leanWithId: true,\n        limit,\n        options,\n        page,\n        pagination,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_6__.buildProjectionFromSelect)({\n            adapter: this,\n            fields,\n            select\n        }),\n        sort,\n        useEstimatedCount\n    };\n    if (this.collation) {\n        const defaultLocale = 'en';\n        paginationOptions.collation = {\n            locale: locale && locale !== 'all' && locale !== '*' ? locale : defaultLocale,\n            ...this.collation\n        };\n    }\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        paginationOptions.useCustomCountFn = ()=>{\n            return Promise.resolve(Model.countDocuments(query, {\n                hint: {\n                    _id: 1\n                },\n                session\n            }));\n        };\n    }\n    if (limit && limit >= 0) {\n        paginationOptions.limit = limit;\n        // limit must also be set here, it's ignored when pagination is false\n        paginationOptions.options.limit = limit;\n        // Disable pagination if limit is 0\n        if (limit === 0) {\n            paginationOptions.pagination = false;\n        }\n    }\n    const result = await Model.paginate(query, paginationOptions);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_7__.transform)({\n        adapter: this,\n        data: result.docs,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collectionConfig),\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=findVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZmluZFZlcnNpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFnRjtBQUMzQjtBQUNRO0FBQ3dCO0FBQzVCO0FBQ0Y7QUFDRjtBQUM5QyxtREFBbUQscUVBQXFFLDJDQUEyQztBQUMxSyxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCwwQkFBMEIsb0VBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQXVCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwRUFBYztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxtQkFBbUIscUVBQTRCO0FBQy9DLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0dBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBLGdCQUFnQixxRUFBNEI7QUFDNUM7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZmluZFZlcnNpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHMsIGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRTb3J0UGFyYW0gfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRTb3J0UGFyYW0uanMnO1xuaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IGZpbmRWZXJzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGZpbmRWZXJzaW9ucyh7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBsaW1pdCwgbG9jYWxlLCBwYWdlLCBwYWdpbmF0aW9uLCByZXEgPSB7fSwgc2VsZWN0LCBza2lwLCBzb3J0OiBzb3J0QXJnLCB3aGVyZSA9IHt9IH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBsaW1pdCxcbiAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgc2tpcFxuICAgIH07XG4gICAgbGV0IGhhc05lYXJDb25zdHJhaW50ID0gZmFsc2U7XG4gICAgaWYgKHdoZXJlKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMod2hlcmUpO1xuICAgICAgICBoYXNOZWFyQ29uc3RyYWludCA9IGNvbnN0cmFpbnRzLnNvbWUoKHByb3ApPT5PYmplY3Qua2V5cyhwcm9wKS5zb21lKChrZXkpPT5rZXkgPT09ICduZWFyJykpO1xuICAgIH1cbiAgICBsZXQgc29ydDtcbiAgICBpZiAoIWhhc05lYXJDb25zdHJhaW50KSB7XG4gICAgICAgIHNvcnQgPSBidWlsZFNvcnRQYXJhbSh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLnBheWxvYWQuY29uZmlnLFxuICAgICAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgIHNvcnQ6IHNvcnRBcmcgfHwgJy11cGRhdGVkQXQnLFxuICAgICAgICAgICAgdGltZXN0YW1wczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZmllbGRzID0gYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBjb2xsZWN0aW9uQ29uZmlnLCB0cnVlKTtcbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbiAgICAvLyB1c2VFc3RpbWF0ZWRDb3VudCBpcyBmYXN0ZXIsIGJ1dCBub3QgYWNjdXJhdGUsIGFzIGl0IGlnbm9yZXMgYW55IGZpbHRlcnMuIEl0IGlzIHRodXMgc2V0IHRvIHRydWUgaWYgdGhlcmUgYXJlIG5vIGZpbHRlcnMuXG4gICAgY29uc3QgdXNlRXN0aW1hdGVkQ291bnQgPSBoYXNOZWFyQ29uc3RyYWludCB8fCAhcXVlcnkgfHwgT2JqZWN0LmtleXMocXVlcnkpLmxlbmd0aCA9PT0gMDtcbiAgICBjb25zdCBwYWdpbmF0aW9uT3B0aW9ucyA9IHtcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgbGVhbldpdGhJZDogdHJ1ZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHBhZ2luYXRpb24sXG4gICAgICAgIHByb2plY3Rpb246IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3Qoe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgIHNlbGVjdFxuICAgICAgICB9KSxcbiAgICAgICAgc29ydCxcbiAgICAgICAgdXNlRXN0aW1hdGVkQ291bnRcbiAgICB9O1xuICAgIGlmICh0aGlzLmNvbGxhdGlvbikge1xuICAgICAgICBjb25zdCBkZWZhdWx0TG9jYWxlID0gJ2VuJztcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMuY29sbGF0aW9uID0ge1xuICAgICAgICAgICAgbG9jYWxlOiBsb2NhbGUgJiYgbG9jYWxlICE9PSAnYWxsJyAmJiBsb2NhbGUgIT09ICcqJyA/IGxvY2FsZSA6IGRlZmF1bHRMb2NhbGUsXG4gICAgICAgICAgICAuLi50aGlzLmNvbGxhdGlvblxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXVzZUVzdGltYXRlZENvdW50ICYmIE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDAgJiYgdGhpcy5kaXNhYmxlSW5kZXhIaW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAvLyBJbXByb3ZlIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGUgY291bnREb2N1bWVudHMgcXVlcnkgd2hpY2ggaXMgdXNlZCBpZiB1c2VFc3RpbWF0ZWRDb3VudCBpcyBzZXQgdG8gZmFsc2UgYnkgYWRkaW5nXG4gICAgICAgIC8vIGEgaGludC4gQnkgZGVmYXVsdCwgaWYgbm8gaGludCBpcyBwcm92aWRlZCwgTW9uZ29EQiBkb2VzIG5vdCB1c2UgYW4gaW5kZXhlZCBmaWVsZCB0byBjb3VudCB0aGUgcmV0dXJuZWQgZG9jdW1lbnRzLFxuICAgICAgICAvLyB3aGljaCBtYWtlcyBxdWVyaWVzIHZlcnkgc2xvdy4gVGhpcyBvbmx5IGhhcHBlbnMgd2hlbiBubyBxdWVyeSAoZmlsdGVyKSBpcyBwcm92aWRlZC4gSWYgb25lIGlzIHByb3ZpZGVkLCBpdCB1c2VzXG4gICAgICAgIC8vIHRoZSBjb3JyZWN0IGluZGV4ZWQgZmllbGRcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMudXNlQ3VzdG9tQ291bnRGbiA9ICgpPT57XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKE1vZGVsLmNvdW50RG9jdW1lbnRzKHF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgaGludDoge1xuICAgICAgICAgICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGxpbWl0ICYmIGxpbWl0ID49IDApIHtcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgLy8gbGltaXQgbXVzdCBhbHNvIGJlIHNldCBoZXJlLCBpdCdzIGlnbm9yZWQgd2hlbiBwYWdpbmF0aW9uIGlzIGZhbHNlXG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLm9wdGlvbnMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgLy8gRGlzYWJsZSBwYWdpbmF0aW9uIGlmIGxpbWl0IGlzIDBcbiAgICAgICAgaWYgKGxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy5wYWdpbmF0aW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTW9kZWwucGFnaW5hdGUocXVlcnksIHBhZ2luYXRpb25PcHRpb25zKTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiByZXN1bHQuZG9jcyxcbiAgICAgICAgZmllbGRzOiBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGNvbGxlY3Rpb25Db25maWcpLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5kVmVyc2lvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/index.js":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/index.js ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mongooseAdapter: () => (/* binding */ mongooseAdapter)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/createDatabaseAdapter.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/defaultBeginTransaction.js\");\n/* harmony import */ var _connect_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./connect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/connect.js\");\n/* harmony import */ var _count_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./count.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/count.js\");\n/* harmony import */ var _countGlobalVersions_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./countGlobalVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/countGlobalVersions.js\");\n/* harmony import */ var _countVersions_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./countVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/countVersions.js\");\n/* harmony import */ var _create_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./create.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/create.js\");\n/* harmony import */ var _createGlobal_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./createGlobal.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createGlobal.js\");\n/* harmony import */ var _createGlobalVersion_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./createGlobalVersion.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createGlobalVersion.js\");\n/* harmony import */ var _createMigration_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./createMigration.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createMigration.js\");\n/* harmony import */ var _createVersion_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./createVersion.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/createVersion.js\");\n/* harmony import */ var _deleteMany_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./deleteMany.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteMany.js\");\n/* harmony import */ var _deleteOne_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./deleteOne.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteOne.js\");\n/* harmony import */ var _deleteVersions_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./deleteVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/deleteVersions.js\");\n/* harmony import */ var _destroy_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./destroy.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/destroy.js\");\n/* harmony import */ var _find_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./find.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/find.js\");\n/* harmony import */ var _findGlobal_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./findGlobal.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findGlobal.js\");\n/* harmony import */ var _findGlobalVersions_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./findGlobalVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findGlobalVersions.js\");\n/* harmony import */ var _findOne_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./findOne.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findOne.js\");\n/* harmony import */ var _findVersions_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./findVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/findVersions.js\");\n/* harmony import */ var _init_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./init.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/init.js\");\n/* harmony import */ var _migrateFresh_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./migrateFresh.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/migrateFresh.js\");\n/* harmony import */ var _queryDrafts_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./queryDrafts.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queryDrafts.js\");\n/* harmony import */ var _transactions_beginTransaction_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./transactions/beginTransaction.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/beginTransaction.js\");\n/* harmony import */ var _transactions_commitTransaction_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./transactions/commitTransaction.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/commitTransaction.js\");\n/* harmony import */ var _transactions_rollbackTransaction_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./transactions/rollbackTransaction.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/rollbackTransaction.js\");\n/* harmony import */ var _updateGlobal_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./updateGlobal.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateGlobal.js\");\n/* harmony import */ var _updateGlobalVersion_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./updateGlobalVersion.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateGlobalVersion.js\");\n/* harmony import */ var _updateJobs_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./updateJobs.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateJobs.js\");\n/* harmony import */ var _updateMany_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./updateMany.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateMany.js\");\n/* harmony import */ var _updateOne_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./updateOne.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateOne.js\");\n/* harmony import */ var _updateVersion_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./updateVersion.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateVersion.js\");\n/* harmony import */ var _upsert_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./upsert.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/upsert.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mongooseAdapter({ allowAdditionalKeys = false, allowIDOnCreate = false, autoPluralization = true, collectionsSchemaOptions = {}, connectOptions, disableIndexHints = false, ensureIndexes = false, migrationDir: migrationDirArg, mongoMemoryServer, prodMigrations, transactionOptions = {}, url }) {\n    function adapter({ payload }) {\n        const migrationDir = findMigrationDir(migrationDirArg);\n        mongoose__WEBPACK_IMPORTED_MODULE_1__.set('strictQuery', false);\n        return (0,payload__WEBPACK_IMPORTED_MODULE_3__.createDatabaseAdapter)({\n            name: 'mongoose',\n            // Mongoose-specific\n            autoPluralization,\n            collections: {},\n            // @ts-expect-error initialize without a connection\n            connection: undefined,\n            connectOptions: connectOptions || {},\n            disableIndexHints,\n            ensureIndexes,\n            // @ts-expect-error don't have globals model yet\n            globals: undefined,\n            // @ts-expect-error Should not be required\n            mongoMemoryServer,\n            sessions: {},\n            transactionOptions: transactionOptions === false ? undefined : transactionOptions,\n            updateJobs: _updateJobs_js__WEBPACK_IMPORTED_MODULE_4__.updateJobs,\n            updateMany: _updateMany_js__WEBPACK_IMPORTED_MODULE_5__.updateMany,\n            url,\n            versions: {},\n            // DatabaseAdapter\n            allowAdditionalKeys,\n            allowIDOnCreate,\n            beginTransaction: transactionOptions === false ? (0,payload__WEBPACK_IMPORTED_MODULE_6__.defaultBeginTransaction)() : _transactions_beginTransaction_js__WEBPACK_IMPORTED_MODULE_7__.beginTransaction,\n            collectionsSchemaOptions,\n            commitTransaction: _transactions_commitTransaction_js__WEBPACK_IMPORTED_MODULE_8__.commitTransaction,\n            connect: _connect_js__WEBPACK_IMPORTED_MODULE_9__.connect,\n            count: _count_js__WEBPACK_IMPORTED_MODULE_10__.count,\n            countGlobalVersions: _countGlobalVersions_js__WEBPACK_IMPORTED_MODULE_11__.countGlobalVersions,\n            countVersions: _countVersions_js__WEBPACK_IMPORTED_MODULE_12__.countVersions,\n            create: _create_js__WEBPACK_IMPORTED_MODULE_13__.create,\n            createGlobal: _createGlobal_js__WEBPACK_IMPORTED_MODULE_14__.createGlobal,\n            createGlobalVersion: _createGlobalVersion_js__WEBPACK_IMPORTED_MODULE_15__.createGlobalVersion,\n            createMigration: _createMigration_js__WEBPACK_IMPORTED_MODULE_16__.createMigration,\n            createVersion: _createVersion_js__WEBPACK_IMPORTED_MODULE_17__.createVersion,\n            defaultIDType: 'text',\n            deleteMany: _deleteMany_js__WEBPACK_IMPORTED_MODULE_18__.deleteMany,\n            deleteOne: _deleteOne_js__WEBPACK_IMPORTED_MODULE_19__.deleteOne,\n            deleteVersions: _deleteVersions_js__WEBPACK_IMPORTED_MODULE_20__.deleteVersions,\n            destroy: _destroy_js__WEBPACK_IMPORTED_MODULE_21__.destroy,\n            find: _find_js__WEBPACK_IMPORTED_MODULE_22__.find,\n            findGlobal: _findGlobal_js__WEBPACK_IMPORTED_MODULE_23__.findGlobal,\n            findGlobalVersions: _findGlobalVersions_js__WEBPACK_IMPORTED_MODULE_24__.findGlobalVersions,\n            findOne: _findOne_js__WEBPACK_IMPORTED_MODULE_25__.findOne,\n            findVersions: _findVersions_js__WEBPACK_IMPORTED_MODULE_26__.findVersions,\n            init: _init_js__WEBPACK_IMPORTED_MODULE_27__.init,\n            migrateFresh: _migrateFresh_js__WEBPACK_IMPORTED_MODULE_28__.migrateFresh,\n            migrationDir,\n            packageName: '@payloadcms/db-mongodb',\n            payload,\n            prodMigrations,\n            queryDrafts: _queryDrafts_js__WEBPACK_IMPORTED_MODULE_29__.queryDrafts,\n            rollbackTransaction: _transactions_rollbackTransaction_js__WEBPACK_IMPORTED_MODULE_30__.rollbackTransaction,\n            updateGlobal: _updateGlobal_js__WEBPACK_IMPORTED_MODULE_31__.updateGlobal,\n            updateGlobalVersion: _updateGlobalVersion_js__WEBPACK_IMPORTED_MODULE_32__.updateGlobalVersion,\n            updateOne: _updateOne_js__WEBPACK_IMPORTED_MODULE_33__.updateOne,\n            updateVersion: _updateVersion_js__WEBPACK_IMPORTED_MODULE_34__.updateVersion,\n            upsert: _upsert_js__WEBPACK_IMPORTED_MODULE_35__.upsert\n        });\n    }\n    return {\n        name: 'mongoose',\n        allowIDOnCreate,\n        defaultIDType: 'text',\n        init: adapter\n    };\n}\n/**\n * Attempt to find migrations directory.\n *\n * Checks for the following directories in order:\n * - `migrationDir` argument from Payload config\n * - `src/migrations`\n * - `dist/migrations`\n * - `migrations`\n *\n * Defaults to `src/migrations`\n *\n * @param migrationDir\n * @returns\n */ function findMigrationDir(migrationDir) {\n    const cwd = process.cwd();\n    const srcDir = path__WEBPACK_IMPORTED_MODULE_2__.resolve(cwd, 'src/migrations');\n    const distDir = path__WEBPACK_IMPORTED_MODULE_2__.resolve(cwd, 'dist/migrations');\n    const relativeMigrations = path__WEBPACK_IMPORTED_MODULE_2__.resolve(cwd, 'migrations');\n    // Use arg if provided\n    if (migrationDir) {\n        return migrationDir;\n    }\n    // Check other common locations\n    if (fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(srcDir)) {\n        return srcDir;\n    }\n    if (fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(distDir)) {\n        return distDir;\n    }\n    if (fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(relativeMigrations)) {\n        return relativeMigrations;\n    }\n    return srcDir;\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNZO0FBQ1I7QUFDaUQ7QUFDbEM7QUFDSjtBQUM0QjtBQUNaO0FBQ2Q7QUFDWTtBQUNjO0FBQ1I7QUFDSjtBQUNOO0FBQ0Y7QUFDVTtBQUNkO0FBQ047QUFDWTtBQUNnQjtBQUN0QjtBQUNVO0FBQ2hCO0FBQ2dCO0FBQ0Y7QUFDdUI7QUFDRTtBQUNJO0FBQzNCO0FBQ2M7QUFDbEI7QUFDQTtBQUNGO0FBQ1E7QUFDZDtBQUM5QiwyQkFBMkIsNkdBQTZHLDZKQUE2SixPQUFPO0FBQ25ULHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0EsUUFBUSx5Q0FBWTtBQUNwQixlQUFlLDhEQUFxQjtBQUNwQztBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSxzQkFBc0I7QUFDdEIsc0JBQXNCO0FBQ3RCO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnRUFBdUIsS0FBSywrRUFBZ0I7QUFDekc7QUFDQSw2QkFBNkI7QUFDN0IsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQiwrQkFBK0I7QUFDL0IseUJBQXlCO0FBQ3pCLGtCQUFrQjtBQUNsQix3QkFBd0I7QUFDeEIsK0JBQStCO0FBQy9CLDJCQUEyQjtBQUMzQix5QkFBeUI7QUFDekI7QUFDQSxzQkFBc0I7QUFDdEIscUJBQXFCO0FBQ3JCLDBCQUEwQjtBQUMxQixtQkFBbUI7QUFDbkIsZ0JBQWdCO0FBQ2hCLHNCQUFzQjtBQUN0Qiw4QkFBOEI7QUFDOUIsbUJBQW1CO0FBQ25CLHdCQUF3QjtBQUN4QixnQkFBZ0I7QUFDaEIsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLCtCQUErQjtBQUMvQix3QkFBd0I7QUFDeEIsK0JBQStCO0FBQy9CLHFCQUFxQjtBQUNyQix5QkFBeUI7QUFDekIsa0JBQWtCO0FBQ2xCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlDQUFZO0FBQy9CLG9CQUFvQix5Q0FBWTtBQUNoQywrQkFBK0IseUNBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQWE7QUFDckI7QUFDQTtBQUNBLFFBQVEsMENBQWE7QUFDckI7QUFDQTtBQUNBLFFBQVEsMENBQWE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBjcmVhdGVEYXRhYmFzZUFkYXB0ZXIsIGRlZmF1bHRCZWdpblRyYW5zYWN0aW9uIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAnLi9jb25uZWN0LmpzJztcbmltcG9ydCB7IGNvdW50IH0gZnJvbSAnLi9jb3VudC5qcyc7XG5pbXBvcnQgeyBjb3VudEdsb2JhbFZlcnNpb25zIH0gZnJvbSAnLi9jb3VudEdsb2JhbFZlcnNpb25zLmpzJztcbmltcG9ydCB7IGNvdW50VmVyc2lvbnMgfSBmcm9tICcuL2NvdW50VmVyc2lvbnMuanMnO1xuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnLi9jcmVhdGUuanMnO1xuaW1wb3J0IHsgY3JlYXRlR2xvYmFsIH0gZnJvbSAnLi9jcmVhdGVHbG9iYWwuanMnO1xuaW1wb3J0IHsgY3JlYXRlR2xvYmFsVmVyc2lvbiB9IGZyb20gJy4vY3JlYXRlR2xvYmFsVmVyc2lvbi5qcyc7XG5pbXBvcnQgeyBjcmVhdGVNaWdyYXRpb24gfSBmcm9tICcuL2NyZWF0ZU1pZ3JhdGlvbi5qcyc7XG5pbXBvcnQgeyBjcmVhdGVWZXJzaW9uIH0gZnJvbSAnLi9jcmVhdGVWZXJzaW9uLmpzJztcbmltcG9ydCB7IGRlbGV0ZU1hbnkgfSBmcm9tICcuL2RlbGV0ZU1hbnkuanMnO1xuaW1wb3J0IHsgZGVsZXRlT25lIH0gZnJvbSAnLi9kZWxldGVPbmUuanMnO1xuaW1wb3J0IHsgZGVsZXRlVmVyc2lvbnMgfSBmcm9tICcuL2RlbGV0ZVZlcnNpb25zLmpzJztcbmltcG9ydCB7IGRlc3Ryb3kgfSBmcm9tICcuL2Rlc3Ryb3kuanMnO1xuaW1wb3J0IHsgZmluZCB9IGZyb20gJy4vZmluZC5qcyc7XG5pbXBvcnQgeyBmaW5kR2xvYmFsIH0gZnJvbSAnLi9maW5kR2xvYmFsLmpzJztcbmltcG9ydCB7IGZpbmRHbG9iYWxWZXJzaW9ucyB9IGZyb20gJy4vZmluZEdsb2JhbFZlcnNpb25zLmpzJztcbmltcG9ydCB7IGZpbmRPbmUgfSBmcm9tICcuL2ZpbmRPbmUuanMnO1xuaW1wb3J0IHsgZmluZFZlcnNpb25zIH0gZnJvbSAnLi9maW5kVmVyc2lvbnMuanMnO1xuaW1wb3J0IHsgaW5pdCB9IGZyb20gJy4vaW5pdC5qcyc7XG5pbXBvcnQgeyBtaWdyYXRlRnJlc2ggfSBmcm9tICcuL21pZ3JhdGVGcmVzaC5qcyc7XG5pbXBvcnQgeyBxdWVyeURyYWZ0cyB9IGZyb20gJy4vcXVlcnlEcmFmdHMuanMnO1xuaW1wb3J0IHsgYmVnaW5UcmFuc2FjdGlvbiB9IGZyb20gJy4vdHJhbnNhY3Rpb25zL2JlZ2luVHJhbnNhY3Rpb24uanMnO1xuaW1wb3J0IHsgY29tbWl0VHJhbnNhY3Rpb24gfSBmcm9tICcuL3RyYW5zYWN0aW9ucy9jb21taXRUcmFuc2FjdGlvbi5qcyc7XG5pbXBvcnQgeyByb2xsYmFja1RyYW5zYWN0aW9uIH0gZnJvbSAnLi90cmFuc2FjdGlvbnMvcm9sbGJhY2tUcmFuc2FjdGlvbi5qcyc7XG5pbXBvcnQgeyB1cGRhdGVHbG9iYWwgfSBmcm9tICcuL3VwZGF0ZUdsb2JhbC5qcyc7XG5pbXBvcnQgeyB1cGRhdGVHbG9iYWxWZXJzaW9uIH0gZnJvbSAnLi91cGRhdGVHbG9iYWxWZXJzaW9uLmpzJztcbmltcG9ydCB7IHVwZGF0ZUpvYnMgfSBmcm9tICcuL3VwZGF0ZUpvYnMuanMnO1xuaW1wb3J0IHsgdXBkYXRlTWFueSB9IGZyb20gJy4vdXBkYXRlTWFueS5qcyc7XG5pbXBvcnQgeyB1cGRhdGVPbmUgfSBmcm9tICcuL3VwZGF0ZU9uZS5qcyc7XG5pbXBvcnQgeyB1cGRhdGVWZXJzaW9uIH0gZnJvbSAnLi91cGRhdGVWZXJzaW9uLmpzJztcbmltcG9ydCB7IHVwc2VydCB9IGZyb20gJy4vdXBzZXJ0LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBtb25nb29zZUFkYXB0ZXIoeyBhbGxvd0FkZGl0aW9uYWxLZXlzID0gZmFsc2UsIGFsbG93SURPbkNyZWF0ZSA9IGZhbHNlLCBhdXRvUGx1cmFsaXphdGlvbiA9IHRydWUsIGNvbGxlY3Rpb25zU2NoZW1hT3B0aW9ucyA9IHt9LCBjb25uZWN0T3B0aW9ucywgZGlzYWJsZUluZGV4SGludHMgPSBmYWxzZSwgZW5zdXJlSW5kZXhlcyA9IGZhbHNlLCBtaWdyYXRpb25EaXI6IG1pZ3JhdGlvbkRpckFyZywgbW9uZ29NZW1vcnlTZXJ2ZXIsIHByb2RNaWdyYXRpb25zLCB0cmFuc2FjdGlvbk9wdGlvbnMgPSB7fSwgdXJsIH0pIHtcbiAgICBmdW5jdGlvbiBhZGFwdGVyKHsgcGF5bG9hZCB9KSB7XG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvbkRpciA9IGZpbmRNaWdyYXRpb25EaXIobWlncmF0aW9uRGlyQXJnKTtcbiAgICAgICAgbW9uZ29vc2Uuc2V0KCdzdHJpY3RRdWVyeScsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZURhdGFiYXNlQWRhcHRlcih7XG4gICAgICAgICAgICBuYW1lOiAnbW9uZ29vc2UnLFxuICAgICAgICAgICAgLy8gTW9uZ29vc2Utc3BlY2lmaWNcbiAgICAgICAgICAgIGF1dG9QbHVyYWxpemF0aW9uLFxuICAgICAgICAgICAgY29sbGVjdGlvbnM6IHt9LFxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBpbml0aWFsaXplIHdpdGhvdXQgYSBjb25uZWN0aW9uXG4gICAgICAgICAgICBjb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb25uZWN0T3B0aW9uczogY29ubmVjdE9wdGlvbnMgfHwge30sXG4gICAgICAgICAgICBkaXNhYmxlSW5kZXhIaW50cyxcbiAgICAgICAgICAgIGVuc3VyZUluZGV4ZXMsXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGRvbid0IGhhdmUgZ2xvYmFscyBtb2RlbCB5ZXRcbiAgICAgICAgICAgIGdsb2JhbHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgU2hvdWxkIG5vdCBiZSByZXF1aXJlZFxuICAgICAgICAgICAgbW9uZ29NZW1vcnlTZXJ2ZXIsXG4gICAgICAgICAgICBzZXNzaW9uczoge30sXG4gICAgICAgICAgICB0cmFuc2FjdGlvbk9wdGlvbnM6IHRyYW5zYWN0aW9uT3B0aW9ucyA9PT0gZmFsc2UgPyB1bmRlZmluZWQgOiB0cmFuc2FjdGlvbk9wdGlvbnMsXG4gICAgICAgICAgICB1cGRhdGVKb2JzLFxuICAgICAgICAgICAgdXBkYXRlTWFueSxcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIHZlcnNpb25zOiB7fSxcbiAgICAgICAgICAgIC8vIERhdGFiYXNlQWRhcHRlclxuICAgICAgICAgICAgYWxsb3dBZGRpdGlvbmFsS2V5cyxcbiAgICAgICAgICAgIGFsbG93SURPbkNyZWF0ZSxcbiAgICAgICAgICAgIGJlZ2luVHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uT3B0aW9ucyA9PT0gZmFsc2UgPyBkZWZhdWx0QmVnaW5UcmFuc2FjdGlvbigpIDogYmVnaW5UcmFuc2FjdGlvbixcbiAgICAgICAgICAgIGNvbGxlY3Rpb25zU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGNvbW1pdFRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgY29ubmVjdCxcbiAgICAgICAgICAgIGNvdW50LFxuICAgICAgICAgICAgY291bnRHbG9iYWxWZXJzaW9ucyxcbiAgICAgICAgICAgIGNvdW50VmVyc2lvbnMsXG4gICAgICAgICAgICBjcmVhdGUsXG4gICAgICAgICAgICBjcmVhdGVHbG9iYWwsXG4gICAgICAgICAgICBjcmVhdGVHbG9iYWxWZXJzaW9uLFxuICAgICAgICAgICAgY3JlYXRlTWlncmF0aW9uLFxuICAgICAgICAgICAgY3JlYXRlVmVyc2lvbixcbiAgICAgICAgICAgIGRlZmF1bHRJRFR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIGRlbGV0ZU1hbnksXG4gICAgICAgICAgICBkZWxldGVPbmUsXG4gICAgICAgICAgICBkZWxldGVWZXJzaW9ucyxcbiAgICAgICAgICAgIGRlc3Ryb3ksXG4gICAgICAgICAgICBmaW5kLFxuICAgICAgICAgICAgZmluZEdsb2JhbCxcbiAgICAgICAgICAgIGZpbmRHbG9iYWxWZXJzaW9ucyxcbiAgICAgICAgICAgIGZpbmRPbmUsXG4gICAgICAgICAgICBmaW5kVmVyc2lvbnMsXG4gICAgICAgICAgICBpbml0LFxuICAgICAgICAgICAgbWlncmF0ZUZyZXNoLFxuICAgICAgICAgICAgbWlncmF0aW9uRGlyLFxuICAgICAgICAgICAgcGFja2FnZU5hbWU6ICdAcGF5bG9hZGNtcy9kYi1tb25nb2RiJyxcbiAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICBwcm9kTWlncmF0aW9ucyxcbiAgICAgICAgICAgIHF1ZXJ5RHJhZnRzLFxuICAgICAgICAgICAgcm9sbGJhY2tUcmFuc2FjdGlvbixcbiAgICAgICAgICAgIHVwZGF0ZUdsb2JhbCxcbiAgICAgICAgICAgIHVwZGF0ZUdsb2JhbFZlcnNpb24sXG4gICAgICAgICAgICB1cGRhdGVPbmUsXG4gICAgICAgICAgICB1cGRhdGVWZXJzaW9uLFxuICAgICAgICAgICAgdXBzZXJ0XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiAnbW9uZ29vc2UnLFxuICAgICAgICBhbGxvd0lET25DcmVhdGUsXG4gICAgICAgIGRlZmF1bHRJRFR5cGU6ICd0ZXh0JyxcbiAgICAgICAgaW5pdDogYWRhcHRlclxuICAgIH07XG59XG4vKipcbiAqIEF0dGVtcHQgdG8gZmluZCBtaWdyYXRpb25zIGRpcmVjdG9yeS5cbiAqXG4gKiBDaGVja3MgZm9yIHRoZSBmb2xsb3dpbmcgZGlyZWN0b3JpZXMgaW4gb3JkZXI6XG4gKiAtIGBtaWdyYXRpb25EaXJgIGFyZ3VtZW50IGZyb20gUGF5bG9hZCBjb25maWdcbiAqIC0gYHNyYy9taWdyYXRpb25zYFxuICogLSBgZGlzdC9taWdyYXRpb25zYFxuICogLSBgbWlncmF0aW9uc2BcbiAqXG4gKiBEZWZhdWx0cyB0byBgc3JjL21pZ3JhdGlvbnNgXG4gKlxuICogQHBhcmFtIG1pZ3JhdGlvbkRpclxuICogQHJldHVybnNcbiAqLyBmdW5jdGlvbiBmaW5kTWlncmF0aW9uRGlyKG1pZ3JhdGlvbkRpcikge1xuICAgIGNvbnN0IGN3ZCA9IHByb2Nlc3MuY3dkKCk7XG4gICAgY29uc3Qgc3JjRGlyID0gcGF0aC5yZXNvbHZlKGN3ZCwgJ3NyYy9taWdyYXRpb25zJyk7XG4gICAgY29uc3QgZGlzdERpciA9IHBhdGgucmVzb2x2ZShjd2QsICdkaXN0L21pZ3JhdGlvbnMnKTtcbiAgICBjb25zdCByZWxhdGl2ZU1pZ3JhdGlvbnMgPSBwYXRoLnJlc29sdmUoY3dkLCAnbWlncmF0aW9ucycpO1xuICAgIC8vIFVzZSBhcmcgaWYgcHJvdmlkZWRcbiAgICBpZiAobWlncmF0aW9uRGlyKSB7XG4gICAgICAgIHJldHVybiBtaWdyYXRpb25EaXI7XG4gICAgfVxuICAgIC8vIENoZWNrIG90aGVyIGNvbW1vbiBsb2NhdGlvbnNcbiAgICBpZiAoZnMuZXhpc3RzU3luYyhzcmNEaXIpKSB7XG4gICAgICAgIHJldHVybiBzcmNEaXI7XG4gICAgfVxuICAgIGlmIChmcy5leGlzdHNTeW5jKGRpc3REaXIpKSB7XG4gICAgICAgIHJldHVybiBkaXN0RGlyO1xuICAgIH1cbiAgICBpZiAoZnMuZXhpc3RzU3luYyhyZWxhdGl2ZU1pZ3JhdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiByZWxhdGl2ZU1pZ3JhdGlvbnM7XG4gICAgfVxuICAgIHJldHVybiBzcmNEaXI7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/init.js":
/*!************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/init.js ***!
  \************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose-paginate-v2 */ \"(rsc)/./node_modules/.pnpm/mongoose-paginate-v2@1.8.5/node_modules/mongoose-paginate-v2/dist/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildVersionCompoundIndexes.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var _models_buildCollectionSchema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./models/buildCollectionSchema.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildCollectionSchema.js\");\n/* harmony import */ var _models_buildGlobalModel_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./models/buildGlobalModel.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildGlobalModel.js\");\n/* harmony import */ var _models_buildSchema_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./models/buildSchema.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js\");\n/* harmony import */ var _queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./queries/getBuildQueryPlugin.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js\");\n/* harmony import */ var _utilities_getDBName_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/getDBName.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getDBName.js\");\n\n\n\n\n\n\n\n\nconst init = function init() {\n    this.payload.config.collections.forEach((collection)=>{\n        const schemaOptions = this.collectionsSchemaOptions?.[collection.slug];\n        const schema = (0,_models_buildCollectionSchema_js__WEBPACK_IMPORTED_MODULE_2__.buildCollectionSchema)(collection, this.payload, schemaOptions);\n        if (collection.versions) {\n            const versionModelName = (0,_utilities_getDBName_js__WEBPACK_IMPORTED_MODULE_3__.getDBName)({\n                config: collection,\n                versions: true\n            });\n            const versionCollectionFields = (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collection);\n            const versionSchema = (0,_models_buildSchema_js__WEBPACK_IMPORTED_MODULE_5__.buildSchema)({\n                buildSchemaOptions: {\n                    disableUnique: true,\n                    draftsEnabled: true,\n                    indexSortableFields: this.payload.config.indexSortableFields,\n                    options: {\n                        minimize: false,\n                        timestamps: false,\n                        ...schemaOptions\n                    }\n                },\n                compoundIndexes: (0,payload__WEBPACK_IMPORTED_MODULE_6__.buildVersionCompoundIndexes)({\n                    indexes: collection.sanitizedIndexes\n                }),\n                configFields: versionCollectionFields,\n                payload: this.payload\n            });\n            versionSchema.plugin(mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_1__, {\n                useEstimatedCount: true\n            }).plugin((0,_queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_7__.getBuildQueryPlugin)({\n                collectionSlug: collection.slug,\n                versionsFields: (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collection, true)\n            }));\n            const versionCollectionName = this.autoPluralization === true && !collection.dbName ? undefined : versionModelName;\n            this.versions[collection.slug] = mongoose__WEBPACK_IMPORTED_MODULE_0__.model(versionModelName, versionSchema, versionCollectionName);\n        }\n        const modelName = (0,_utilities_getDBName_js__WEBPACK_IMPORTED_MODULE_3__.getDBName)({\n            config: collection\n        });\n        const collectionName = this.autoPluralization === true && !collection.dbName ? undefined : modelName;\n        this.collections[collection.slug] = mongoose__WEBPACK_IMPORTED_MODULE_0__.model(modelName, schema, collectionName);\n    });\n    this.globals = (0,_models_buildGlobalModel_js__WEBPACK_IMPORTED_MODULE_8__.buildGlobalModel)(this.payload);\n    this.payload.config.globals.forEach((global)=>{\n        if (global.versions) {\n            const versionModelName = (0,_utilities_getDBName_js__WEBPACK_IMPORTED_MODULE_3__.getDBName)({\n                config: global,\n                versions: true\n            });\n            const versionGlobalFields = (0,payload__WEBPACK_IMPORTED_MODULE_9__.buildVersionGlobalFields)(this.payload.config, global);\n            const versionSchema = (0,_models_buildSchema_js__WEBPACK_IMPORTED_MODULE_5__.buildSchema)({\n                buildSchemaOptions: {\n                    disableUnique: true,\n                    draftsEnabled: true,\n                    indexSortableFields: this.payload.config.indexSortableFields,\n                    options: {\n                        minimize: false,\n                        timestamps: false\n                    }\n                },\n                configFields: versionGlobalFields,\n                payload: this.payload\n            });\n            versionSchema.plugin(mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_1__, {\n                useEstimatedCount: true\n            }).plugin((0,_queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_7__.getBuildQueryPlugin)({\n                versionsFields: (0,payload__WEBPACK_IMPORTED_MODULE_9__.buildVersionGlobalFields)(this.payload.config, global, true)\n            }));\n            this.versions[global.slug] = mongoose__WEBPACK_IMPORTED_MODULE_0__.model(versionModelName, versionSchema, versionModelName);\n        }\n    });\n};\n\n//# sourceMappingURL=init.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvaW5pdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFnQztBQUNZO0FBQ2tFO0FBQ3BDO0FBQ1Y7QUFDVjtBQUNpQjtBQUNsQjtBQUM5QztBQUNQO0FBQ0E7QUFDQSx1QkFBdUIsdUZBQXFCO0FBQzVDO0FBQ0EscUNBQXFDLGtFQUFTO0FBQzlDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsNENBQTRDLHFFQUE0QjtBQUN4RSxrQ0FBa0MsbUVBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGlDQUFpQyxvRUFBMkI7QUFDNUQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYixpQ0FBaUMsaURBQVE7QUFDekM7QUFDQSxhQUFhLFNBQVMsb0ZBQW1CO0FBQ3pDO0FBQ0EsZ0NBQWdDLHFFQUE0QjtBQUM1RCxhQUFhO0FBQ2I7QUFDQSw2Q0FBNkMsMkNBQWM7QUFDM0Q7QUFDQSwwQkFBMEIsa0VBQVM7QUFDbkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw0Q0FBNEMsMkNBQWM7QUFDMUQsS0FBSztBQUNMLG1CQUFtQiw2RUFBZ0I7QUFDbkM7QUFDQTtBQUNBLHFDQUFxQyxrRUFBUztBQUM5QztBQUNBO0FBQ0EsYUFBYTtBQUNiLHdDQUF3QyxpRUFBd0I7QUFDaEUsa0NBQWtDLG1FQUFXO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYixpQ0FBaUMsaURBQVE7QUFDekM7QUFDQSxhQUFhLFNBQVMsb0ZBQW1CO0FBQ3pDLGdDQUFnQyxpRUFBd0I7QUFDeEQsYUFBYTtBQUNiLHlDQUF5QywyQ0FBYztBQUN2RDtBQUNBLEtBQUs7QUFDTDs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvaW5pdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHBhZ2luYXRlIGZyb20gJ21vbmdvb3NlLXBhZ2luYXRlLXYyJztcbmltcG9ydCB7IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHMsIGJ1aWxkVmVyc2lvbkNvbXBvdW5kSW5kZXhlcywgYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZENvbGxlY3Rpb25TY2hlbWEgfSBmcm9tICcuL21vZGVscy9idWlsZENvbGxlY3Rpb25TY2hlbWEuanMnO1xuaW1wb3J0IHsgYnVpbGRHbG9iYWxNb2RlbCB9IGZyb20gJy4vbW9kZWxzL2J1aWxkR2xvYmFsTW9kZWwuanMnO1xuaW1wb3J0IHsgYnVpbGRTY2hlbWEgfSBmcm9tICcuL21vZGVscy9idWlsZFNjaGVtYS5qcyc7XG5pbXBvcnQgeyBnZXRCdWlsZFF1ZXJ5UGx1Z2luIH0gZnJvbSAnLi9xdWVyaWVzL2dldEJ1aWxkUXVlcnlQbHVnaW4uanMnO1xuaW1wb3J0IHsgZ2V0REJOYW1lIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0REJOYW1lLmpzJztcbmV4cG9ydCBjb25zdCBpbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLnBheWxvYWQuY29uZmlnLmNvbGxlY3Rpb25zLmZvckVhY2goKGNvbGxlY3Rpb24pPT57XG4gICAgICAgIGNvbnN0IHNjaGVtYU9wdGlvbnMgPSB0aGlzLmNvbGxlY3Rpb25zU2NoZW1hT3B0aW9ucz8uW2NvbGxlY3Rpb24uc2x1Z107XG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IGJ1aWxkQ29sbGVjdGlvblNjaGVtYShjb2xsZWN0aW9uLCB0aGlzLnBheWxvYWQsIHNjaGVtYU9wdGlvbnMpO1xuICAgICAgICBpZiAoY29sbGVjdGlvbi52ZXJzaW9ucykge1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvbk1vZGVsTmFtZSA9IGdldERCTmFtZSh7XG4gICAgICAgICAgICAgICAgY29uZmlnOiBjb2xsZWN0aW9uLFxuICAgICAgICAgICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25Db2xsZWN0aW9uRmllbGRzID0gYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25TY2hlbWEgPSBidWlsZFNjaGVtYSh7XG4gICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVVbmlxdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRyYWZ0c0VuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4U29ydGFibGVGaWVsZHM6IHRoaXMucGF5bG9hZC5jb25maWcuaW5kZXhTb3J0YWJsZUZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1pemU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zY2hlbWFPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbXBvdW5kSW5kZXhlczogYnVpbGRWZXJzaW9uQ29tcG91bmRJbmRleGVzKHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlczogY29sbGVjdGlvbi5zYW5pdGl6ZWRJbmRleGVzXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgY29uZmlnRmllbGRzOiB2ZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyxcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmVyc2lvblNjaGVtYS5wbHVnaW4ocGFnaW5hdGUsIHtcbiAgICAgICAgICAgICAgICB1c2VFc3RpbWF0ZWRDb3VudDogdHJ1ZVxuICAgICAgICAgICAgfSkucGx1Z2luKGdldEJ1aWxkUXVlcnlQbHVnaW4oe1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25TbHVnOiBjb2xsZWN0aW9uLnNsdWcsXG4gICAgICAgICAgICAgICAgdmVyc2lvbnNGaWVsZHM6IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgY29sbGVjdGlvbiwgdHJ1ZSlcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25Db2xsZWN0aW9uTmFtZSA9IHRoaXMuYXV0b1BsdXJhbGl6YXRpb24gPT09IHRydWUgJiYgIWNvbGxlY3Rpb24uZGJOYW1lID8gdW5kZWZpbmVkIDogdmVyc2lvbk1vZGVsTmFtZTtcbiAgICAgICAgICAgIHRoaXMudmVyc2lvbnNbY29sbGVjdGlvbi5zbHVnXSA9IG1vbmdvb3NlLm1vZGVsKHZlcnNpb25Nb2RlbE5hbWUsIHZlcnNpb25TY2hlbWEsIHZlcnNpb25Db2xsZWN0aW9uTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZWxOYW1lID0gZ2V0REJOYW1lKHtcbiAgICAgICAgICAgIGNvbmZpZzogY29sbGVjdGlvblxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbk5hbWUgPSB0aGlzLmF1dG9QbHVyYWxpemF0aW9uID09PSB0cnVlICYmICFjb2xsZWN0aW9uLmRiTmFtZSA/IHVuZGVmaW5lZCA6IG1vZGVsTmFtZTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uLnNsdWddID0gbW9uZ29vc2UubW9kZWwobW9kZWxOYW1lLCBzY2hlbWEsIGNvbGxlY3Rpb25OYW1lKTtcbiAgICB9KTtcbiAgICB0aGlzLmdsb2JhbHMgPSBidWlsZEdsb2JhbE1vZGVsKHRoaXMucGF5bG9hZCk7XG4gICAgdGhpcy5wYXlsb2FkLmNvbmZpZy5nbG9iYWxzLmZvckVhY2goKGdsb2JhbCk9PntcbiAgICAgICAgaWYgKGdsb2JhbC52ZXJzaW9ucykge1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvbk1vZGVsTmFtZSA9IGdldERCTmFtZSh7XG4gICAgICAgICAgICAgICAgY29uZmlnOiBnbG9iYWwsXG4gICAgICAgICAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvbkdsb2JhbEZpZWxkcyA9IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBnbG9iYWwpO1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvblNjaGVtYSA9IGJ1aWxkU2NoZW1hKHtcbiAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZVVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZnRzRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhTb3J0YWJsZUZpZWxkczogdGhpcy5wYXlsb2FkLmNvbmZpZy5pbmRleFNvcnRhYmxlRmllbGRzLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWl6ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb25maWdGaWVsZHM6IHZlcnNpb25HbG9iYWxGaWVsZHMsXG4gICAgICAgICAgICAgICAgcGF5bG9hZDogdGhpcy5wYXlsb2FkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZlcnNpb25TY2hlbWEucGx1Z2luKHBhZ2luYXRlLCB7XG4gICAgICAgICAgICAgICAgdXNlRXN0aW1hdGVkQ291bnQ6IHRydWVcbiAgICAgICAgICAgIH0pLnBsdWdpbihnZXRCdWlsZFF1ZXJ5UGx1Z2luKHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uc0ZpZWxkczogYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGdsb2JhbCwgdHJ1ZSlcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMudmVyc2lvbnNbZ2xvYmFsLnNsdWddID0gbW9uZ29vc2UubW9kZWwodmVyc2lvbk1vZGVsTmFtZSwgdmVyc2lvblNjaGVtYSwgdmVyc2lvbk1vZGVsTmFtZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluaXQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/init.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/migrateFresh.js":
/*!********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/migrateFresh.js ***!
  \********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   migrateFresh: () => (/* binding */ migrateFresh)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/migrations/readMigrationFiles.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/initTransaction.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/commitTransaction.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/killTransaction.js\");\n/* harmony import */ var prompts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prompts */ \"(rsc)/./node_modules/.pnpm/prompts@2.4.2/node_modules/prompts/index.js\");\n\n\n/**\n * Drop the current database and run all migrate up functions\n */ async function migrateFresh({ forceAcceptWarning = false }) {\n    const { payload } = this;\n    if (!forceAcceptWarning) {\n        const { confirm: acceptWarning } = await prompts__WEBPACK_IMPORTED_MODULE_0__({\n            name: 'confirm',\n            type: 'confirm',\n            initial: false,\n            message: `WARNING: This will drop your database and run all migrations. Are you sure you want to proceed?`\n        }, {\n            onCancel: ()=>{\n                process.exit(0);\n            }\n        });\n        if (!acceptWarning) {\n            process.exit(0);\n        }\n    }\n    payload.logger.info({\n        msg: `Dropping database.`\n    });\n    await this.connection.dropDatabase();\n    const migrationFiles = await (0,payload__WEBPACK_IMPORTED_MODULE_1__.readMigrationFiles)({\n        payload\n    });\n    payload.logger.debug({\n        msg: `Found ${migrationFiles.length} migration files.`\n    });\n    const req = {\n        payload\n    };\n    // Run all migrate up\n    for (const migration of migrationFiles){\n        payload.logger.info({\n            msg: `Migrating: ${migration.name}`\n        });\n        try {\n            const start = Date.now();\n            await (0,payload__WEBPACK_IMPORTED_MODULE_2__.initTransaction)(req);\n            await migration.up({\n                payload,\n                req\n            });\n            await payload.create({\n                collection: 'payload-migrations',\n                data: {\n                    name: migration.name,\n                    batch: 1\n                },\n                req\n            });\n            await (0,payload__WEBPACK_IMPORTED_MODULE_3__.commitTransaction)(req);\n            payload.logger.info({\n                msg: `Migrated:  ${migration.name} (${Date.now() - start}ms)`\n            });\n        } catch (err) {\n            await (0,payload__WEBPACK_IMPORTED_MODULE_4__.killTransaction)(req);\n            payload.logger.error({\n                err,\n                msg: `Error running migration ${migration.name}. Rolling back.`\n            });\n            throw err;\n        }\n    }\n}\n\n//# sourceMappingURL=migrateFresh.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvbWlncmF0ZUZyZXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRztBQUNwRTtBQUM5QjtBQUNBO0FBQ0EsSUFBVyw4QkFBOEIsNEJBQTRCO0FBQ3JFLFlBQVksVUFBVTtBQUN0QjtBQUNBLGdCQUFnQix5QkFBeUIsUUFBUSxvQ0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUNBQWlDLDJEQUFrQjtBQUNuRDtBQUNBLEtBQUs7QUFDTDtBQUNBLHNCQUFzQix1QkFBdUI7QUFDN0MsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixlQUFlO0FBQzlDLFNBQVM7QUFDVDtBQUNBO0FBQ0Esa0JBQWtCLHdEQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiLGtCQUFrQiwwREFBaUI7QUFDbkM7QUFDQSxtQ0FBbUMsZ0JBQWdCLEdBQUcsbUJBQW1CO0FBQ3pFLGFBQWE7QUFDYixVQUFVO0FBQ1Ysa0JBQWtCLHdEQUFlO0FBQ2pDO0FBQ0E7QUFDQSxnREFBZ0QsZUFBZTtBQUMvRCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L21pZ3JhdGVGcmVzaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21taXRUcmFuc2FjdGlvbiwgaW5pdFRyYW5zYWN0aW9uLCBraWxsVHJhbnNhY3Rpb24sIHJlYWRNaWdyYXRpb25GaWxlcyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHByb21wdHMgZnJvbSAncHJvbXB0cyc7XG4vKipcbiAqIERyb3AgdGhlIGN1cnJlbnQgZGF0YWJhc2UgYW5kIHJ1biBhbGwgbWlncmF0ZSB1cCBmdW5jdGlvbnNcbiAqLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlncmF0ZUZyZXNoKHsgZm9yY2VBY2NlcHRXYXJuaW5nID0gZmFsc2UgfSkge1xuICAgIGNvbnN0IHsgcGF5bG9hZCB9ID0gdGhpcztcbiAgICBpZiAoIWZvcmNlQWNjZXB0V2FybmluZykge1xuICAgICAgICBjb25zdCB7IGNvbmZpcm06IGFjY2VwdFdhcm5pbmcgfSA9IGF3YWl0IHByb21wdHMoe1xuICAgICAgICAgICAgbmFtZTogJ2NvbmZpcm0nLFxuICAgICAgICAgICAgdHlwZTogJ2NvbmZpcm0nLFxuICAgICAgICAgICAgaW5pdGlhbDogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgV0FSTklORzogVGhpcyB3aWxsIGRyb3AgeW91ciBkYXRhYmFzZSBhbmQgcnVuIGFsbCBtaWdyYXRpb25zLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcHJvY2VlZD9gXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKT0+e1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghYWNjZXB0V2FybmluZykge1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBheWxvYWQubG9nZ2VyLmluZm8oe1xuICAgICAgICBtc2c6IGBEcm9wcGluZyBkYXRhYmFzZS5gXG4gICAgfSk7XG4gICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uLmRyb3BEYXRhYmFzZSgpO1xuICAgIGNvbnN0IG1pZ3JhdGlvbkZpbGVzID0gYXdhaXQgcmVhZE1pZ3JhdGlvbkZpbGVzKHtcbiAgICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHBheWxvYWQubG9nZ2VyLmRlYnVnKHtcbiAgICAgICAgbXNnOiBgRm91bmQgJHttaWdyYXRpb25GaWxlcy5sZW5ndGh9IG1pZ3JhdGlvbiBmaWxlcy5gXG4gICAgfSk7XG4gICAgY29uc3QgcmVxID0ge1xuICAgICAgICBwYXlsb2FkXG4gICAgfTtcbiAgICAvLyBSdW4gYWxsIG1pZ3JhdGUgdXBcbiAgICBmb3IgKGNvbnN0IG1pZ3JhdGlvbiBvZiBtaWdyYXRpb25GaWxlcyl7XG4gICAgICAgIHBheWxvYWQubG9nZ2VyLmluZm8oe1xuICAgICAgICAgICAgbXNnOiBgTWlncmF0aW5nOiAke21pZ3JhdGlvbi5uYW1lfWBcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBhd2FpdCBpbml0VHJhbnNhY3Rpb24ocmVxKTtcbiAgICAgICAgICAgIGF3YWl0IG1pZ3JhdGlvbi51cCh7XG4gICAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgICByZXFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcGF5bG9hZC5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246ICdwYXlsb2FkLW1pZ3JhdGlvbnMnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbWlncmF0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgY29tbWl0VHJhbnNhY3Rpb24ocmVxKTtcbiAgICAgICAgICAgIHBheWxvYWQubG9nZ2VyLmluZm8oe1xuICAgICAgICAgICAgICAgIG1zZzogYE1pZ3JhdGVkOiAgJHttaWdyYXRpb24ubmFtZX0gKCR7RGF0ZS5ub3coKSAtIHN0YXJ0fW1zKWBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGF3YWl0IGtpbGxUcmFuc2FjdGlvbihyZXEpO1xuICAgICAgICAgICAgcGF5bG9hZC5sb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgICAgICBtc2c6IGBFcnJvciBydW5uaW5nIG1pZ3JhdGlvbiAke21pZ3JhdGlvbi5uYW1lfS4gUm9sbGluZyBiYWNrLmBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlRnJlc2guanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/migrateFresh.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildCollectionSchema.js":
/*!************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildCollectionSchema.js ***!
  \************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildCollectionSchema: () => (/* binding */ buildCollectionSchema)\n/* harmony export */ });\n/* harmony import */ var mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose-paginate-v2 */ \"(rsc)/./node_modules/.pnpm/mongoose-paginate-v2@1.8.5/node_modules/mongoose-paginate-v2/dist/index.js\");\n/* harmony import */ var _queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../queries/getBuildQueryPlugin.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js\");\n/* harmony import */ var _buildSchema_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buildSchema.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js\");\n\n\n\nconst buildCollectionSchema = (collection, payload, schemaOptions = {})=>{\n    const schema = (0,_buildSchema_js__WEBPACK_IMPORTED_MODULE_1__.buildSchema)({\n        buildSchemaOptions: {\n            draftsEnabled: Boolean(typeof collection?.versions === 'object' && collection.versions.drafts),\n            indexSortableFields: payload.config.indexSortableFields,\n            options: {\n                minimize: false,\n                timestamps: collection.timestamps !== false,\n                ...schemaOptions\n            }\n        },\n        compoundIndexes: collection.sanitizedIndexes,\n        configFields: collection.fields,\n        payload\n    });\n    if (Array.isArray(collection.upload.filenameCompoundIndex)) {\n        const indexDefinition = collection.upload.filenameCompoundIndex.reduce((acc, index)=>{\n            acc[index] = 1;\n            return acc;\n        }, {});\n        schema.index(indexDefinition, {\n            unique: true\n        });\n    }\n    schema.plugin(mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_0__, {\n        useEstimatedCount: true\n    }).plugin((0,_queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_2__.getBuildQueryPlugin)({\n        collectionSlug: collection.slug\n    }));\n    return schema;\n};\n\n//# sourceMappingURL=buildCollectionSchema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvbW9kZWxzL2J1aWxkQ29sbGVjdGlvblNjaGVtYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRDO0FBQzRCO0FBQ3pCO0FBQ3hDLHNFQUFzRTtBQUM3RSxtQkFBbUIsNERBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esa0JBQWtCLGlEQUFRO0FBQzFCO0FBQ0EsS0FBSyxTQUFTLG9GQUFtQjtBQUNqQztBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9tb2RlbHMvYnVpbGRDb2xsZWN0aW9uU2NoZW1hLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYWdpbmF0ZSBmcm9tICdtb25nb29zZS1wYWdpbmF0ZS12Mic7XG5pbXBvcnQgeyBnZXRCdWlsZFF1ZXJ5UGx1Z2luIH0gZnJvbSAnLi4vcXVlcmllcy9nZXRCdWlsZFF1ZXJ5UGx1Z2luLmpzJztcbmltcG9ydCB7IGJ1aWxkU2NoZW1hIH0gZnJvbSAnLi9idWlsZFNjaGVtYS5qcyc7XG5leHBvcnQgY29uc3QgYnVpbGRDb2xsZWN0aW9uU2NoZW1hID0gKGNvbGxlY3Rpb24sIHBheWxvYWQsIHNjaGVtYU9wdGlvbnMgPSB7fSk9PntcbiAgICBjb25zdCBzY2hlbWEgPSBidWlsZFNjaGVtYSh7XG4gICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9uczoge1xuICAgICAgICAgICAgZHJhZnRzRW5hYmxlZDogQm9vbGVhbih0eXBlb2YgY29sbGVjdGlvbj8udmVyc2lvbnMgPT09ICdvYmplY3QnICYmIGNvbGxlY3Rpb24udmVyc2lvbnMuZHJhZnRzKSxcbiAgICAgICAgICAgIGluZGV4U29ydGFibGVGaWVsZHM6IHBheWxvYWQuY29uZmlnLmluZGV4U29ydGFibGVGaWVsZHMsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgbWluaW1pemU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcHM6IGNvbGxlY3Rpb24udGltZXN0YW1wcyAhPT0gZmFsc2UsXG4gICAgICAgICAgICAgICAgLi4uc2NoZW1hT3B0aW9uc1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb21wb3VuZEluZGV4ZXM6IGNvbGxlY3Rpb24uc2FuaXRpemVkSW5kZXhlcyxcbiAgICAgICAgY29uZmlnRmllbGRzOiBjb2xsZWN0aW9uLmZpZWxkcyxcbiAgICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbGxlY3Rpb24udXBsb2FkLmZpbGVuYW1lQ29tcG91bmRJbmRleCkpIHtcbiAgICAgICAgY29uc3QgaW5kZXhEZWZpbml0aW9uID0gY29sbGVjdGlvbi51cGxvYWQuZmlsZW5hbWVDb21wb3VuZEluZGV4LnJlZHVjZSgoYWNjLCBpbmRleCk9PntcbiAgICAgICAgICAgIGFjY1tpbmRleF0gPSAxO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgICAgICBzY2hlbWEuaW5kZXgoaW5kZXhEZWZpbml0aW9uLCB7XG4gICAgICAgICAgICB1bmlxdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNjaGVtYS5wbHVnaW4ocGFnaW5hdGUsIHtcbiAgICAgICAgdXNlRXN0aW1hdGVkQ291bnQ6IHRydWVcbiAgICB9KS5wbHVnaW4oZ2V0QnVpbGRRdWVyeVBsdWdpbih7XG4gICAgICAgIGNvbGxlY3Rpb25TbHVnOiBjb2xsZWN0aW9uLnNsdWdcbiAgICB9KSk7XG4gICAgcmV0dXJuIHNjaGVtYTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1aWxkQ29sbGVjdGlvblNjaGVtYS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildCollectionSchema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildGlobalModel.js":
/*!*******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildGlobalModel.js ***!
  \*******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildGlobalModel: () => (/* binding */ buildGlobalModel)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var _queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../queries/getBuildQueryPlugin.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js\");\n/* harmony import */ var _buildSchema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buildSchema.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js\");\n\n\n\nconst buildGlobalModel = (payload)=>{\n    if (payload.config.globals && payload.config.globals.length > 0) {\n        const globalsSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({}, {\n            discriminatorKey: 'globalType',\n            minimize: false,\n            timestamps: true\n        });\n        globalsSchema.plugin((0,_queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_1__.getBuildQueryPlugin)());\n        const Globals = mongoose__WEBPACK_IMPORTED_MODULE_0__.model('globals', globalsSchema, 'globals');\n        Object.values(payload.config.globals).forEach((globalConfig)=>{\n            const globalSchema = (0,_buildSchema_js__WEBPACK_IMPORTED_MODULE_2__.buildSchema)({\n                buildSchemaOptions: {\n                    options: {\n                        minimize: false\n                    }\n                },\n                configFields: globalConfig.fields,\n                payload\n            });\n            Globals.discriminator(globalConfig.slug, globalSchema);\n        });\n        return Globals;\n    }\n    return null;\n};\n\n//# sourceMappingURL=buildGlobalModel.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvbW9kZWxzL2J1aWxkR2xvYmFsTW9kZWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUN3QztBQUN6QjtBQUN4QztBQUNQO0FBQ0Esa0NBQWtDLDRDQUFlLEdBQUc7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDZCQUE2QixvRkFBbUI7QUFDaEQsd0JBQXdCLDJDQUFjO0FBQ3RDO0FBQ0EsaUNBQWlDLDREQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L21vZGVscy9idWlsZEdsb2JhbE1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgeyBnZXRCdWlsZFF1ZXJ5UGx1Z2luIH0gZnJvbSAnLi4vcXVlcmllcy9nZXRCdWlsZFF1ZXJ5UGx1Z2luLmpzJztcbmltcG9ydCB7IGJ1aWxkU2NoZW1hIH0gZnJvbSAnLi9idWlsZFNjaGVtYS5qcyc7XG5leHBvcnQgY29uc3QgYnVpbGRHbG9iYWxNb2RlbCA9IChwYXlsb2FkKT0+e1xuICAgIGlmIChwYXlsb2FkLmNvbmZpZy5nbG9iYWxzICYmIHBheWxvYWQuY29uZmlnLmdsb2JhbHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBnbG9iYWxzU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7fSwge1xuICAgICAgICAgICAgZGlzY3JpbWluYXRvcktleTogJ2dsb2JhbFR5cGUnLFxuICAgICAgICAgICAgbWluaW1pemU6IGZhbHNlLFxuICAgICAgICAgICAgdGltZXN0YW1wczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgZ2xvYmFsc1NjaGVtYS5wbHVnaW4oZ2V0QnVpbGRRdWVyeVBsdWdpbigpKTtcbiAgICAgICAgY29uc3QgR2xvYmFscyA9IG1vbmdvb3NlLm1vZGVsKCdnbG9iYWxzJywgZ2xvYmFsc1NjaGVtYSwgJ2dsb2JhbHMnKTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhwYXlsb2FkLmNvbmZpZy5nbG9iYWxzKS5mb3JFYWNoKChnbG9iYWxDb25maWcpPT57XG4gICAgICAgICAgICBjb25zdCBnbG9iYWxTY2hlbWEgPSBidWlsZFNjaGVtYSh7XG4gICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltaXplOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb25maWdGaWVsZHM6IGdsb2JhbENvbmZpZy5maWVsZHMsXG4gICAgICAgICAgICAgICAgcGF5bG9hZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBHbG9iYWxzLmRpc2NyaW1pbmF0b3IoZ2xvYmFsQ29uZmlnLnNsdWcsIGdsb2JhbFNjaGVtYSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gR2xvYmFscztcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZEdsb2JhbE1vZGVsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildGlobalModel.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js ***!
  \**************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildSchema: () => (/* binding */ buildSchema)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/fields/config/types.js\");\n\n\n/**\n * get a field's defaultValue only if defined and not dynamic so that it can be set on the field schema\n * @param field\n */ const formatDefaultValue = (field)=>typeof field.defaultValue !== 'undefined' && typeof field.defaultValue !== 'function' ? field.defaultValue : undefined;\nconst formatBaseSchema = ({ buildSchemaOptions, field, parentIsLocalized })=>{\n    const { disableUnique, draftsEnabled, indexSortableFields } = buildSchemaOptions;\n    const schema = {\n        default: formatDefaultValue(field),\n        index: field.index || !disableUnique && field.unique || indexSortableFields || false,\n        required: false,\n        unique: !disableUnique && field.unique || false\n    };\n    if (schema.unique && ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field,\n        parentIsLocalized\n    }) || draftsEnabled || (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field) && field.type !== 'group' && field.type !== 'tab' && field.required !== true)) {\n        schema.sparse = true;\n    }\n    if (field.hidden) {\n        schema.hidden = true;\n    }\n    return schema;\n};\nconst localizeSchema = (entity, schema, localization, parentIsLocalized)=>{\n    if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field: entity,\n        parentIsLocalized\n    }) && localization && Array.isArray(localization.locales)) {\n        return {\n            type: localization.localeCodes.reduce((localeSchema, locale)=>({\n                    ...localeSchema,\n                    [locale]: schema\n                }), {\n                _id: false\n            }),\n            localized: true\n        };\n    }\n    return schema;\n};\nconst buildSchema = (args)=>{\n    const { buildSchemaOptions = {}, configFields, parentIsLocalized, payload } = args;\n    const { allowIDField, options } = buildSchemaOptions;\n    let fields = {};\n    let schemaFields = configFields;\n    if (!allowIDField) {\n        const idField = schemaFields.find((field)=>(0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field) && field.name === 'id');\n        if (idField) {\n            fields = {\n                _id: idField.type === 'number' ? Number : String\n            };\n            schemaFields = schemaFields.filter((field)=>!((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field) && field.name === 'id'));\n        }\n    }\n    const schema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema(fields, options);\n    schemaFields.forEach((field)=>{\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(field)) {\n            return;\n        }\n        if (!(0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsPresentationalOnly)(field)) {\n            const addFieldSchema = getSchemaGenerator(field.type);\n            if (addFieldSchema) {\n                addFieldSchema(field, schema, payload, buildSchemaOptions, parentIsLocalized ?? false);\n            }\n        }\n    });\n    if (args.compoundIndexes) {\n        for (const index of args.compoundIndexes){\n            const indexDefinition = {};\n            for (const field of index.fields){\n                if (field.pathHasLocalized && payload.config.localization) {\n                    for (const locale of payload.config.localization.locales){\n                        indexDefinition[field.localizedPath.replace('<locale>', locale.code)] = 1;\n                    }\n                } else {\n                    indexDefinition[field.path] = 1;\n                }\n            }\n            schema.index(indexDefinition, {\n                unique: args.buildSchemaOptions.disableUnique ? false : index.unique\n            });\n        }\n    }\n    return schema;\n};\nconst array = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: [\n            buildSchema({\n                buildSchemaOptions: {\n                    allowIDField: true,\n                    disableUnique: buildSchemaOptions.disableUnique,\n                    draftsEnabled: buildSchemaOptions.draftsEnabled,\n                    options: {\n                        _id: false,\n                        id: false,\n                        minimize: false\n                    }\n                },\n                configFields: field.fields,\n                parentIsLocalized: parentIsLocalized || field.localized,\n                payload\n            })\n        ]\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst blocks = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const fieldSchema = {\n        type: [\n            new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({}, {\n                _id: false,\n                discriminatorKey: 'blockType'\n            })\n        ]\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, fieldSchema, payload.config.localization, parentIsLocalized)\n    });\n    (field.blockReferences ?? field.blocks).forEach((blockItem)=>{\n        const blockSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({}, {\n            _id: false,\n            id: false\n        });\n        const block = typeof blockItem === 'string' ? payload.blocks[blockItem] : blockItem;\n        if (!block) {\n            return;\n        }\n        block.fields.forEach((blockField)=>{\n            const addFieldSchema = getSchemaGenerator(blockField.type);\n            if (addFieldSchema) {\n                addFieldSchema(blockField, blockSchema, payload, buildSchemaOptions, (parentIsLocalized || field.localized) ?? false);\n            }\n        });\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n            field,\n            parentIsLocalized\n        }) && payload.config.localization) {\n            payload.config.localization.localeCodes.forEach((localeCode)=>{\n                // @ts-expect-error Possible incorrect typing in mongoose types, this works\n                schema.path(`${field.name}.${localeCode}`).discriminator(block.slug, blockSchema);\n            });\n        } else {\n            // @ts-expect-error Possible incorrect typing in mongoose types, this works\n            schema.path(field.name).discriminator(block.slug, blockSchema);\n        }\n    });\n};\nconst checkbox = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: Boolean\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst code = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst collapsible = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    field.fields.forEach((subField)=>{\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(subField)) {\n            return;\n        }\n        const addFieldSchema = getSchemaGenerator(subField.type);\n        if (addFieldSchema) {\n            addFieldSchema(subField, schema, payload, buildSchemaOptions, parentIsLocalized);\n        }\n    });\n};\nconst date = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: Date\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst email = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst group = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field)) {\n        const formattedBaseSchema = formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        });\n        // carry indexSortableFields through to versions if drafts enabled\n        const indexSortableFields = buildSchemaOptions.indexSortableFields && field.name === 'version' && buildSchemaOptions.draftsEnabled;\n        const baseSchema = {\n            ...formattedBaseSchema,\n            type: buildSchema({\n                buildSchemaOptions: {\n                    disableUnique: buildSchemaOptions.disableUnique,\n                    draftsEnabled: buildSchemaOptions.draftsEnabled,\n                    indexSortableFields,\n                    options: {\n                        _id: false,\n                        id: false,\n                        minimize: false\n                    }\n                },\n                configFields: field.fields,\n                parentIsLocalized: parentIsLocalized || field.localized,\n                payload\n            })\n        };\n        schema.add({\n            [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n        });\n    } else {\n        field.fields.forEach((subField)=>{\n            if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(subField)) {\n                return;\n            }\n            const addFieldSchema = getSchemaGenerator(subField.type);\n            if (addFieldSchema) {\n                addFieldSchema(subField, schema, payload, buildSchemaOptions, (parentIsLocalized || field.localized) ?? false);\n            }\n        });\n    }\n};\nconst json = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst number = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: field.hasMany ? [\n            Number\n        ] : Number\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst point = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        type: {\n            type: String,\n            enum: [\n                'Point'\n            ],\n            ...typeof field.defaultValue !== 'undefined' && {\n                default: 'Point'\n            }\n        },\n        coordinates: {\n            type: [\n                Number\n            ],\n            default: formatDefaultValue(field),\n            required: false\n        }\n    };\n    if (buildSchemaOptions.disableUnique && field.unique && (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field,\n        parentIsLocalized\n    })) {\n        baseSchema.coordinates.sparse = true;\n    }\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n    if (field.index === true || field.index === undefined) {\n        const indexOptions = {};\n        if (!buildSchemaOptions.disableUnique && field.unique) {\n            indexOptions.sparse = true;\n            indexOptions.unique = true;\n        }\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n            field,\n            parentIsLocalized\n        }) && payload.config.localization) {\n            payload.config.localization.locales.forEach((locale)=>{\n                schema.index({\n                    [`${field.name}.${locale.code}`]: '2dsphere'\n                }, indexOptions);\n            });\n        } else {\n            schema.index({\n                [field.name]: '2dsphere'\n            }, indexOptions);\n        }\n    }\n};\nconst radio = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String,\n        enum: field.options.map((option)=>{\n            if (typeof option === 'object') {\n                return option.value;\n            }\n            return option;\n        })\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst relationship = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const hasManyRelations = Array.isArray(field.relationTo);\n    let schemaToReturn = {};\n    const valueType = getRelationshipValueType(field, payload);\n    if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field,\n        parentIsLocalized\n    }) && payload.config.localization) {\n        schemaToReturn = {\n            _id: false,\n            type: payload.config.localization.localeCodes.reduce((locales, locale)=>{\n                let localeSchema = {};\n                if (hasManyRelations) {\n                    localeSchema = {\n                        ...formatBaseSchema({\n                            buildSchemaOptions,\n                            field,\n                            parentIsLocalized\n                        }),\n                        _id: false,\n                        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed,\n                        relationTo: {\n                            type: String,\n                            enum: field.relationTo\n                        },\n                        value: {\n                            type: valueType,\n                            refPath: `${field.name}.${locale}.relationTo`\n                        }\n                    };\n                } else {\n                    localeSchema = {\n                        ...formatBaseSchema({\n                            buildSchemaOptions,\n                            field,\n                            parentIsLocalized\n                        }),\n                        type: valueType,\n                        ref: field.relationTo\n                    };\n                }\n                return {\n                    ...locales,\n                    [locale]: field.hasMany ? {\n                        type: [\n                            localeSchema\n                        ],\n                        default: formatDefaultValue(field)\n                    } : localeSchema\n                };\n            }, {}),\n            localized: true\n        };\n    } else if (hasManyRelations) {\n        schemaToReturn = {\n            ...formatBaseSchema({\n                buildSchemaOptions,\n                field,\n                parentIsLocalized\n            }),\n            _id: false,\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed,\n            relationTo: {\n                type: String,\n                enum: field.relationTo\n            },\n            value: {\n                type: valueType,\n                refPath: `${field.name}.relationTo`\n            }\n        };\n        if (field.hasMany) {\n            schemaToReturn = {\n                type: [\n                    schemaToReturn\n                ],\n                default: formatDefaultValue(field)\n            };\n        }\n    } else {\n        schemaToReturn = {\n            ...formatBaseSchema({\n                buildSchemaOptions,\n                field,\n                parentIsLocalized\n            }),\n            type: valueType,\n            ref: field.relationTo\n        };\n        if (field.hasMany) {\n            schemaToReturn = {\n                type: [\n                    schemaToReturn\n                ],\n                default: formatDefaultValue(field)\n            };\n        }\n    }\n    schema.add({\n        [field.name]: schemaToReturn\n    });\n};\nconst richText = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst row = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    field.fields.forEach((subField)=>{\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(subField)) {\n            return;\n        }\n        const addFieldSchema = getSchemaGenerator(subField.type);\n        if (addFieldSchema) {\n            addFieldSchema(subField, schema, payload, buildSchemaOptions, parentIsLocalized);\n        }\n    });\n};\nconst select = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String,\n        enum: field.options.map((option)=>{\n            if (typeof option === 'object') {\n                return option.value;\n            }\n            return option;\n        })\n    };\n    if (buildSchemaOptions.draftsEnabled || !field.required) {\n        ;\n        baseSchema.enum.push(null);\n    }\n    schema.add({\n        [field.name]: localizeSchema(field, field.hasMany ? [\n            baseSchema\n        ] : baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst tabs = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    field.tabs.forEach((tab)=>{\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.tabHasName)(tab)) {\n            if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(tab)) {\n                return;\n            }\n            const baseSchema = {\n                type: buildSchema({\n                    buildSchemaOptions: {\n                        disableUnique: buildSchemaOptions.disableUnique,\n                        draftsEnabled: buildSchemaOptions.draftsEnabled,\n                        options: {\n                            _id: false,\n                            id: false,\n                            minimize: false\n                        }\n                    },\n                    configFields: tab.fields,\n                    parentIsLocalized: parentIsLocalized || tab.localized,\n                    payload\n                })\n            };\n            schema.add({\n                [tab.name]: localizeSchema(tab, baseSchema, payload.config.localization, parentIsLocalized)\n            });\n        } else {\n            tab.fields.forEach((subField)=>{\n                if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(subField)) {\n                    return;\n                }\n                const addFieldSchema = getSchemaGenerator(subField.type);\n                if (addFieldSchema) {\n                    addFieldSchema(subField, schema, payload, buildSchemaOptions, (parentIsLocalized || tab.localized) ?? false);\n                }\n            });\n        }\n    });\n};\nconst text = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: field.hasMany ? [\n            String\n        ] : String\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst textarea = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst upload = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const hasManyRelations = Array.isArray(field.relationTo);\n    let schemaToReturn = {};\n    const valueType = getRelationshipValueType(field, payload);\n    if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field,\n        parentIsLocalized\n    }) && payload.config.localization) {\n        schemaToReturn = {\n            _id: false,\n            type: payload.config.localization.localeCodes.reduce((locales, locale)=>{\n                let localeSchema = {};\n                if (hasManyRelations) {\n                    localeSchema = {\n                        ...formatBaseSchema({\n                            buildSchemaOptions,\n                            field,\n                            parentIsLocalized\n                        }),\n                        _id: false,\n                        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed,\n                        relationTo: {\n                            type: String,\n                            enum: field.relationTo\n                        },\n                        value: {\n                            type: valueType,\n                            refPath: `${field.name}.${locale}.relationTo`\n                        }\n                    };\n                } else {\n                    localeSchema = {\n                        ...formatBaseSchema({\n                            buildSchemaOptions,\n                            field,\n                            parentIsLocalized\n                        }),\n                        type: valueType,\n                        ref: field.relationTo\n                    };\n                }\n                return {\n                    ...locales,\n                    [locale]: field.hasMany ? {\n                        type: [\n                            localeSchema\n                        ],\n                        default: formatDefaultValue(field)\n                    } : localeSchema\n                };\n            }, {}),\n            localized: true\n        };\n    } else if (hasManyRelations) {\n        schemaToReturn = {\n            ...formatBaseSchema({\n                buildSchemaOptions,\n                field,\n                parentIsLocalized\n            }),\n            _id: false,\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed,\n            relationTo: {\n                type: String,\n                enum: field.relationTo\n            },\n            value: {\n                type: valueType,\n                refPath: `${field.name}.relationTo`\n            }\n        };\n        if (field.hasMany) {\n            schemaToReturn = {\n                type: [\n                    schemaToReturn\n                ],\n                default: formatDefaultValue(field)\n            };\n        }\n    } else {\n        schemaToReturn = {\n            ...formatBaseSchema({\n                buildSchemaOptions,\n                field,\n                parentIsLocalized\n            }),\n            type: valueType,\n            ref: field.relationTo\n        };\n        if (field.hasMany) {\n            schemaToReturn = {\n                type: [\n                    schemaToReturn\n                ],\n                default: formatDefaultValue(field)\n            };\n        }\n    }\n    schema.add({\n        [field.name]: schemaToReturn\n    });\n};\nconst getSchemaGenerator = (fieldType)=>{\n    if (fieldType in fieldToSchemaMap) {\n        return fieldToSchemaMap[fieldType];\n    }\n    return null;\n};\nconst fieldToSchemaMap = {\n    array,\n    blocks,\n    checkbox,\n    code,\n    collapsible,\n    date,\n    email,\n    group,\n    json,\n    number,\n    point,\n    radio,\n    relationship,\n    richText,\n    row,\n    select,\n    tabs,\n    text,\n    textarea,\n    upload\n};\nconst getRelationshipValueType = (field, payload)=>{\n    if (typeof field.relationTo === 'string') {\n        const customIDType = payload.collections[field.relationTo]?.customIDType;\n        if (!customIDType) {\n            return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId;\n        }\n        if (customIDType === 'number') {\n            return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Number;\n        }\n        return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String;\n    }\n    // has custom id relationTo\n    if (field.relationTo.some((relationTo)=>{\n        return !!payload.collections[relationTo]?.customIDType;\n    })) {\n        return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed;\n    }\n    return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId;\n};\n\n//# sourceMappingURL=buildSchema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvbW9kZWxzL2J1aWxkU2NoZW1hLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUNpRztBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4Q0FBOEM7QUFDMUUsWUFBWSxvREFBb0Q7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNFQUFzQjtBQUNoRDtBQUNBO0FBQ0EsS0FBSyxzQkFBc0IsZ0VBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNFQUFzQjtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksdUJBQXVCLDZDQUE2QztBQUNoRixZQUFZLHdCQUF3QjtBQUNwQztBQUNBO0FBQ0E7QUFDQSxtREFBbUQsZ0VBQWdCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGdFQUFnQjtBQUMxRTtBQUNBO0FBQ0EsdUJBQXVCLDRDQUFlO0FBQ3RDO0FBQ0EsWUFBWSw4REFBYztBQUMxQjtBQUNBO0FBQ0EsYUFBYSx5RUFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNENBQWUsR0FBRztBQUNsQztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZ0NBQWdDLDRDQUFlLEdBQUc7QUFDbEQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsWUFBWSxzRUFBc0I7QUFDbEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsK0JBQStCLFdBQVcsR0FBRyxXQUFXO0FBQ3hELGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxRQUFRLGdFQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsTUFBTTtBQUNOO0FBQ0EsZ0JBQWdCLDhEQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGNBQWMsNENBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsc0VBQXNCO0FBQ2xGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzRUFBc0I7QUFDbEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0JBQXdCLFdBQVcsR0FBRyxZQUFZO0FBQ2xELGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0VBQXNCO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSw4QkFBOEIsNENBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx3Q0FBd0MsV0FBVyxHQUFHLE9BQU87QUFDN0Q7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxhQUFhLElBQUk7QUFDakI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWtCLDRDQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsNEJBQTRCLFdBQVc7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGNBQWMsNENBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwREFBVTtBQUN0QixnQkFBZ0IsOERBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0Esb0JBQW9CLDhEQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0VBQXNCO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSw4QkFBOEIsNENBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx3Q0FBd0MsV0FBVyxHQUFHLE9BQU87QUFDN0Q7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxhQUFhLElBQUk7QUFDakI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWtCLDRDQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsNEJBQTRCLFdBQVc7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw0Q0FBZTtBQUNsQztBQUNBO0FBQ0EsbUJBQW1CLDRDQUFlO0FBQ2xDO0FBQ0EsZUFBZSw0Q0FBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxlQUFlLDRDQUFlO0FBQzlCO0FBQ0EsV0FBVyw0Q0FBZTtBQUMxQjs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvbW9kZWxzL2J1aWxkU2NoZW1hLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgeyBmaWVsZEFmZmVjdHNEYXRhLCBmaWVsZElzUHJlc2VudGF0aW9uYWxPbmx5LCBmaWVsZElzVmlydHVhbCwgZmllbGRTaG91bGRCZUxvY2FsaXplZCwgdGFiSGFzTmFtZSB9IGZyb20gJ3BheWxvYWQvc2hhcmVkJztcbi8qKlxuICogZ2V0IGEgZmllbGQncyBkZWZhdWx0VmFsdWUgb25seSBpZiBkZWZpbmVkIGFuZCBub3QgZHluYW1pYyBzbyB0aGF0IGl0IGNhbiBiZSBzZXQgb24gdGhlIGZpZWxkIHNjaGVtYVxuICogQHBhcmFtIGZpZWxkXG4gKi8gY29uc3QgZm9ybWF0RGVmYXVsdFZhbHVlID0gKGZpZWxkKT0+dHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSAhPT0gJ2Z1bmN0aW9uJyA/IGZpZWxkLmRlZmF1bHRWYWx1ZSA6IHVuZGVmaW5lZDtcbmNvbnN0IGZvcm1hdEJhc2VTY2hlbWEgPSAoeyBidWlsZFNjaGVtYU9wdGlvbnMsIGZpZWxkLCBwYXJlbnRJc0xvY2FsaXplZCB9KT0+e1xuICAgIGNvbnN0IHsgZGlzYWJsZVVuaXF1ZSwgZHJhZnRzRW5hYmxlZCwgaW5kZXhTb3J0YWJsZUZpZWxkcyB9ID0gYnVpbGRTY2hlbWFPcHRpb25zO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgZGVmYXVsdDogZm9ybWF0RGVmYXVsdFZhbHVlKGZpZWxkKSxcbiAgICAgICAgaW5kZXg6IGZpZWxkLmluZGV4IHx8ICFkaXNhYmxlVW5pcXVlICYmIGZpZWxkLnVuaXF1ZSB8fCBpbmRleFNvcnRhYmxlRmllbGRzIHx8IGZhbHNlLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIHVuaXF1ZTogIWRpc2FibGVVbmlxdWUgJiYgZmllbGQudW5pcXVlIHx8IGZhbHNlXG4gICAgfTtcbiAgICBpZiAoc2NoZW1hLnVuaXF1ZSAmJiAoZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgIGZpZWxkLFxuICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgIH0pIHx8IGRyYWZ0c0VuYWJsZWQgfHwgZmllbGRBZmZlY3RzRGF0YShmaWVsZCkgJiYgZmllbGQudHlwZSAhPT0gJ2dyb3VwJyAmJiBmaWVsZC50eXBlICE9PSAndGFiJyAmJiBmaWVsZC5yZXF1aXJlZCAhPT0gdHJ1ZSkpIHtcbiAgICAgICAgc2NoZW1hLnNwYXJzZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChmaWVsZC5oaWRkZW4pIHtcbiAgICAgICAgc2NoZW1hLmhpZGRlbiA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59O1xuY29uc3QgbG9jYWxpemVTY2hlbWEgPSAoZW50aXR5LCBzY2hlbWEsIGxvY2FsaXphdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgaWYgKGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICBmaWVsZDogZW50aXR5LFxuICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgIH0pICYmIGxvY2FsaXphdGlvbiAmJiBBcnJheS5pc0FycmF5KGxvY2FsaXphdGlvbi5sb2NhbGVzKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogbG9jYWxpemF0aW9uLmxvY2FsZUNvZGVzLnJlZHVjZSgobG9jYWxlU2NoZW1hLCBsb2NhbGUpPT4oe1xuICAgICAgICAgICAgICAgICAgICAuLi5sb2NhbGVTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIFtsb2NhbGVdOiBzY2hlbWFcbiAgICAgICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICAgIF9pZDogZmFsc2VcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbG9jYWxpemVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59O1xuZXhwb3J0IGNvbnN0IGJ1aWxkU2NoZW1hID0gKGFyZ3MpPT57XG4gICAgY29uc3QgeyBidWlsZFNjaGVtYU9wdGlvbnMgPSB7fSwgY29uZmlnRmllbGRzLCBwYXJlbnRJc0xvY2FsaXplZCwgcGF5bG9hZCB9ID0gYXJncztcbiAgICBjb25zdCB7IGFsbG93SURGaWVsZCwgb3B0aW9ucyB9ID0gYnVpbGRTY2hlbWFPcHRpb25zO1xuICAgIGxldCBmaWVsZHMgPSB7fTtcbiAgICBsZXQgc2NoZW1hRmllbGRzID0gY29uZmlnRmllbGRzO1xuICAgIGlmICghYWxsb3dJREZpZWxkKSB7XG4gICAgICAgIGNvbnN0IGlkRmllbGQgPSBzY2hlbWFGaWVsZHMuZmluZCgoZmllbGQpPT5maWVsZEFmZmVjdHNEYXRhKGZpZWxkKSAmJiBmaWVsZC5uYW1lID09PSAnaWQnKTtcbiAgICAgICAgaWYgKGlkRmllbGQpIHtcbiAgICAgICAgICAgIGZpZWxkcyA9IHtcbiAgICAgICAgICAgICAgICBfaWQ6IGlkRmllbGQudHlwZSA9PT0gJ251bWJlcicgPyBOdW1iZXIgOiBTdHJpbmdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzY2hlbWFGaWVsZHMgPSBzY2hlbWFGaWVsZHMuZmlsdGVyKChmaWVsZCk9PiEoZmllbGRBZmZlY3RzRGF0YShmaWVsZCkgJiYgZmllbGQubmFtZSA9PT0gJ2lkJykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoZmllbGRzLCBvcHRpb25zKTtcbiAgICBzY2hlbWFGaWVsZHMuZm9yRWFjaCgoZmllbGQpPT57XG4gICAgICAgIGlmIChmaWVsZElzVmlydHVhbChmaWVsZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpZWxkSXNQcmVzZW50YXRpb25hbE9ubHkoZmllbGQpKSB7XG4gICAgICAgICAgICBjb25zdCBhZGRGaWVsZFNjaGVtYSA9IGdldFNjaGVtYUdlbmVyYXRvcihmaWVsZC50eXBlKTtcbiAgICAgICAgICAgIGlmIChhZGRGaWVsZFNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGFkZEZpZWxkU2NoZW1hKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQgPz8gZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGFyZ3MuY29tcG91bmRJbmRleGVzKSB7XG4gICAgICAgIGZvciAoY29uc3QgaW5kZXggb2YgYXJncy5jb21wb3VuZEluZGV4ZXMpe1xuICAgICAgICAgICAgY29uc3QgaW5kZXhEZWZpbml0aW9uID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGluZGV4LmZpZWxkcyl7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLnBhdGhIYXNMb2NhbGl6ZWQgJiYgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbG9jYWxlIG9mIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4RGVmaW5pdGlvbltmaWVsZC5sb2NhbGl6ZWRQYXRoLnJlcGxhY2UoJzxsb2NhbGU+JywgbG9jYWxlLmNvZGUpXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmRleERlZmluaXRpb25bZmllbGQucGF0aF0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjaGVtYS5pbmRleChpbmRleERlZmluaXRpb24sIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6IGFyZ3MuYnVpbGRTY2hlbWFPcHRpb25zLmRpc2FibGVVbmlxdWUgPyBmYWxzZSA6IGluZGV4LnVuaXF1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn07XG5jb25zdCBhcnJheSA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSxcbiAgICAgICAgdHlwZTogW1xuICAgICAgICAgICAgYnVpbGRTY2hlbWEoe1xuICAgICAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd0lERmllbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVVbmlxdWU6IGJ1aWxkU2NoZW1hT3B0aW9ucy5kaXNhYmxlVW5pcXVlLFxuICAgICAgICAgICAgICAgICAgICBkcmFmdHNFbmFibGVkOiBidWlsZFNjaGVtYU9wdGlvbnMuZHJhZnRzRW5hYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltaXplOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb25maWdGaWVsZHM6IGZpZWxkLmZpZWxkcyxcbiAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZDogcGFyZW50SXNMb2NhbGl6ZWQgfHwgZmllbGQubG9jYWxpemVkLFxuICAgICAgICAgICAgICAgIHBheWxvYWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xufTtcbmNvbnN0IGJsb2NrcyA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGZpZWxkU2NoZW1hID0ge1xuICAgICAgICB0eXBlOiBbXG4gICAgICAgICAgICBuZXcgbW9uZ29vc2UuU2NoZW1hKHt9LCB7XG4gICAgICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkaXNjcmltaW5hdG9yS2V5OiAnYmxvY2tUeXBlJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH07XG4gICAgc2NoZW1hLmFkZCh7XG4gICAgICAgIFtmaWVsZC5uYW1lXTogbG9jYWxpemVTY2hlbWEoZmllbGQsIGZpZWxkU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xuICAgIChmaWVsZC5ibG9ja1JlZmVyZW5jZXMgPz8gZmllbGQuYmxvY2tzKS5mb3JFYWNoKChibG9ja0l0ZW0pPT57XG4gICAgICAgIGNvbnN0IGJsb2NrU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7fSwge1xuICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgIGlkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYmxvY2sgPSB0eXBlb2YgYmxvY2tJdGVtID09PSAnc3RyaW5nJyA/IHBheWxvYWQuYmxvY2tzW2Jsb2NrSXRlbV0gOiBibG9ja0l0ZW07XG4gICAgICAgIGlmICghYmxvY2spIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBibG9jay5maWVsZHMuZm9yRWFjaCgoYmxvY2tGaWVsZCk9PntcbiAgICAgICAgICAgIGNvbnN0IGFkZEZpZWxkU2NoZW1hID0gZ2V0U2NoZW1hR2VuZXJhdG9yKGJsb2NrRmllbGQudHlwZSk7XG4gICAgICAgICAgICBpZiAoYWRkRmllbGRTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICBhZGRGaWVsZFNjaGVtYShibG9ja0ZpZWxkLCBibG9ja1NjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCAocGFyZW50SXNMb2NhbGl6ZWQgfHwgZmllbGQubG9jYWxpemVkKSA/PyBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pICYmIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbikge1xuICAgICAgICAgICAgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLmxvY2FsZUNvZGVzLmZvckVhY2goKGxvY2FsZUNvZGUpPT57XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBQb3NzaWJsZSBpbmNvcnJlY3QgdHlwaW5nIGluIG1vbmdvb3NlIHR5cGVzLCB0aGlzIHdvcmtzXG4gICAgICAgICAgICAgICAgc2NoZW1hLnBhdGgoYCR7ZmllbGQubmFtZX0uJHtsb2NhbGVDb2RlfWApLmRpc2NyaW1pbmF0b3IoYmxvY2suc2x1ZywgYmxvY2tTY2hlbWEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFBvc3NpYmxlIGluY29ycmVjdCB0eXBpbmcgaW4gbW9uZ29vc2UgdHlwZXMsIHRoaXMgd29ya3NcbiAgICAgICAgICAgIHNjaGVtYS5wYXRoKGZpZWxkLm5hbWUpLmRpc2NyaW1pbmF0b3IoYmxvY2suc2x1ZywgYmxvY2tTY2hlbWEpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuY29uc3QgY2hlY2tib3ggPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xufTtcbmNvbnN0IGNvZGUgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH07XG4gICAgc2NoZW1hLmFkZCh7XG4gICAgICAgIFtmaWVsZC5uYW1lXTogbG9jYWxpemVTY2hlbWEoZmllbGQsIGJhc2VTY2hlbWEsIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQpXG4gICAgfSk7XG59O1xuY29uc3QgY29sbGFwc2libGUgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBmaWVsZC5maWVsZHMuZm9yRWFjaCgoc3ViRmllbGQpPT57XG4gICAgICAgIGlmIChmaWVsZElzVmlydHVhbChzdWJGaWVsZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRGaWVsZFNjaGVtYSA9IGdldFNjaGVtYUdlbmVyYXRvcihzdWJGaWVsZC50eXBlKTtcbiAgICAgICAgaWYgKGFkZEZpZWxkU2NoZW1hKSB7XG4gICAgICAgICAgICBhZGRGaWVsZFNjaGVtYShzdWJGaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IGRhdGUgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IERhdGVcbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xufTtcbmNvbnN0IGVtYWlsID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pLFxuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xufTtcbmNvbnN0IGdyb3VwID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgaWYgKGZpZWxkQWZmZWN0c0RhdGEoZmllbGQpKSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZEJhc2VTY2hlbWEgPSBmb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNhcnJ5IGluZGV4U29ydGFibGVGaWVsZHMgdGhyb3VnaCB0byB2ZXJzaW9ucyBpZiBkcmFmdHMgZW5hYmxlZFxuICAgICAgICBjb25zdCBpbmRleFNvcnRhYmxlRmllbGRzID0gYnVpbGRTY2hlbWFPcHRpb25zLmluZGV4U29ydGFibGVGaWVsZHMgJiYgZmllbGQubmFtZSA9PT0gJ3ZlcnNpb24nICYmIGJ1aWxkU2NoZW1hT3B0aW9ucy5kcmFmdHNFbmFibGVkO1xuICAgICAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAgICAgLi4uZm9ybWF0dGVkQmFzZVNjaGVtYSxcbiAgICAgICAgICAgIHR5cGU6IGJ1aWxkU2NoZW1hKHtcbiAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZVVuaXF1ZTogYnVpbGRTY2hlbWFPcHRpb25zLmRpc2FibGVVbmlxdWUsXG4gICAgICAgICAgICAgICAgICAgIGRyYWZ0c0VuYWJsZWQ6IGJ1aWxkU2NoZW1hT3B0aW9ucy5kcmFmdHNFbmFibGVkLFxuICAgICAgICAgICAgICAgICAgICBpbmRleFNvcnRhYmxlRmllbGRzLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1pemU6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbmZpZ0ZpZWxkczogZmllbGQuZmllbGRzLFxuICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkOiBwYXJlbnRJc0xvY2FsaXplZCB8fCBmaWVsZC5sb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgcGF5bG9hZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgc2NoZW1hLmFkZCh7XG4gICAgICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmaWVsZC5maWVsZHMuZm9yRWFjaCgoc3ViRmllbGQpPT57XG4gICAgICAgICAgICBpZiAoZmllbGRJc1ZpcnR1YWwoc3ViRmllbGQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWRkRmllbGRTY2hlbWEgPSBnZXRTY2hlbWFHZW5lcmF0b3Ioc3ViRmllbGQudHlwZSk7XG4gICAgICAgICAgICBpZiAoYWRkRmllbGRTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICBhZGRGaWVsZFNjaGVtYShzdWJGaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIChwYXJlbnRJc0xvY2FsaXplZCB8fCBmaWVsZC5sb2NhbGl6ZWQpID8/IGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcbmNvbnN0IGpzb24gPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5NaXhlZFxuICAgIH07XG4gICAgc2NoZW1hLmFkZCh7XG4gICAgICAgIFtmaWVsZC5uYW1lXTogbG9jYWxpemVTY2hlbWEoZmllbGQsIGJhc2VTY2hlbWEsIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQpXG4gICAgfSk7XG59O1xuY29uc3QgbnVtYmVyID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pLFxuICAgICAgICB0eXBlOiBmaWVsZC5oYXNNYW55ID8gW1xuICAgICAgICAgICAgTnVtYmVyXG4gICAgICAgIF0gOiBOdW1iZXJcbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xufTtcbmNvbnN0IHBvaW50ID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgZW51bTogW1xuICAgICAgICAgICAgICAgICdQb2ludCdcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAuLi50eXBlb2YgZmllbGQuZGVmYXVsdFZhbHVlICE9PSAndW5kZWZpbmVkJyAmJiB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogJ1BvaW50J1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb29yZGluYXRlczoge1xuICAgICAgICAgICAgdHlwZTogW1xuICAgICAgICAgICAgICAgIE51bWJlclxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZvcm1hdERlZmF1bHRWYWx1ZShmaWVsZCksXG4gICAgICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKGJ1aWxkU2NoZW1hT3B0aW9ucy5kaXNhYmxlVW5pcXVlICYmIGZpZWxkLnVuaXF1ZSAmJiBmaWVsZFNob3VsZEJlTG9jYWxpemVkKHtcbiAgICAgICAgZmllbGQsXG4gICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgfSkpIHtcbiAgICAgICAgYmFzZVNjaGVtYS5jb29yZGluYXRlcy5zcGFyc2UgPSB0cnVlO1xuICAgIH1cbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbiAgICBpZiAoZmllbGQuaW5kZXggPT09IHRydWUgfHwgZmllbGQuaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBpbmRleE9wdGlvbnMgPSB7fTtcbiAgICAgICAgaWYgKCFidWlsZFNjaGVtYU9wdGlvbnMuZGlzYWJsZVVuaXF1ZSAmJiBmaWVsZC51bmlxdWUpIHtcbiAgICAgICAgICAgIGluZGV4T3B0aW9ucy5zcGFyc2UgPSB0cnVlO1xuICAgICAgICAgICAgaW5kZXhPcHRpb25zLnVuaXF1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSAmJiBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVzLmZvckVhY2goKGxvY2FsZSk9PntcbiAgICAgICAgICAgICAgICBzY2hlbWEuaW5kZXgoe1xuICAgICAgICAgICAgICAgICAgICBbYCR7ZmllbGQubmFtZX0uJHtsb2NhbGUuY29kZX1gXTogJzJkc3BoZXJlJ1xuICAgICAgICAgICAgICAgIH0sIGluZGV4T3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjaGVtYS5pbmRleCh7XG4gICAgICAgICAgICAgICAgW2ZpZWxkLm5hbWVdOiAnMmRzcGhlcmUnXG4gICAgICAgICAgICB9LCBpbmRleE9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IHJhZGlvID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pLFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW06IGZpZWxkLm9wdGlvbnMubWFwKChvcHRpb24pPT57XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbjtcbiAgICAgICAgfSlcbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xufTtcbmNvbnN0IHJlbGF0aW9uc2hpcCA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGhhc01hbnlSZWxhdGlvbnMgPSBBcnJheS5pc0FycmF5KGZpZWxkLnJlbGF0aW9uVG8pO1xuICAgIGxldCBzY2hlbWFUb1JldHVybiA9IHt9O1xuICAgIGNvbnN0IHZhbHVlVHlwZSA9IGdldFJlbGF0aW9uc2hpcFZhbHVlVHlwZShmaWVsZCwgcGF5bG9hZCk7XG4gICAgaWYgKGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICBmaWVsZCxcbiAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICB9KSAmJiBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24pIHtcbiAgICAgICAgc2NoZW1hVG9SZXR1cm4gPSB7XG4gICAgICAgICAgICBfaWQ6IGZhbHNlLFxuICAgICAgICAgICAgdHlwZTogcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLmxvY2FsZUNvZGVzLnJlZHVjZSgobG9jYWxlcywgbG9jYWxlKT0+e1xuICAgICAgICAgICAgICAgIGxldCBsb2NhbGVTY2hlbWEgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzTWFueVJlbGF0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGVTY2hlbWEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5NaXhlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uVG86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bTogZmllbGQucmVsYXRpb25Ub1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdmFsdWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZlBhdGg6IGAke2ZpZWxkLm5hbWV9LiR7bG9jYWxlfS5yZWxhdGlvblRvYFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZVNjaGVtYSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6IGZpZWxkLnJlbGF0aW9uVG9cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubG9jYWxlcyxcbiAgICAgICAgICAgICAgICAgICAgW2xvY2FsZV06IGZpZWxkLmhhc01hbnkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlU2NoZW1hXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZm9ybWF0RGVmYXVsdFZhbHVlKGZpZWxkKVxuICAgICAgICAgICAgICAgICAgICB9IDogbG9jYWxlU2NoZW1hXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sIHt9KSxcbiAgICAgICAgICAgIGxvY2FsaXplZDogdHJ1ZVxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaGFzTWFueVJlbGF0aW9ucykge1xuICAgICAgICBzY2hlbWFUb1JldHVybiA9IHtcbiAgICAgICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBfaWQ6IGZhbHNlLFxuICAgICAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxuICAgICAgICAgICAgcmVsYXRpb25Ubzoge1xuICAgICAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgICAgICBlbnVtOiBmaWVsZC5yZWxhdGlvblRvXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgICAgICAgICAgcmVmUGF0aDogYCR7ZmllbGQubmFtZX0ucmVsYXRpb25Ub2BcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZpZWxkLmhhc01hbnkpIHtcbiAgICAgICAgICAgIHNjaGVtYVRvUmV0dXJuID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hVG9SZXR1cm5cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZvcm1hdERlZmF1bHRWYWx1ZShmaWVsZClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBzY2hlbWFUb1JldHVybiA9IHtcbiAgICAgICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgICAgICByZWY6IGZpZWxkLnJlbGF0aW9uVG9cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZpZWxkLmhhc01hbnkpIHtcbiAgICAgICAgICAgIHNjaGVtYVRvUmV0dXJuID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hVG9SZXR1cm5cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZvcm1hdERlZmF1bHRWYWx1ZShmaWVsZClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2NoZW1hLmFkZCh7XG4gICAgICAgIFtmaWVsZC5uYW1lXTogc2NoZW1hVG9SZXR1cm5cbiAgICB9KTtcbn07XG5jb25zdCByaWNoVGV4dCA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSxcbiAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCByb3cgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBmaWVsZC5maWVsZHMuZm9yRWFjaCgoc3ViRmllbGQpPT57XG4gICAgICAgIGlmIChmaWVsZElzVmlydHVhbChzdWJGaWVsZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRGaWVsZFNjaGVtYSA9IGdldFNjaGVtYUdlbmVyYXRvcihzdWJGaWVsZC50eXBlKTtcbiAgICAgICAgaWYgKGFkZEZpZWxkU2NoZW1hKSB7XG4gICAgICAgICAgICBhZGRGaWVsZFNjaGVtYShzdWJGaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IHNlbGVjdCA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSxcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBlbnVtOiBmaWVsZC5vcHRpb25zLm1hcCgob3B0aW9uKT0+e1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvcHRpb247XG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBpZiAoYnVpbGRTY2hlbWFPcHRpb25zLmRyYWZ0c0VuYWJsZWQgfHwgIWZpZWxkLnJlcXVpcmVkKSB7XG4gICAgICAgIDtcbiAgICAgICAgYmFzZVNjaGVtYS5lbnVtLnB1c2gobnVsbCk7XG4gICAgfVxuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBmaWVsZC5oYXNNYW55ID8gW1xuICAgICAgICAgICAgYmFzZVNjaGVtYVxuICAgICAgICBdIDogYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCB0YWJzID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgZmllbGQudGFicy5mb3JFYWNoKCh0YWIpPT57XG4gICAgICAgIGlmICh0YWJIYXNOYW1lKHRhYikpIHtcbiAgICAgICAgICAgIGlmIChmaWVsZElzVmlydHVhbCh0YWIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBidWlsZFNjaGVtYSh7XG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZVVuaXF1ZTogYnVpbGRTY2hlbWFPcHRpb25zLmRpc2FibGVVbmlxdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFmdHNFbmFibGVkOiBidWlsZFNjaGVtYU9wdGlvbnMuZHJhZnRzRW5hYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWl6ZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnRmllbGRzOiB0YWIuZmllbGRzLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZDogcGFyZW50SXNMb2NhbGl6ZWQgfHwgdGFiLmxvY2FsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2NoZW1hLmFkZCh7XG4gICAgICAgICAgICAgICAgW3RhYi5uYW1lXTogbG9jYWxpemVTY2hlbWEodGFiLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YWIuZmllbGRzLmZvckVhY2goKHN1YkZpZWxkKT0+e1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZElzVmlydHVhbChzdWJGaWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBhZGRGaWVsZFNjaGVtYSA9IGdldFNjaGVtYUdlbmVyYXRvcihzdWJGaWVsZC50eXBlKTtcbiAgICAgICAgICAgICAgICBpZiAoYWRkRmllbGRTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRmllbGRTY2hlbWEoc3ViRmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCAocGFyZW50SXNMb2NhbGl6ZWQgfHwgdGFiLmxvY2FsaXplZCkgPz8gZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuY29uc3QgdGV4dCA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSxcbiAgICAgICAgdHlwZTogZmllbGQuaGFzTWFueSA/IFtcbiAgICAgICAgICAgIFN0cmluZ1xuICAgICAgICBdIDogU3RyaW5nXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCB0ZXh0YXJlYSA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCB1cGxvYWQgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBoYXNNYW55UmVsYXRpb25zID0gQXJyYXkuaXNBcnJheShmaWVsZC5yZWxhdGlvblRvKTtcbiAgICBsZXQgc2NoZW1hVG9SZXR1cm4gPSB7fTtcbiAgICBjb25zdCB2YWx1ZVR5cGUgPSBnZXRSZWxhdGlvbnNoaXBWYWx1ZVR5cGUoZmllbGQsIHBheWxvYWQpO1xuICAgIGlmIChmaWVsZFNob3VsZEJlTG9jYWxpemVkKHtcbiAgICAgICAgZmllbGQsXG4gICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgfSkgJiYgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uKSB7XG4gICAgICAgIHNjaGVtYVRvUmV0dXJuID0ge1xuICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgIHR5cGU6IHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVDb2Rlcy5yZWR1Y2UoKGxvY2FsZXMsIGxvY2FsZSk9PntcbiAgICAgICAgICAgICAgICBsZXQgbG9jYWxlU2NoZW1hID0ge307XG4gICAgICAgICAgICAgICAgaWYgKGhhc01hbnlSZWxhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlU2NoZW1hID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuTWl4ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvblRvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW06IGZpZWxkLnJlbGF0aW9uVG9cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHZhbHVlVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZQYXRoOiBgJHtmaWVsZC5uYW1lfS4ke2xvY2FsZX0ucmVsYXRpb25Ub2BcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGVTY2hlbWEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdmFsdWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBmaWVsZC5yZWxhdGlvblRvXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmxvY2FsZXMsXG4gICAgICAgICAgICAgICAgICAgIFtsb2NhbGVdOiBmaWVsZC5oYXNNYW55ID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZVNjaGVtYVxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZvcm1hdERlZmF1bHRWYWx1ZShmaWVsZClcbiAgICAgICAgICAgICAgICAgICAgfSA6IGxvY2FsZVNjaGVtYVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgICBsb2NhbGl6ZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGhhc01hbnlSZWxhdGlvbnMpIHtcbiAgICAgICAgc2NoZW1hVG9SZXR1cm4gPSB7XG4gICAgICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5NaXhlZCxcbiAgICAgICAgICAgIHJlbGF0aW9uVG86IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgZW51bTogZmllbGQucmVsYXRpb25Ub1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogdmFsdWVUeXBlLFxuICAgICAgICAgICAgICAgIHJlZlBhdGg6IGAke2ZpZWxkLm5hbWV9LnJlbGF0aW9uVG9gXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaWVsZC5oYXNNYW55KSB7XG4gICAgICAgICAgICBzY2hlbWFUb1JldHVybiA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBbXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYVRvUmV0dXJuXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBmb3JtYXREZWZhdWx0VmFsdWUoZmllbGQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2NoZW1hVG9SZXR1cm4gPSB7XG4gICAgICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgdHlwZTogdmFsdWVUeXBlLFxuICAgICAgICAgICAgcmVmOiBmaWVsZC5yZWxhdGlvblRvXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaWVsZC5oYXNNYW55KSB7XG4gICAgICAgICAgICBzY2hlbWFUb1JldHVybiA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBbXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYVRvUmV0dXJuXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBmb3JtYXREZWZhdWx0VmFsdWUoZmllbGQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IHNjaGVtYVRvUmV0dXJuXG4gICAgfSk7XG59O1xuY29uc3QgZ2V0U2NoZW1hR2VuZXJhdG9yID0gKGZpZWxkVHlwZSk9PntcbiAgICBpZiAoZmllbGRUeXBlIGluIGZpZWxkVG9TY2hlbWFNYXApIHtcbiAgICAgICAgcmV0dXJuIGZpZWxkVG9TY2hlbWFNYXBbZmllbGRUeXBlXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuY29uc3QgZmllbGRUb1NjaGVtYU1hcCA9IHtcbiAgICBhcnJheSxcbiAgICBibG9ja3MsXG4gICAgY2hlY2tib3gsXG4gICAgY29kZSxcbiAgICBjb2xsYXBzaWJsZSxcbiAgICBkYXRlLFxuICAgIGVtYWlsLFxuICAgIGdyb3VwLFxuICAgIGpzb24sXG4gICAgbnVtYmVyLFxuICAgIHBvaW50LFxuICAgIHJhZGlvLFxuICAgIHJlbGF0aW9uc2hpcCxcbiAgICByaWNoVGV4dCxcbiAgICByb3csXG4gICAgc2VsZWN0LFxuICAgIHRhYnMsXG4gICAgdGV4dCxcbiAgICB0ZXh0YXJlYSxcbiAgICB1cGxvYWRcbn07XG5jb25zdCBnZXRSZWxhdGlvbnNoaXBWYWx1ZVR5cGUgPSAoZmllbGQsIHBheWxvYWQpPT57XG4gICAgaWYgKHR5cGVvZiBmaWVsZC5yZWxhdGlvblRvID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBjdXN0b21JRFR5cGUgPSBwYXlsb2FkLmNvbGxlY3Rpb25zW2ZpZWxkLnJlbGF0aW9uVG9dPy5jdXN0b21JRFR5cGU7XG4gICAgICAgIGlmICghY3VzdG9tSURUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXN0b21JRFR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk51bWJlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW9uZ29vc2UuU2NoZW1hLlR5cGVzLlN0cmluZztcbiAgICB9XG4gICAgLy8gaGFzIGN1c3RvbSBpZCByZWxhdGlvblRvXG4gICAgaWYgKGZpZWxkLnJlbGF0aW9uVG8uc29tZSgocmVsYXRpb25Ubyk9PntcbiAgICAgICAgcmV0dXJuICEhcGF5bG9hZC5jb2xsZWN0aW9uc1tyZWxhdGlvblRvXT8uY3VzdG9tSURUeXBlO1xuICAgIH0pKSB7XG4gICAgICAgIHJldHVybiBtb25nb29zZS5TY2hlbWEuVHlwZXMuTWl4ZWQ7XG4gICAgfVxuICAgIHJldHVybiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZFNjaGVtYS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildAndOrConditions.js":
/*!************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildAndOrConditions.js ***!
  \************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildAndOrConditions: () => (/* binding */ buildAndOrConditions)\n/* harmony export */ });\n/* harmony import */ var _parseParams_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parseParams.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js\");\n\nasync function buildAndOrConditions({ collectionSlug, fields, globalSlug, locale, parentIsLocalized, payload, where }) {\n    const completedConditions = [];\n    // Loop over all AND / OR operations and add them to the AND / OR query param\n    // Operations should come through as an array\n    for (const condition of where){\n        // If the operation is properly formatted as an object\n        if (typeof condition === 'object') {\n            const result = await (0,_parseParams_js__WEBPACK_IMPORTED_MODULE_0__.parseParams)({\n                collectionSlug,\n                fields,\n                globalSlug,\n                locale,\n                parentIsLocalized,\n                payload,\n                where: condition\n            });\n            if (Object.keys(result).length > 0) {\n                completedConditions.push(result);\n            }\n        }\n    }\n    return completedConditions;\n}\n\n//# sourceMappingURL=buildAndOrConditions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9idWlsZEFuZE9yQ29uZGl0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQztBQUN4QyxzQ0FBc0MsK0VBQStFO0FBQzVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw0REFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9idWlsZEFuZE9yQ29uZGl0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVBhcmFtcyB9IGZyb20gJy4vcGFyc2VQYXJhbXMuanMnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkQW5kT3JDb25kaXRpb25zKHsgY29sbGVjdGlvblNsdWcsIGZpZWxkcywgZ2xvYmFsU2x1ZywgbG9jYWxlLCBwYXJlbnRJc0xvY2FsaXplZCwgcGF5bG9hZCwgd2hlcmUgfSkge1xuICAgIGNvbnN0IGNvbXBsZXRlZENvbmRpdGlvbnMgPSBbXTtcbiAgICAvLyBMb29wIG92ZXIgYWxsIEFORCAvIE9SIG9wZXJhdGlvbnMgYW5kIGFkZCB0aGVtIHRvIHRoZSBBTkQgLyBPUiBxdWVyeSBwYXJhbVxuICAgIC8vIE9wZXJhdGlvbnMgc2hvdWxkIGNvbWUgdGhyb3VnaCBhcyBhbiBhcnJheVxuICAgIGZvciAoY29uc3QgY29uZGl0aW9uIG9mIHdoZXJlKXtcbiAgICAgICAgLy8gSWYgdGhlIG9wZXJhdGlvbiBpcyBwcm9wZXJseSBmb3JtYXR0ZWQgYXMgYW4gb2JqZWN0XG4gICAgICAgIGlmICh0eXBlb2YgY29uZGl0aW9uID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGFyc2VQYXJhbXMoe1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZCxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIHdoZXJlOiBjb25kaXRpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZENvbmRpdGlvbnMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb21wbGV0ZWRDb25kaXRpb25zO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZEFuZE9yQ29uZGl0aW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildAndOrConditions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js":
/*!**************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js ***!
  \**************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildQuery: () => (/* binding */ buildQuery)\n/* harmony export */ });\n/* harmony import */ var _parseParams_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parseParams.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js\");\n\nconst buildQuery = async ({ adapter, collectionSlug, fields, globalSlug, locale, where })=>{\n    const result = await (0,_parseParams_js__WEBPACK_IMPORTED_MODULE_0__.parseParams)({\n        collectionSlug,\n        fields,\n        globalSlug,\n        locale,\n        parentIsLocalized: false,\n        payload: adapter.payload,\n        where\n    });\n    return result;\n};\n\n//# sourceMappingURL=buildQuery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9idWlsZFF1ZXJ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStDO0FBQ3hDLDRCQUE0Qiw0REFBNEQ7QUFDL0YseUJBQXlCLDREQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVBhcmFtcyB9IGZyb20gJy4vcGFyc2VQYXJhbXMuanMnO1xuZXhwb3J0IGNvbnN0IGJ1aWxkUXVlcnkgPSBhc3luYyAoeyBhZGFwdGVyLCBjb2xsZWN0aW9uU2x1ZywgZmllbGRzLCBnbG9iYWxTbHVnLCBsb2NhbGUsIHdoZXJlIH0pPT57XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGFyc2VQYXJhbXMoe1xuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHBhcmVudElzTG9jYWxpemVkOiBmYWxzZSxcbiAgICAgICAgcGF5bG9hZDogYWRhcHRlci5wYXlsb2FkLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZFF1ZXJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSearchParams.js":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSearchParams.js ***!
  \*********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildSearchParam: () => (/* binding */ buildSearchParam)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/getLocalizedPaths.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/getFieldByPath.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/types/constants.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _operatorMap_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./operatorMap.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/operatorMap.js\");\n/* harmony import */ var _sanitizeQueryValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sanitizeQueryValue.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/sanitizeQueryValue.js\");\n\n\n\n\n\n\nconst subQueryOptions = {\n    lean: true\n};\n/**\n * Convert the Payload key / value / operator into a MongoDB query\n */ async function buildSearchParam({ collectionSlug, fields, globalSlug, incomingPath, locale, operator, parentIsLocalized, payload, val }) {\n    // Replace GraphQL nested field double underscore formatting\n    let sanitizedPath = incomingPath.replace(/__/g, '.');\n    if (sanitizedPath === 'id') {\n        sanitizedPath = '_id';\n    }\n    let paths = [];\n    let hasCustomID = false;\n    if (sanitizedPath === '_id') {\n        const customIDFieldType = collectionSlug ? payload.collections[collectionSlug]?.customIDType : undefined;\n        let idFieldType = 'text';\n        if (customIDFieldType) {\n            idFieldType = customIDFieldType;\n            hasCustomID = true;\n        }\n        paths.push({\n            collectionSlug,\n            complete: true,\n            field: {\n                name: 'id',\n                type: idFieldType\n            },\n            parentIsLocalized: parentIsLocalized ?? false,\n            path: '_id'\n        });\n    } else {\n        paths = (0,payload__WEBPACK_IMPORTED_MODULE_1__.getLocalizedPaths)({\n            collectionSlug,\n            fields,\n            globalSlug,\n            incomingPath: sanitizedPath,\n            locale,\n            parentIsLocalized,\n            payload\n        });\n    }\n    if (!paths[0]) {\n        return undefined;\n    }\n    const [{ field, path }] = paths;\n    if (path) {\n        const sanitizedQueryValue = (0,_sanitizeQueryValue_js__WEBPACK_IMPORTED_MODULE_2__.sanitizeQueryValue)({\n            field,\n            hasCustomID,\n            locale,\n            operator,\n            parentIsLocalized,\n            path,\n            payload,\n            val\n        });\n        if (!sanitizedQueryValue) {\n            return undefined;\n        }\n        const { operator: formattedOperator, rawQuery, val: formattedValue } = sanitizedQueryValue;\n        if (rawQuery) {\n            return {\n                value: rawQuery\n            };\n        }\n        if (!formattedOperator) {\n            return undefined;\n        }\n        // If there are multiple collections to search through,\n        // Recursively build up a list of query constraints\n        if (paths.length > 1) {\n            // Remove top collection and reverse array\n            // to work backwards from top\n            const pathsToQuery = paths.slice(1).reverse();\n            let relationshipQuery = {\n                value: {}\n            };\n            for (const [i, { collectionSlug, path: subPath }] of pathsToQuery.entries()){\n                if (!collectionSlug) {\n                    throw new payload__WEBPACK_IMPORTED_MODULE_3__.APIError(`Collection with the slug ${collectionSlug} was not found.`);\n                }\n                const { collectionConfig, Model: SubModel } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_4__.getCollection)({\n                    adapter: payload.db,\n                    collectionSlug\n                });\n                if (i === 0) {\n                    const subQuery = await SubModel.buildQuery({\n                        locale,\n                        payload,\n                        where: {\n                            [subPath]: {\n                                [formattedOperator]: val\n                            }\n                        }\n                    });\n                    const field = paths[0].field;\n                    const select = {\n                        _id: true\n                    };\n                    let joinPath = null;\n                    if (field.type === 'join') {\n                        const relationshipField = (0,payload__WEBPACK_IMPORTED_MODULE_5__.getFieldByPath)({\n                            fields: collectionConfig.flattenedFields,\n                            path: field.on\n                        });\n                        if (!relationshipField) {\n                            throw new payload__WEBPACK_IMPORTED_MODULE_3__.APIError('Relationship field was not found');\n                        }\n                        let path = relationshipField.localizedPath;\n                        if (relationshipField.pathHasLocalized && payload.config.localization) {\n                            path = path.replace('<locale>', locale || payload.config.localization.defaultLocale);\n                        }\n                        select[path] = true;\n                        joinPath = path;\n                    }\n                    if (joinPath) {\n                        select[joinPath] = true;\n                    }\n                    const result = await SubModel.find(subQuery).lean().select(select);\n                    const $in = [];\n                    result.forEach((doc)=>{\n                        if (joinPath) {\n                            let ref = doc;\n                            for (const segment of joinPath.split('.')){\n                                if (typeof ref === 'object' && ref) {\n                                    ref = ref[segment];\n                                }\n                            }\n                            if (Array.isArray(ref)) {\n                                for (const item of ref){\n                                    if (item instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n                                        $in.push(item);\n                                    }\n                                }\n                            } else if (ref instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n                                $in.push(ref);\n                            }\n                        } else {\n                            const stringID = doc._id.toString();\n                            $in.push(stringID);\n                            if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(stringID)) {\n                                $in.push(doc._id);\n                            }\n                        }\n                    });\n                    if (pathsToQuery.length === 1) {\n                        return {\n                            path: joinPath ? '_id' : path,\n                            value: {\n                                $in\n                            }\n                        };\n                    }\n                    const nextSubPath = pathsToQuery[i + 1]?.path;\n                    if (nextSubPath) {\n                        relationshipQuery = {\n                            value: {\n                                [nextSubPath]: $in\n                            }\n                        };\n                    }\n                    continue;\n                }\n                const subQuery = relationshipQuery.value;\n                const result = await SubModel.find(subQuery, subQueryOptions);\n                const $in = result.map((doc)=>doc._id);\n                // If it is the last recursion\n                // then pass through the search param\n                if (i + 1 === pathsToQuery.length) {\n                    relationshipQuery = {\n                        path,\n                        value: {\n                            $in\n                        }\n                    };\n                } else {\n                    const nextSubPath = pathsToQuery[i + 1]?.path;\n                    if (nextSubPath) {\n                        relationshipQuery = {\n                            value: {\n                                [nextSubPath]: {\n                                    $in\n                                }\n                            }\n                        };\n                    }\n                }\n            }\n            return relationshipQuery;\n        }\n        if (formattedOperator && payload_shared__WEBPACK_IMPORTED_MODULE_6__.validOperatorSet.has(formattedOperator)) {\n            const operatorKey = _operatorMap_js__WEBPACK_IMPORTED_MODULE_7__.operatorMap[formattedOperator];\n            if (field.type === 'relationship' || field.type === 'upload') {\n                let hasNumberIDRelation;\n                let multiIDCondition = '$or';\n                if (operatorKey === '$ne') {\n                    multiIDCondition = '$and';\n                }\n                const result = {\n                    value: {\n                        [multiIDCondition]: [\n                            {\n                                [path]: {\n                                    [operatorKey]: formattedValue\n                                }\n                            }\n                        ]\n                    }\n                };\n                if (typeof formattedValue === 'string') {\n                    if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(formattedValue)) {\n                        result.value[multiIDCondition]?.push({\n                            [path]: {\n                                [operatorKey]: new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(formattedValue)\n                            }\n                        });\n                    } else {\n                        ;\n                        (Array.isArray(field.relationTo) ? field.relationTo : [\n                            field.relationTo\n                        ]).forEach((relationTo)=>{\n                            const isRelatedToCustomNumberID = payload.collections[relationTo]?.customIDType === 'number';\n                            if (isRelatedToCustomNumberID) {\n                                hasNumberIDRelation = true;\n                            }\n                        });\n                        if (hasNumberIDRelation) {\n                            result.value[multiIDCondition]?.push({\n                                [path]: {\n                                    [operatorKey]: parseFloat(formattedValue)\n                                }\n                            });\n                        }\n                    }\n                }\n                const length = result.value[multiIDCondition]?.length;\n                if (typeof length === 'number' && length > 1) {\n                    return result;\n                }\n            }\n            if (formattedOperator === 'like' && typeof formattedValue === 'string') {\n                const words = formattedValue.split(' ');\n                const result = {\n                    value: {\n                        $and: words.map((word)=>({\n                                [path]: {\n                                    $options: 'i',\n                                    $regex: word.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n                                }\n                            }))\n                    }\n                };\n                return result;\n            }\n            if (formattedOperator === 'not_like' && typeof formattedValue === 'string') {\n                const words = formattedValue.split(' ');\n                const result = {\n                    value: {\n                        $and: words.map((word)=>({\n                                [path]: {\n                                    $not: {\n                                        $options: 'i',\n                                        $regex: word.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n                                    }\n                                }\n                            }))\n                    }\n                };\n                return result;\n            }\n            // Some operators like 'near' need to define a full query\n            // so if there is no operator key, just return the value\n            if (!operatorKey) {\n                return {\n                    path,\n                    value: formattedValue\n                };\n            }\n            return {\n                path,\n                value: {\n                    [operatorKey]: formattedValue\n                }\n            };\n        }\n    }\n    return undefined;\n}\n\n//# sourceMappingURL=buildSearchParams.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9idWlsZFNlYXJjaFBhcmFtcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBaUM7QUFDcUM7QUFDcEI7QUFDUTtBQUNYO0FBQ2M7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQVcsa0NBQWtDLHFHQUFxRztBQUNsSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsTUFBTTtBQUNOLGdCQUFnQiwwREFBaUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGFBQWE7QUFDMUI7QUFDQSxvQ0FBb0MsMEVBQWtCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDZEQUE2RDtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLCtCQUErQjtBQUM1RDtBQUNBLDhCQUE4Qiw2Q0FBUSw2QkFBNkIsZ0JBQWdCO0FBQ25GO0FBQ0Esd0JBQXdCLG9DQUFvQyxFQUFFLHNFQUFhO0FBQzNFO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx1REFBYztBQUNoRTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0Esc0NBQXNDLDZDQUFRO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsMkNBQUs7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHdCQUF3QiwyQ0FBSztBQUMzRDtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxnQ0FBZ0MsMkNBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDREQUFnQjtBQUNqRCxnQ0FBZ0Msd0RBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJDQUFLO0FBQzdCO0FBQ0E7QUFDQSxtREFBbUQsMkNBQUs7QUFDeEQ7QUFDQSx5QkFBeUI7QUFDekIsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkU7QUFDM0U7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFO0FBQy9FO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3F1ZXJpZXMvYnVpbGRTZWFyY2hQYXJhbXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHlwZXMgfSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgeyBBUElFcnJvciwgZ2V0RmllbGRCeVBhdGgsIGdldExvY2FsaXplZFBhdGhzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyB2YWxpZE9wZXJhdG9yU2V0IH0gZnJvbSAncGF5bG9hZC9zaGFyZWQnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4uL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgb3BlcmF0b3JNYXAgfSBmcm9tICcuL29wZXJhdG9yTWFwLmpzJztcbmltcG9ydCB7IHNhbml0aXplUXVlcnlWYWx1ZSB9IGZyb20gJy4vc2FuaXRpemVRdWVyeVZhbHVlLmpzJztcbmNvbnN0IHN1YlF1ZXJ5T3B0aW9ucyA9IHtcbiAgICBsZWFuOiB0cnVlXG59O1xuLyoqXG4gKiBDb252ZXJ0IHRoZSBQYXlsb2FkIGtleSAvIHZhbHVlIC8gb3BlcmF0b3IgaW50byBhIE1vbmdvREIgcXVlcnlcbiAqLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGRTZWFyY2hQYXJhbSh7IGNvbGxlY3Rpb25TbHVnLCBmaWVsZHMsIGdsb2JhbFNsdWcsIGluY29taW5nUGF0aCwgbG9jYWxlLCBvcGVyYXRvciwgcGFyZW50SXNMb2NhbGl6ZWQsIHBheWxvYWQsIHZhbCB9KSB7XG4gICAgLy8gUmVwbGFjZSBHcmFwaFFMIG5lc3RlZCBmaWVsZCBkb3VibGUgdW5kZXJzY29yZSBmb3JtYXR0aW5nXG4gICAgbGV0IHNhbml0aXplZFBhdGggPSBpbmNvbWluZ1BhdGgucmVwbGFjZSgvX18vZywgJy4nKTtcbiAgICBpZiAoc2FuaXRpemVkUGF0aCA9PT0gJ2lkJykge1xuICAgICAgICBzYW5pdGl6ZWRQYXRoID0gJ19pZCc7XG4gICAgfVxuICAgIGxldCBwYXRocyA9IFtdO1xuICAgIGxldCBoYXNDdXN0b21JRCA9IGZhbHNlO1xuICAgIGlmIChzYW5pdGl6ZWRQYXRoID09PSAnX2lkJykge1xuICAgICAgICBjb25zdCBjdXN0b21JREZpZWxkVHlwZSA9IGNvbGxlY3Rpb25TbHVnID8gcGF5bG9hZC5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uU2x1Z10/LmN1c3RvbUlEVHlwZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGlkRmllbGRUeXBlID0gJ3RleHQnO1xuICAgICAgICBpZiAoY3VzdG9tSURGaWVsZFR5cGUpIHtcbiAgICAgICAgICAgIGlkRmllbGRUeXBlID0gY3VzdG9tSURGaWVsZFR5cGU7XG4gICAgICAgICAgICBoYXNDdXN0b21JRCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcGF0aHMucHVzaCh7XG4gICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiB0cnVlLFxuICAgICAgICAgICAgZmllbGQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnaWQnLFxuICAgICAgICAgICAgICAgIHR5cGU6IGlkRmllbGRUeXBlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IHBhcmVudElzTG9jYWxpemVkID8/IGZhbHNlLFxuICAgICAgICAgICAgcGF0aDogJ19pZCdcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcGF0aHMgPSBnZXRMb2NhbGl6ZWRQYXRocyh7XG4gICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgICAgICBpbmNvbWluZ1BhdGg6IHNhbml0aXplZFBhdGgsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZCxcbiAgICAgICAgICAgIHBheWxvYWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghcGF0aHNbMF0pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgW3sgZmllbGQsIHBhdGggfV0gPSBwYXRocztcbiAgICBpZiAocGF0aCkge1xuICAgICAgICBjb25zdCBzYW5pdGl6ZWRRdWVyeVZhbHVlID0gc2FuaXRpemVRdWVyeVZhbHVlKHtcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgaGFzQ3VzdG9tSUQsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBvcGVyYXRvcixcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkLFxuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICB2YWxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghc2FuaXRpemVkUXVlcnlWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG9wZXJhdG9yOiBmb3JtYXR0ZWRPcGVyYXRvciwgcmF3UXVlcnksIHZhbDogZm9ybWF0dGVkVmFsdWUgfSA9IHNhbml0aXplZFF1ZXJ5VmFsdWU7XG4gICAgICAgIGlmIChyYXdRdWVyeSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmF3UXVlcnlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmb3JtYXR0ZWRPcGVyYXRvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgY29sbGVjdGlvbnMgdG8gc2VhcmNoIHRocm91Z2gsXG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGJ1aWxkIHVwIGEgbGlzdCBvZiBxdWVyeSBjb25zdHJhaW50c1xuICAgICAgICBpZiAocGF0aHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRvcCBjb2xsZWN0aW9uIGFuZCByZXZlcnNlIGFycmF5XG4gICAgICAgICAgICAvLyB0byB3b3JrIGJhY2t3YXJkcyBmcm9tIHRvcFxuICAgICAgICAgICAgY29uc3QgcGF0aHNUb1F1ZXJ5ID0gcGF0aHMuc2xpY2UoMSkucmV2ZXJzZSgpO1xuICAgICAgICAgICAgbGV0IHJlbGF0aW9uc2hpcFF1ZXJ5ID0ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2ksIHsgY29sbGVjdGlvblNsdWcsIHBhdGg6IHN1YlBhdGggfV0gb2YgcGF0aHNUb1F1ZXJ5LmVudHJpZXMoKSl7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xsZWN0aW9uU2x1Zykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYENvbGxlY3Rpb24gd2l0aCB0aGUgc2x1ZyAke2NvbGxlY3Rpb25TbHVnfSB3YXMgbm90IGZvdW5kLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsOiBTdWJNb2RlbCB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIGFkYXB0ZXI6IHBheWxvYWQuZGIsXG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25TbHVnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViUXVlcnkgPSBhd2FpdCBTdWJNb2RlbC5idWlsZFF1ZXJ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzdWJQYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZm9ybWF0dGVkT3BlcmF0b3JdOiB2YWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IHBhdGhzWzBdLmZpZWxkO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3QgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGpvaW5QYXRoID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdqb2luJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpb25zaGlwRmllbGQgPSBnZXRGaWVsZEJ5UGF0aCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmaWVsZC5vblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlbGF0aW9uc2hpcEZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKCdSZWxhdGlvbnNoaXAgZmllbGQgd2FzIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGggPSByZWxhdGlvbnNoaXBGaWVsZC5sb2NhbGl6ZWRQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbGF0aW9uc2hpcEZpZWxkLnBhdGhIYXNMb2NhbGl6ZWQgJiYgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgnPGxvY2FsZT4nLCBsb2NhbGUgfHwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLmRlZmF1bHRMb2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0W3BhdGhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvaW5QYXRoID0gcGF0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoam9pblBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdFtqb2luUGF0aF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFN1Yk1vZGVsLmZpbmQoc3ViUXVlcnkpLmxlYW4oKS5zZWxlY3Qoc2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgJGluID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKChkb2MpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoam9pblBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVmID0gZG9jO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBqb2luUGF0aC5zcGxpdCgnLicpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWYgPT09ICdvYmplY3QnICYmIHJlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmID0gcmVmW3NlZ21lbnRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlZil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFR5cGVzLk9iamVjdElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGluLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlZiBpbnN0YW5jZW9mIFR5cGVzLk9iamVjdElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbi5wdXNoKHJlZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdJRCA9IGRvYy5faWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW4ucHVzaChzdHJpbmdJRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGVzLk9iamVjdElkLmlzVmFsaWQoc3RyaW5nSUQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbi5wdXNoKGRvYy5faWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXRoc1RvUXVlcnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGpvaW5QYXRoID8gJ19pZCcgOiBwYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFN1YlBhdGggPSBwYXRoc1RvUXVlcnlbaSArIDFdPy5wYXRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFN1YlBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcFF1ZXJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuZXh0U3ViUGF0aF06ICRpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YlF1ZXJ5ID0gcmVsYXRpb25zaGlwUXVlcnkudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgU3ViTW9kZWwuZmluZChzdWJRdWVyeSwgc3ViUXVlcnlPcHRpb25zKTtcbiAgICAgICAgICAgICAgICBjb25zdCAkaW4gPSByZXN1bHQubWFwKChkb2MpPT5kb2MuX2lkKTtcbiAgICAgICAgICAgICAgICAvLyBJZiBpdCBpcyB0aGUgbGFzdCByZWN1cnNpb25cbiAgICAgICAgICAgICAgICAvLyB0aGVuIHBhc3MgdGhyb3VnaCB0aGUgc2VhcmNoIHBhcmFtXG4gICAgICAgICAgICAgICAgaWYgKGkgKyAxID09PSBwYXRoc1RvUXVlcnkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcFF1ZXJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGluXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFN1YlBhdGggPSBwYXRoc1RvUXVlcnlbaSArIDFdPy5wYXRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFN1YlBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uc2hpcFF1ZXJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuZXh0U3ViUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWxhdGlvbnNoaXBRdWVyeTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0dGVkT3BlcmF0b3IgJiYgdmFsaWRPcGVyYXRvclNldC5oYXMoZm9ybWF0dGVkT3BlcmF0b3IpKSB7XG4gICAgICAgICAgICBjb25zdCBvcGVyYXRvcktleSA9IG9wZXJhdG9yTWFwW2Zvcm1hdHRlZE9wZXJhdG9yXTtcbiAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAncmVsYXRpb25zaGlwJyB8fCBmaWVsZC50eXBlID09PSAndXBsb2FkJykge1xuICAgICAgICAgICAgICAgIGxldCBoYXNOdW1iZXJJRFJlbGF0aW9uO1xuICAgICAgICAgICAgICAgIGxldCBtdWx0aUlEQ29uZGl0aW9uID0gJyRvcic7XG4gICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9yS2V5ID09PSAnJG5lJykge1xuICAgICAgICAgICAgICAgICAgICBtdWx0aUlEQ29uZGl0aW9uID0gJyRhbmQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbbXVsdGlJRENvbmRpdGlvbl06IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW29wZXJhdG9yS2V5XTogZm9ybWF0dGVkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXR0ZWRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGVzLk9iamVjdElkLmlzVmFsaWQoZm9ybWF0dGVkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudmFsdWVbbXVsdGlJRENvbmRpdGlvbl0/LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbb3BlcmF0b3JLZXldOiBuZXcgVHlwZXMuT2JqZWN0SWQoZm9ybWF0dGVkVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheShmaWVsZC5yZWxhdGlvblRvKSA/IGZpZWxkLnJlbGF0aW9uVG8gOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQucmVsYXRpb25Ub1xuICAgICAgICAgICAgICAgICAgICAgICAgXSkuZm9yRWFjaCgocmVsYXRpb25Ubyk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1JlbGF0ZWRUb0N1c3RvbU51bWJlcklEID0gcGF5bG9hZC5jb2xsZWN0aW9uc1tyZWxhdGlvblRvXT8uY3VzdG9tSURUeXBlID09PSAnbnVtYmVyJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWxhdGVkVG9DdXN0b21OdW1iZXJJRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNOdW1iZXJJRFJlbGF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNOdW1iZXJJRFJlbGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnZhbHVlW211bHRpSURDb25kaXRpb25dPy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbb3BlcmF0b3JLZXldOiBwYXJzZUZsb2F0KGZvcm1hdHRlZFZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gcmVzdWx0LnZhbHVlW211bHRpSURDb25kaXRpb25dPy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInICYmIGxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybWF0dGVkT3BlcmF0b3IgPT09ICdsaWtlJyAmJiB0eXBlb2YgZm9ybWF0dGVkVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZHMgPSBmb3JtYXR0ZWRWYWx1ZS5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhbmQ6IHdvcmRzLm1hcCgod29yZCk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG9wdGlvbnM6ICdpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWdleDogd29yZC5yZXBsYWNlKC9bXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3JtYXR0ZWRPcGVyYXRvciA9PT0gJ25vdF9saWtlJyAmJiB0eXBlb2YgZm9ybWF0dGVkVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZHMgPSBmb3JtYXR0ZWRWYWx1ZS5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhbmQ6IHdvcmRzLm1hcCgod29yZCk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG5vdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvcHRpb25zOiAnaScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlZ2V4OiB3b3JkLnJlcGxhY2UoL1tcXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU29tZSBvcGVyYXRvcnMgbGlrZSAnbmVhcicgbmVlZCB0byBkZWZpbmUgYSBmdWxsIHF1ZXJ5XG4gICAgICAgICAgICAvLyBzbyBpZiB0aGVyZSBpcyBubyBvcGVyYXRvciBrZXksIGp1c3QgcmV0dXJuIHRoZSB2YWx1ZVxuICAgICAgICAgICAgaWYgKCFvcGVyYXRvcktleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmb3JtYXR0ZWRWYWx1ZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgW29wZXJhdG9yS2V5XTogZm9ybWF0dGVkVmFsdWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1aWxkU2VhcmNoUGFyYW1zLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSearchParams.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js ***!
  \******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildSortParam: () => (/* binding */ buildSortParam)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/getFieldByPath.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _getLocalizedSortProperty_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getLocalizedSortProperty.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getLocalizedSortProperty.js\");\n\n\n\nconst relationshipSort = ({ adapter, fields, locale, path, sort, sortAggregation, sortDirection, versions })=>{\n    let currentFields = fields;\n    const segments = path.split('.');\n    if (segments.length < 2) {\n        return false;\n    }\n    for(let i = 0; i < segments.length; i++){\n        const segment = segments[i];\n        const field = currentFields.find((each)=>each.name === segment);\n        if (!field) {\n            return false;\n        }\n        if ('fields' in field) {\n            currentFields = field.flattenedFields;\n            if (field.name === 'version' && versions && i === 0) {\n                segments.shift();\n                i--;\n            }\n        } else if ((field.type === 'relationship' || field.type === 'upload') && i !== segments.length - 1) {\n            const relationshipPath = segments.slice(0, i + 1).join('.');\n            let sortFieldPath = segments.slice(i + 1, segments.length).join('.');\n            if (Array.isArray(field.relationTo)) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('Not supported');\n            }\n            const foreignCollection = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n                adapter,\n                collectionSlug: field.relationTo\n            });\n            const foreignFieldPath = (0,payload__WEBPACK_IMPORTED_MODULE_2__.getFieldByPath)({\n                fields: foreignCollection.collectionConfig.flattenedFields,\n                path: sortFieldPath\n            });\n            if (!foreignFieldPath) {\n                return false;\n            }\n            if (foreignFieldPath.pathHasLocalized && locale) {\n                sortFieldPath = foreignFieldPath.localizedPath.replace('<locale>', locale);\n            }\n            if (!sortAggregation.some((each)=>{\n                return '$lookup' in each && each.$lookup.as === `__${path}`;\n            })) {\n                sortAggregation.push({\n                    $lookup: {\n                        as: `__${path}`,\n                        foreignField: '_id',\n                        from: foreignCollection.Model.collection.name,\n                        localField: versions ? `version.${relationshipPath}` : relationshipPath,\n                        pipeline: [\n                            {\n                                $project: {\n                                    [sortFieldPath]: true\n                                }\n                            }\n                        ]\n                    }\n                });\n                sort[`__${path}.${sortFieldPath}`] = sortDirection;\n                return true;\n            }\n        }\n    }\n    return false;\n};\nconst buildSortParam = ({ adapter, config, fields, locale, parentIsLocalized = false, sort, sortAggregation, timestamps, versions })=>{\n    if (!sort) {\n        if (timestamps) {\n            sort = '-createdAt';\n        } else {\n            sort = '-id';\n        }\n    }\n    if (typeof sort === 'string') {\n        sort = [\n            sort\n        ];\n    }\n    // In the case of Mongo, when sorting by a field that is not unique, the results are not guaranteed to be in the same order each time.\n    // So we add a fallback sort to ensure that the results are always in the same order.\n    let fallbackSort = '-id';\n    if (timestamps) {\n        fallbackSort = '-createdAt';\n    }\n    if (!(sort.includes(fallbackSort) || sort.includes(fallbackSort.replace('-', '')))) {\n        sort.push(fallbackSort);\n    }\n    const sorting = sort.reduce((acc, item)=>{\n        let sortProperty;\n        let sortDirection;\n        if (item.indexOf('-') === 0) {\n            sortProperty = item.substring(1);\n            sortDirection = 'desc';\n        } else {\n            sortProperty = item;\n            sortDirection = 'asc';\n        }\n        if (sortProperty === 'id') {\n            acc['_id'] = sortDirection;\n            return acc;\n        }\n        if (sortAggregation && relationshipSort({\n            adapter,\n            fields,\n            locale,\n            path: sortProperty,\n            sort: acc,\n            sortAggregation,\n            sortDirection,\n            versions\n        })) {\n            return acc;\n        }\n        const localizedProperty = (0,_getLocalizedSortProperty_js__WEBPACK_IMPORTED_MODULE_3__.getLocalizedSortProperty)({\n            config,\n            fields,\n            locale,\n            parentIsLocalized,\n            segments: sortProperty.split('.')\n        });\n        acc[localizedProperty] = sortDirection;\n        return acc;\n    }, {});\n    return sorting;\n};\n\n//# sourceMappingURL=buildSortParam.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9idWlsZFNvcnRQYXJhbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtRDtBQUNPO0FBQ2U7QUFDekUsNEJBQTRCLCtFQUErRTtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2Q0FBUTtBQUNsQztBQUNBLHNDQUFzQyxzRUFBYTtBQUNuRDtBQUNBO0FBQ0EsYUFBYTtBQUNiLHFDQUFxQyx1REFBYztBQUNuRDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLEtBQUs7QUFDMUUsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQ0FBaUMsS0FBSztBQUN0QztBQUNBO0FBQ0EsMERBQTBELGlCQUFpQjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLDBCQUEwQixLQUFLLEdBQUcsY0FBYztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTywwQkFBMEIseUdBQXlHO0FBQzFJO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxrQ0FBa0Msc0ZBQXdCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3F1ZXJpZXMvYnVpbGRTb3J0UGFyYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJRXJyb3IsIGdldEZpZWxkQnlQYXRoIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBnZXRDb2xsZWN0aW9uIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRMb2NhbGl6ZWRTb3J0UHJvcGVydHkgfSBmcm9tICcuL2dldExvY2FsaXplZFNvcnRQcm9wZXJ0eS5qcyc7XG5jb25zdCByZWxhdGlvbnNoaXBTb3J0ID0gKHsgYWRhcHRlciwgZmllbGRzLCBsb2NhbGUsIHBhdGgsIHNvcnQsIHNvcnRBZ2dyZWdhdGlvbiwgc29ydERpcmVjdGlvbiwgdmVyc2lvbnMgfSk9PntcbiAgICBsZXQgY3VycmVudEZpZWxkcyA9IGZpZWxkcztcbiAgICBjb25zdCBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKTtcbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGNvbnN0IHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcbiAgICAgICAgY29uc3QgZmllbGQgPSBjdXJyZW50RmllbGRzLmZpbmQoKGVhY2gpPT5lYWNoLm5hbWUgPT09IHNlZ21lbnQpO1xuICAgICAgICBpZiAoIWZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdmaWVsZHMnIGluIGZpZWxkKSB7XG4gICAgICAgICAgICBjdXJyZW50RmllbGRzID0gZmllbGQuZmxhdHRlbmVkRmllbGRzO1xuICAgICAgICAgICAgaWYgKGZpZWxkLm5hbWUgPT09ICd2ZXJzaW9uJyAmJiB2ZXJzaW9ucyAmJiBpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc2VnbWVudHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoKGZpZWxkLnR5cGUgPT09ICdyZWxhdGlvbnNoaXAnIHx8IGZpZWxkLnR5cGUgPT09ICd1cGxvYWQnKSAmJiBpICE9PSBzZWdtZW50cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBjb25zdCByZWxhdGlvbnNoaXBQYXRoID0gc2VnbWVudHMuc2xpY2UoMCwgaSArIDEpLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIGxldCBzb3J0RmllbGRQYXRoID0gc2VnbWVudHMuc2xpY2UoaSArIDEsIHNlZ21lbnRzLmxlbmd0aCkuam9pbignLicpO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZmllbGQucmVsYXRpb25UbykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoJ05vdCBzdXBwb3J0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZvcmVpZ25Db2xsZWN0aW9uID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZzogZmllbGQucmVsYXRpb25Ub1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBmb3JlaWduRmllbGRQYXRoID0gZ2V0RmllbGRCeVBhdGgoe1xuICAgICAgICAgICAgICAgIGZpZWxkczogZm9yZWlnbkNvbGxlY3Rpb24uY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICAgICAgcGF0aDogc29ydEZpZWxkUGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWZvcmVpZ25GaWVsZFBhdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9yZWlnbkZpZWxkUGF0aC5wYXRoSGFzTG9jYWxpemVkICYmIGxvY2FsZSkge1xuICAgICAgICAgICAgICAgIHNvcnRGaWVsZFBhdGggPSBmb3JlaWduRmllbGRQYXRoLmxvY2FsaXplZFBhdGgucmVwbGFjZSgnPGxvY2FsZT4nLCBsb2NhbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzb3J0QWdncmVnYXRpb24uc29tZSgoZWFjaCk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gJyRsb29rdXAnIGluIGVhY2ggJiYgZWFjaC4kbG9va3VwLmFzID09PSBgX18ke3BhdGh9YDtcbiAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgc29ydEFnZ3JlZ2F0aW9uLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhczogYF9fJHtwYXRofWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlaWduRmllbGQ6ICdfaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogZm9yZWlnbkNvbGxlY3Rpb24uTW9kZWwuY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxGaWVsZDogdmVyc2lvbnMgPyBgdmVyc2lvbi4ke3JlbGF0aW9uc2hpcFBhdGh9YCA6IHJlbGF0aW9uc2hpcFBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzb3J0RmllbGRQYXRoXTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc29ydFtgX18ke3BhdGh9LiR7c29ydEZpZWxkUGF0aH1gXSA9IHNvcnREaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmV4cG9ydCBjb25zdCBidWlsZFNvcnRQYXJhbSA9ICh7IGFkYXB0ZXIsIGNvbmZpZywgZmllbGRzLCBsb2NhbGUsIHBhcmVudElzTG9jYWxpemVkID0gZmFsc2UsIHNvcnQsIHNvcnRBZ2dyZWdhdGlvbiwgdGltZXN0YW1wcywgdmVyc2lvbnMgfSk9PntcbiAgICBpZiAoIXNvcnQpIHtcbiAgICAgICAgaWYgKHRpbWVzdGFtcHMpIHtcbiAgICAgICAgICAgIHNvcnQgPSAnLWNyZWF0ZWRBdCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzb3J0ID0gJy1pZCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzb3J0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBzb3J0ID0gW1xuICAgICAgICAgICAgc29ydFxuICAgICAgICBdO1xuICAgIH1cbiAgICAvLyBJbiB0aGUgY2FzZSBvZiBNb25nbywgd2hlbiBzb3J0aW5nIGJ5IGEgZmllbGQgdGhhdCBpcyBub3QgdW5pcXVlLCB0aGUgcmVzdWx0cyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgZWFjaCB0aW1lLlxuICAgIC8vIFNvIHdlIGFkZCBhIGZhbGxiYWNrIHNvcnQgdG8gZW5zdXJlIHRoYXQgdGhlIHJlc3VsdHMgYXJlIGFsd2F5cyBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICBsZXQgZmFsbGJhY2tTb3J0ID0gJy1pZCc7XG4gICAgaWYgKHRpbWVzdGFtcHMpIHtcbiAgICAgICAgZmFsbGJhY2tTb3J0ID0gJy1jcmVhdGVkQXQnO1xuICAgIH1cbiAgICBpZiAoIShzb3J0LmluY2x1ZGVzKGZhbGxiYWNrU29ydCkgfHwgc29ydC5pbmNsdWRlcyhmYWxsYmFja1NvcnQucmVwbGFjZSgnLScsICcnKSkpKSB7XG4gICAgICAgIHNvcnQucHVzaChmYWxsYmFja1NvcnQpO1xuICAgIH1cbiAgICBjb25zdCBzb3J0aW5nID0gc29ydC5yZWR1Y2UoKGFjYywgaXRlbSk9PntcbiAgICAgICAgbGV0IHNvcnRQcm9wZXJ0eTtcbiAgICAgICAgbGV0IHNvcnREaXJlY3Rpb247XG4gICAgICAgIGlmIChpdGVtLmluZGV4T2YoJy0nKSA9PT0gMCkge1xuICAgICAgICAgICAgc29ydFByb3BlcnR5ID0gaXRlbS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICBzb3J0RGlyZWN0aW9uID0gJ2Rlc2MnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc29ydFByb3BlcnR5ID0gaXRlbTtcbiAgICAgICAgICAgIHNvcnREaXJlY3Rpb24gPSAnYXNjJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc29ydFByb3BlcnR5ID09PSAnaWQnKSB7XG4gICAgICAgICAgICBhY2NbJ19pZCddID0gc29ydERpcmVjdGlvbjtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnRBZ2dyZWdhdGlvbiAmJiByZWxhdGlvbnNoaXBTb3J0KHtcbiAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBwYXRoOiBzb3J0UHJvcGVydHksXG4gICAgICAgICAgICBzb3J0OiBhY2MsXG4gICAgICAgICAgICBzb3J0QWdncmVnYXRpb24sXG4gICAgICAgICAgICBzb3J0RGlyZWN0aW9uLFxuICAgICAgICAgICAgdmVyc2lvbnNcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxpemVkUHJvcGVydHkgPSBnZXRMb2NhbGl6ZWRTb3J0UHJvcGVydHkoe1xuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgICAgICBzZWdtZW50czogc29ydFByb3BlcnR5LnNwbGl0KCcuJylcbiAgICAgICAgfSk7XG4gICAgICAgIGFjY1tsb2NhbGl6ZWRQcm9wZXJ0eV0gPSBzb3J0RGlyZWN0aW9uO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbiAgICByZXR1cm4gc29ydGluZztcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1aWxkU29ydFBhcmFtLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js":
/*!***********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js ***!
  \***********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBuildQueryPlugin: () => (/* binding */ getBuildQueryPlugin)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var _parseParams_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parseParams.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js\");\n\n\n// This plugin asynchronously builds a list of Mongoose query constraints\n// which can then be used in subsequent Mongoose queries.\n// Deprecated in favor of using simpler buildQuery directly\nconst getBuildQueryPlugin = ({ collectionSlug, versionsFields } = {})=>{\n    return function buildQueryPlugin(schema) {\n        const modifiedSchema = schema;\n        async function schemaBuildQuery({ globalSlug, locale, payload, where }) {\n            let fields = null;\n            if (versionsFields) {\n                fields = versionsFields;\n            } else {\n                if (globalSlug) {\n                    const globalConfig = payload.globals.config.find(({ slug })=>slug === globalSlug);\n                    if (!globalConfig) {\n                        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Global with the slug ${globalSlug} was not found`);\n                    }\n                    fields = globalConfig.flattenedFields;\n                }\n                if (collectionSlug) {\n                    const collectionConfig = payload.collections[collectionSlug]?.config;\n                    if (!collectionConfig) {\n                        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Collection with the slug ${globalSlug} was not found`);\n                    }\n                    fields = collectionConfig.flattenedFields;\n                }\n            }\n            if (fields === null) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('Fields are not initialized.');\n            }\n            const result = await (0,_parseParams_js__WEBPACK_IMPORTED_MODULE_1__.parseParams)({\n                collectionSlug,\n                fields,\n                globalSlug,\n                locale,\n                parentIsLocalized: false,\n                payload,\n                where\n            });\n            return result;\n        }\n        modifiedSchema.statics.buildQuery = schemaBuildQuery;\n    };\n};\n\n//# sourceMappingURL=getBuildQueryPlugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9nZXRCdWlsZFF1ZXJ5UGx1Z2luLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtQztBQUNZO0FBQy9DO0FBQ0E7QUFDQTtBQUNPLCtCQUErQixpQ0FBaUMsSUFBSTtBQUMzRTtBQUNBO0FBQ0EsMENBQTBDLG9DQUFvQztBQUM5RTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSx3RUFBd0UsTUFBTTtBQUM5RTtBQUNBLGtDQUFrQyw2Q0FBUSx5QkFBeUIsWUFBWTtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNkNBQVEsNkJBQTZCLFlBQVk7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2Q0FBUTtBQUNsQztBQUNBLGlDQUFpQyw0REFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2dldEJ1aWxkUXVlcnlQbHVnaW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IHBhcnNlUGFyYW1zIH0gZnJvbSAnLi9wYXJzZVBhcmFtcy5qcyc7XG4vLyBUaGlzIHBsdWdpbiBhc3luY2hyb25vdXNseSBidWlsZHMgYSBsaXN0IG9mIE1vbmdvb3NlIHF1ZXJ5IGNvbnN0cmFpbnRzXG4vLyB3aGljaCBjYW4gdGhlbiBiZSB1c2VkIGluIHN1YnNlcXVlbnQgTW9uZ29vc2UgcXVlcmllcy5cbi8vIERlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgdXNpbmcgc2ltcGxlciBidWlsZFF1ZXJ5IGRpcmVjdGx5XG5leHBvcnQgY29uc3QgZ2V0QnVpbGRRdWVyeVBsdWdpbiA9ICh7IGNvbGxlY3Rpb25TbHVnLCB2ZXJzaW9uc0ZpZWxkcyB9ID0ge30pPT57XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGJ1aWxkUXVlcnlQbHVnaW4oc2NoZW1hKSB7XG4gICAgICAgIGNvbnN0IG1vZGlmaWVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICBhc3luYyBmdW5jdGlvbiBzY2hlbWFCdWlsZFF1ZXJ5KHsgZ2xvYmFsU2x1ZywgbG9jYWxlLCBwYXlsb2FkLCB3aGVyZSB9KSB7XG4gICAgICAgICAgICBsZXQgZmllbGRzID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uc0ZpZWxkcykge1xuICAgICAgICAgICAgICAgIGZpZWxkcyA9IHZlcnNpb25zRmllbGRzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsU2x1Zykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnbG9iYWxDb25maWcgPSBwYXlsb2FkLmdsb2JhbHMuY29uZmlnLmZpbmQoKHsgc2x1ZyB9KT0+c2x1ZyA9PT0gZ2xvYmFsU2x1Zyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2xvYmFsQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEdsb2JhbCB3aXRoIHRoZSBzbHVnICR7Z2xvYmFsU2x1Z30gd2FzIG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGdsb2JhbENvbmZpZy5mbGF0dGVuZWRGaWVsZHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uU2x1Zykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uQ29uZmlnID0gcGF5bG9hZC5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uU2x1Z10/LmNvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb2xsZWN0aW9uQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYENvbGxlY3Rpb24gd2l0aCB0aGUgc2x1ZyAke2dsb2JhbFNsdWd9IHdhcyBub3QgZm91bmRgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmllbGRzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKCdGaWVsZHMgYXJlIG5vdCBpbml0aWFsaXplZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBhcnNlUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICAgICAgd2hlcmVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBtb2RpZmllZFNjaGVtYS5zdGF0aWNzLmJ1aWxkUXVlcnkgPSBzY2hlbWFCdWlsZFF1ZXJ5O1xuICAgIH07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRCdWlsZFF1ZXJ5UGx1Z2luLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getLocalizedSortProperty.js":
/*!****************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getLocalizedSortProperty.js ***!
  \****************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLocalizedSortProperty: () => (/* binding */ getLocalizedSortProperty)\n/* harmony export */ });\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/fields/config/types.js\");\n\nconst getLocalizedSortProperty = ({ config, fields, locale, parentIsLocalized, result: incomingResult, segments: incomingSegments })=>{\n    // If localization is not enabled, accept exactly\n    // what is sent in\n    if (!config.localization) {\n        return incomingSegments.join('.');\n    }\n    const segments = [\n        ...incomingSegments\n    ];\n    // Retrieve first segment, and remove from segments\n    const firstSegment = segments.shift();\n    // Attempt to find a matched field\n    const matchedField = fields.find((field)=>(0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(field) && field.name === firstSegment);\n    if (matchedField && !(0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldIsPresentationalOnly)(matchedField)) {\n        let nextFields = null;\n        let nextParentIsLocalized = parentIsLocalized;\n        const remainingSegments = [\n            ...segments\n        ];\n        let localizedSegment = matchedField.name;\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldShouldBeLocalized)({\n            field: matchedField,\n            parentIsLocalized: parentIsLocalized ?? false\n        })) {\n            // Check to see if next segment is a locale\n            if (segments.length > 0 && remainingSegments[0]) {\n                const nextSegmentIsLocale = config.localization.localeCodes.includes(remainingSegments[0]);\n                // If next segment is locale, remove it from remaining segments\n                // and use it to localize the current segment\n                if (nextSegmentIsLocale) {\n                    const nextSegment = remainingSegments.shift();\n                    localizedSegment = `${matchedField.name}.${nextSegment}`;\n                }\n            } else {\n                // If no more segments, but field is localized, use default locale\n                localizedSegment = `${matchedField.name}.${locale}`;\n            }\n        }\n        // If there are subfields, pass them through\n        if (matchedField.type === 'tab' || matchedField.type === 'group' || matchedField.type === 'array') {\n            nextFields = matchedField.flattenedFields;\n            if (!nextParentIsLocalized) {\n                nextParentIsLocalized = matchedField.localized ?? false;\n            }\n        }\n        if (matchedField.type === 'blocks') {\n            nextFields = (matchedField.blockReferences ?? matchedField.blocks).reduce((flattenedBlockFields, _block)=>{\n                // TODO: iterate over blocks mapped to block slug in v4, or pass through payload.blocks\n                const block = typeof _block === 'string' ? config.blocks?.find((b)=>b.slug === _block) : _block;\n                if (!block) {\n                    return [\n                        ...flattenedBlockFields\n                    ];\n                }\n                return [\n                    ...flattenedBlockFields,\n                    ...block.flattenedFields.filter((blockField)=>(0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(blockField) && blockField.name !== 'blockType' && blockField.name !== 'blockName' || !(0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(blockField))\n                ];\n            }, []);\n        }\n        const result = incomingResult ? `${incomingResult}.${localizedSegment}` : localizedSegment;\n        if (nextFields !== null) {\n            return getLocalizedSortProperty({\n                config,\n                fields: nextFields,\n                locale,\n                parentIsLocalized: nextParentIsLocalized,\n                result,\n                segments: remainingSegments\n            });\n        }\n        return result;\n    }\n    return incomingSegments.join('.');\n};\n\n//# sourceMappingURL=getLocalizedSortProperty.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9nZXRMb2NhbGl6ZWRTb3J0UHJvcGVydHkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUc7QUFDOUYsb0NBQW9DLCtGQUErRjtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGdFQUFnQjtBQUM5RCx5QkFBeUIseUVBQXlCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0VBQXNCO0FBQ2xDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsa0JBQWtCLEdBQUcsWUFBWTtBQUMzRTtBQUNBLGNBQWM7QUFDZDtBQUNBLHNDQUFzQyxrQkFBa0IsR0FBRyxPQUFPO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsZ0VBQWdCLHVGQUF1RixnRUFBZ0I7QUFDekw7QUFDQSxhQUFhO0FBQ2I7QUFDQSwyQ0FBMkMsZUFBZSxHQUFHLGlCQUFpQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3F1ZXJpZXMvZ2V0TG9jYWxpemVkU29ydFByb3BlcnR5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZpZWxkQWZmZWN0c0RhdGEsIGZpZWxkSXNQcmVzZW50YXRpb25hbE9ubHksIGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQgfSBmcm9tICdwYXlsb2FkL3NoYXJlZCc7XG5leHBvcnQgY29uc3QgZ2V0TG9jYWxpemVkU29ydFByb3BlcnR5ID0gKHsgY29uZmlnLCBmaWVsZHMsIGxvY2FsZSwgcGFyZW50SXNMb2NhbGl6ZWQsIHJlc3VsdDogaW5jb21pbmdSZXN1bHQsIHNlZ21lbnRzOiBpbmNvbWluZ1NlZ21lbnRzIH0pPT57XG4gICAgLy8gSWYgbG9jYWxpemF0aW9uIGlzIG5vdCBlbmFibGVkLCBhY2NlcHQgZXhhY3RseVxuICAgIC8vIHdoYXQgaXMgc2VudCBpblxuICAgIGlmICghY29uZmlnLmxvY2FsaXphdGlvbikge1xuICAgICAgICByZXR1cm4gaW5jb21pbmdTZWdtZW50cy5qb2luKCcuJyk7XG4gICAgfVxuICAgIGNvbnN0IHNlZ21lbnRzID0gW1xuICAgICAgICAuLi5pbmNvbWluZ1NlZ21lbnRzXG4gICAgXTtcbiAgICAvLyBSZXRyaWV2ZSBmaXJzdCBzZWdtZW50LCBhbmQgcmVtb3ZlIGZyb20gc2VnbWVudHNcbiAgICBjb25zdCBmaXJzdFNlZ21lbnQgPSBzZWdtZW50cy5zaGlmdCgpO1xuICAgIC8vIEF0dGVtcHQgdG8gZmluZCBhIG1hdGNoZWQgZmllbGRcbiAgICBjb25zdCBtYXRjaGVkRmllbGQgPSBmaWVsZHMuZmluZCgoZmllbGQpPT5maWVsZEFmZmVjdHNEYXRhKGZpZWxkKSAmJiBmaWVsZC5uYW1lID09PSBmaXJzdFNlZ21lbnQpO1xuICAgIGlmIChtYXRjaGVkRmllbGQgJiYgIWZpZWxkSXNQcmVzZW50YXRpb25hbE9ubHkobWF0Y2hlZEZpZWxkKSkge1xuICAgICAgICBsZXQgbmV4dEZpZWxkcyA9IG51bGw7XG4gICAgICAgIGxldCBuZXh0UGFyZW50SXNMb2NhbGl6ZWQgPSBwYXJlbnRJc0xvY2FsaXplZDtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nU2VnbWVudHMgPSBbXG4gICAgICAgICAgICAuLi5zZWdtZW50c1xuICAgICAgICBdO1xuICAgICAgICBsZXQgbG9jYWxpemVkU2VnbWVudCA9IG1hdGNoZWRGaWVsZC5uYW1lO1xuICAgICAgICBpZiAoZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgICAgICBmaWVsZDogbWF0Y2hlZEZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IHBhcmVudElzTG9jYWxpemVkID8/IGZhbHNlXG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgbmV4dCBzZWdtZW50IGlzIGEgbG9jYWxlXG4gICAgICAgICAgICBpZiAoc2VnbWVudHMubGVuZ3RoID4gMCAmJiByZW1haW5pbmdTZWdtZW50c1swXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTZWdtZW50SXNMb2NhbGUgPSBjb25maWcubG9jYWxpemF0aW9uLmxvY2FsZUNvZGVzLmluY2x1ZGVzKHJlbWFpbmluZ1NlZ21lbnRzWzBdKTtcbiAgICAgICAgICAgICAgICAvLyBJZiBuZXh0IHNlZ21lbnQgaXMgbG9jYWxlLCByZW1vdmUgaXQgZnJvbSByZW1haW5pbmcgc2VnbWVudHNcbiAgICAgICAgICAgICAgICAvLyBhbmQgdXNlIGl0IHRvIGxvY2FsaXplIHRoZSBjdXJyZW50IHNlZ21lbnRcbiAgICAgICAgICAgICAgICBpZiAobmV4dFNlZ21lbnRJc0xvY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0U2VnbWVudCA9IHJlbWFpbmluZ1NlZ21lbnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsaXplZFNlZ21lbnQgPSBgJHttYXRjaGVkRmllbGQubmFtZX0uJHtuZXh0U2VnbWVudH1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gbW9yZSBzZWdtZW50cywgYnV0IGZpZWxkIGlzIGxvY2FsaXplZCwgdXNlIGRlZmF1bHQgbG9jYWxlXG4gICAgICAgICAgICAgICAgbG9jYWxpemVkU2VnbWVudCA9IGAke21hdGNoZWRGaWVsZC5uYW1lfS4ke2xvY2FsZX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBzdWJmaWVsZHMsIHBhc3MgdGhlbSB0aHJvdWdoXG4gICAgICAgIGlmIChtYXRjaGVkRmllbGQudHlwZSA9PT0gJ3RhYicgfHwgbWF0Y2hlZEZpZWxkLnR5cGUgPT09ICdncm91cCcgfHwgbWF0Y2hlZEZpZWxkLnR5cGUgPT09ICdhcnJheScpIHtcbiAgICAgICAgICAgIG5leHRGaWVsZHMgPSBtYXRjaGVkRmllbGQuZmxhdHRlbmVkRmllbGRzO1xuICAgICAgICAgICAgaWYgKCFuZXh0UGFyZW50SXNMb2NhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICBuZXh0UGFyZW50SXNMb2NhbGl6ZWQgPSBtYXRjaGVkRmllbGQubG9jYWxpemVkID8/IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVkRmllbGQudHlwZSA9PT0gJ2Jsb2NrcycpIHtcbiAgICAgICAgICAgIG5leHRGaWVsZHMgPSAobWF0Y2hlZEZpZWxkLmJsb2NrUmVmZXJlbmNlcyA/PyBtYXRjaGVkRmllbGQuYmxvY2tzKS5yZWR1Y2UoKGZsYXR0ZW5lZEJsb2NrRmllbGRzLCBfYmxvY2spPT57XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogaXRlcmF0ZSBvdmVyIGJsb2NrcyBtYXBwZWQgdG8gYmxvY2sgc2x1ZyBpbiB2NCwgb3IgcGFzcyB0aHJvdWdoIHBheWxvYWQuYmxvY2tzXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSB0eXBlb2YgX2Jsb2NrID09PSAnc3RyaW5nJyA/IGNvbmZpZy5ibG9ja3M/LmZpbmQoKGIpPT5iLnNsdWcgPT09IF9ibG9jaykgOiBfYmxvY2s7XG4gICAgICAgICAgICAgICAgaWYgKCFibG9jaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZmxhdHRlbmVkQmxvY2tGaWVsZHNcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmxhdHRlbmVkQmxvY2tGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgIC4uLmJsb2NrLmZsYXR0ZW5lZEZpZWxkcy5maWx0ZXIoKGJsb2NrRmllbGQpPT5maWVsZEFmZmVjdHNEYXRhKGJsb2NrRmllbGQpICYmIGJsb2NrRmllbGQubmFtZSAhPT0gJ2Jsb2NrVHlwZScgJiYgYmxvY2tGaWVsZC5uYW1lICE9PSAnYmxvY2tOYW1lJyB8fCAhZmllbGRBZmZlY3RzRGF0YShibG9ja0ZpZWxkKSlcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGluY29taW5nUmVzdWx0ID8gYCR7aW5jb21pbmdSZXN1bHR9LiR7bG9jYWxpemVkU2VnbWVudH1gIDogbG9jYWxpemVkU2VnbWVudDtcbiAgICAgICAgaWYgKG5leHRGaWVsZHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRMb2NhbGl6ZWRTb3J0UHJvcGVydHkoe1xuICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IG5leHRGaWVsZHMsXG4gICAgICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkOiBuZXh0UGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICAgIHNlZ21lbnRzOiByZW1haW5pbmdTZWdtZW50c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIGluY29taW5nU2VnbWVudHMuam9pbignLicpO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0TG9jYWxpemVkU29ydFByb3BlcnR5LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/getLocalizedSortProperty.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/operatorMap.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/operatorMap.js ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   operatorMap: () => (/* binding */ operatorMap)\n/* harmony export */ });\nconst operatorMap = {\n    all: '$all',\n    equals: '$eq',\n    exists: '$exists',\n    greater_than: '$gt',\n    greater_than_equal: '$gte',\n    in: '$in',\n    intersects: '$geoIntersects',\n    less_than: '$lt',\n    less_than_equal: '$lte',\n    near: '$near',\n    not_equals: '$ne',\n    not_in: '$nin',\n    within: '$geoWithin'\n};\n\n//# sourceMappingURL=operatorMap.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9vcGVyYXRvck1hcC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL29wZXJhdG9yTWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBvcGVyYXRvck1hcCA9IHtcbiAgICBhbGw6ICckYWxsJyxcbiAgICBlcXVhbHM6ICckZXEnLFxuICAgIGV4aXN0czogJyRleGlzdHMnLFxuICAgIGdyZWF0ZXJfdGhhbjogJyRndCcsXG4gICAgZ3JlYXRlcl90aGFuX2VxdWFsOiAnJGd0ZScsXG4gICAgaW46ICckaW4nLFxuICAgIGludGVyc2VjdHM6ICckZ2VvSW50ZXJzZWN0cycsXG4gICAgbGVzc190aGFuOiAnJGx0JyxcbiAgICBsZXNzX3RoYW5fZXF1YWw6ICckbHRlJyxcbiAgICBuZWFyOiAnJG5lYXInLFxuICAgIG5vdF9lcXVhbHM6ICckbmUnLFxuICAgIG5vdF9pbjogJyRuaW4nLFxuICAgIHdpdGhpbjogJyRnZW9XaXRoaW4nXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVyYXRvck1hcC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/operatorMap.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseParams: () => (/* binding */ parseParams)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/deepMerge.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/types/constants.js\");\n/* harmony import */ var _buildAndOrConditions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buildAndOrConditions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildAndOrConditions.js\");\n/* harmony import */ var _buildSearchParams_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buildSearchParams.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSearchParams.js\");\n\n\n\n\nasync function parseParams({ collectionSlug, fields, globalSlug, locale, parentIsLocalized, payload, where }) {\n    let result = {};\n    if (typeof where === 'object') {\n        // We need to determine if the whereKey is an AND, OR, or a schema path\n        for (const relationOrPath of Object.keys(where)){\n            const condition = where[relationOrPath];\n            let conditionOperator = null;\n            if (relationOrPath.toLowerCase() === 'and') {\n                conditionOperator = '$and';\n            } else if (relationOrPath.toLowerCase() === 'or') {\n                conditionOperator = '$or';\n            }\n            if (Array.isArray(condition)) {\n                const builtConditions = await (0,_buildAndOrConditions_js__WEBPACK_IMPORTED_MODULE_0__.buildAndOrConditions)({\n                    collectionSlug,\n                    fields,\n                    globalSlug,\n                    locale,\n                    parentIsLocalized,\n                    payload,\n                    where: condition\n                });\n                if (builtConditions.length > 0 && conditionOperator !== null) {\n                    result[conditionOperator] = builtConditions;\n                }\n            } else {\n                // It's a path - and there can be multiple comparisons on a single path.\n                // For example - title like 'test' and title not equal to 'tester'\n                // So we need to loop on keys again here to handle each operator independently\n                const pathOperators = where[relationOrPath];\n                if (typeof pathOperators === 'object') {\n                    const validOperators = Object.keys(pathOperators).filter((operator)=>payload_shared__WEBPACK_IMPORTED_MODULE_1__.validOperatorSet.has(operator));\n                    for (const operator of validOperators){\n                        const searchParam = await (0,_buildSearchParams_js__WEBPACK_IMPORTED_MODULE_2__.buildSearchParam)({\n                            collectionSlug,\n                            fields,\n                            globalSlug,\n                            incomingPath: relationOrPath,\n                            locale,\n                            operator,\n                            parentIsLocalized,\n                            payload,\n                            val: pathOperators[operator]\n                        });\n                        if (searchParam?.value && searchParam?.path) {\n                            if (validOperators.length > 1) {\n                                if (!result.$and) {\n                                    result.$and = [];\n                                }\n                                result.$and.push({\n                                    [searchParam.path]: searchParam.value\n                                });\n                            } else {\n                                if (result[searchParam.path]) {\n                                    if (!result.$and) {\n                                        result.$and = [];\n                                    }\n                                    result.$and.push({\n                                        [searchParam.path]: result[searchParam.path]\n                                    });\n                                    result.$and.push({\n                                        [searchParam.path]: searchParam.value\n                                    });\n                                    delete result[searchParam.path];\n                                } else {\n                                    result[searchParam.path] = searchParam.value;\n                                }\n                            }\n                        } else if (typeof searchParam?.value === 'object') {\n                            result = (0,payload__WEBPACK_IMPORTED_MODULE_3__.deepMergeWithCombinedArrays)(result, searchParam.value ?? {}, {\n                                // dont clone Types.ObjectIDs\n                                clone: false\n                            });\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return result;\n}\n\n//# sourceMappingURL=parseParams.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9wYXJzZVBhcmFtcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzRDtBQUNKO0FBQ2U7QUFDUDtBQUNuRCw2QkFBNkIsK0VBQStFO0FBQ25IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDhFQUFvQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlGQUF5Riw0REFBZ0I7QUFDekc7QUFDQSxrREFBa0QsdUVBQWdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLHFDQUFxQyxvRUFBMkIsZ0NBQWdDO0FBQ2hHO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9wYXJzZVBhcmFtcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWVwTWVyZ2VXaXRoQ29tYmluZWRBcnJheXMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IHZhbGlkT3BlcmF0b3JTZXQgfSBmcm9tICdwYXlsb2FkL3NoYXJlZCc7XG5pbXBvcnQgeyBidWlsZEFuZE9yQ29uZGl0aW9ucyB9IGZyb20gJy4vYnVpbGRBbmRPckNvbmRpdGlvbnMuanMnO1xuaW1wb3J0IHsgYnVpbGRTZWFyY2hQYXJhbSB9IGZyb20gJy4vYnVpbGRTZWFyY2hQYXJhbXMuanMnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBhcnNlUGFyYW1zKHsgY29sbGVjdGlvblNsdWcsIGZpZWxkcywgZ2xvYmFsU2x1ZywgbG9jYWxlLCBwYXJlbnRJc0xvY2FsaXplZCwgcGF5bG9hZCwgd2hlcmUgfSkge1xuICAgIGxldCByZXN1bHQgPSB7fTtcbiAgICBpZiAodHlwZW9mIHdoZXJlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIGRldGVybWluZSBpZiB0aGUgd2hlcmVLZXkgaXMgYW4gQU5ELCBPUiwgb3IgYSBzY2hlbWEgcGF0aFxuICAgICAgICBmb3IgKGNvbnN0IHJlbGF0aW9uT3JQYXRoIG9mIE9iamVjdC5rZXlzKHdoZXJlKSl7XG4gICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSB3aGVyZVtyZWxhdGlvbk9yUGF0aF07XG4gICAgICAgICAgICBsZXQgY29uZGl0aW9uT3BlcmF0b3IgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHJlbGF0aW9uT3JQYXRoLnRvTG93ZXJDYXNlKCkgPT09ICdhbmQnKSB7XG4gICAgICAgICAgICAgICAgY29uZGl0aW9uT3BlcmF0b3IgPSAnJGFuZCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uT3JQYXRoLnRvTG93ZXJDYXNlKCkgPT09ICdvcicpIHtcbiAgICAgICAgICAgICAgICBjb25kaXRpb25PcGVyYXRvciA9ICckb3InO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29uZGl0aW9uKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWx0Q29uZGl0aW9ucyA9IGF3YWl0IGJ1aWxkQW5kT3JDb25kaXRpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IGNvbmRpdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChidWlsdENvbmRpdGlvbnMubGVuZ3RoID4gMCAmJiBjb25kaXRpb25PcGVyYXRvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbY29uZGl0aW9uT3BlcmF0b3JdID0gYnVpbHRDb25kaXRpb25zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSXQncyBhIHBhdGggLSBhbmQgdGhlcmUgY2FuIGJlIG11bHRpcGxlIGNvbXBhcmlzb25zIG9uIGEgc2luZ2xlIHBhdGguXG4gICAgICAgICAgICAgICAgLy8gRm9yIGV4YW1wbGUgLSB0aXRsZSBsaWtlICd0ZXN0JyBhbmQgdGl0bGUgbm90IGVxdWFsIHRvICd0ZXN0ZXInXG4gICAgICAgICAgICAgICAgLy8gU28gd2UgbmVlZCB0byBsb29wIG9uIGtleXMgYWdhaW4gaGVyZSB0byBoYW5kbGUgZWFjaCBvcGVyYXRvciBpbmRlcGVuZGVudGx5XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aE9wZXJhdG9ycyA9IHdoZXJlW3JlbGF0aW9uT3JQYXRoXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhdGhPcGVyYXRvcnMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkT3BlcmF0b3JzID0gT2JqZWN0LmtleXMocGF0aE9wZXJhdG9ycykuZmlsdGVyKChvcGVyYXRvcik9PnZhbGlkT3BlcmF0b3JTZXQuaGFzKG9wZXJhdG9yKSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb3BlcmF0b3Igb2YgdmFsaWRPcGVyYXRvcnMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW0gPSBhd2FpdCBidWlsZFNlYXJjaFBhcmFtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNvbWluZ1BhdGg6IHJlbGF0aW9uT3JQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogcGF0aE9wZXJhdG9yc1tvcGVyYXRvcl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFBhcmFtPy52YWx1ZSAmJiBzZWFyY2hQYXJhbT8ucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZE9wZXJhdG9ycy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LiRhbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC4kYW5kID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LiRhbmQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2VhcmNoUGFyYW0ucGF0aF06IHNlYXJjaFBhcmFtLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbc2VhcmNoUGFyYW0ucGF0aF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LiRhbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuJGFuZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LiRhbmQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NlYXJjaFBhcmFtLnBhdGhdOiByZXN1bHRbc2VhcmNoUGFyYW0ucGF0aF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LiRhbmQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NlYXJjaFBhcmFtLnBhdGhdOiBzZWFyY2hQYXJhbS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0W3NlYXJjaFBhcmFtLnBhdGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3NlYXJjaFBhcmFtLnBhdGhdID0gc2VhcmNoUGFyYW0udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWFyY2hQYXJhbT8udmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZGVlcE1lcmdlV2l0aENvbWJpbmVkQXJyYXlzKHJlc3VsdCwgc2VhcmNoUGFyYW0udmFsdWUgPz8ge30sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9udCBjbG9uZSBUeXBlcy5PYmplY3RJRHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyc2VQYXJhbXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/sanitizeQueryValue.js":
/*!**********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/sanitizeQueryValue.js ***!
  \**********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sanitizeQueryValue: () => (/* binding */ sanitizeQueryValue)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/createArrayFromCommaDelineated.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/fields/config/types.js\");\n\n\n\nconst buildExistsQuery = (formattedValue, path, treatEmptyString = true)=>{\n    if (formattedValue) {\n        return {\n            rawQuery: {\n                $and: [\n                    {\n                        [path]: {\n                            $exists: true\n                        }\n                    },\n                    {\n                        [path]: {\n                            $ne: null\n                        }\n                    },\n                    ...treatEmptyString ? [\n                        {\n                            [path]: {\n                                $ne: ''\n                            }\n                        }\n                    ] : []\n                ]\n            }\n        };\n    } else {\n        return {\n            rawQuery: {\n                $or: [\n                    {\n                        [path]: {\n                            $exists: false\n                        }\n                    },\n                    {\n                        [path]: {\n                            $eq: null\n                        }\n                    },\n                    ...treatEmptyString ? [\n                        {\n                            [path]: {\n                                $eq: ''\n                            }\n                        }\n                    ] : []\n                ]\n            }\n        };\n    }\n};\n// returns nestedField Field object from blocks.nestedField path because getLocalizedPaths splits them only for relationships\nconst getFieldFromSegments = ({ field, payload, segments })=>{\n    if ('blocks' in field || 'blockReferences' in field) {\n        const _field = field;\n        for (const _block of _field.blockReferences ?? _field.blocks){\n            const block = typeof _block === 'string' ? payload.blocks[_block] : _block;\n            if (block) {\n                const field = getFieldFromSegments({\n                    field: block,\n                    payload,\n                    segments\n                });\n                if (field) {\n                    return field;\n                }\n            }\n        }\n    }\n    if ('fields' in field) {\n        for(let i = 0; i < segments.length; i++){\n            const foundField = field.flattenedFields.find((each)=>each.name === segments[i]);\n            if (!foundField) {\n                break;\n            }\n            if (foundField && segments.length - 1 === i) {\n                return foundField;\n            }\n            segments.shift();\n            return getFieldFromSegments({\n                field: foundField,\n                payload,\n                segments\n            });\n        }\n    }\n};\nconst sanitizeQueryValue = ({ field, hasCustomID, locale, operator, parentIsLocalized, path, payload, val })=>{\n    let formattedValue = val;\n    let formattedOperator = operator;\n    if ([\n        'array',\n        'blocks',\n        'group',\n        'tab'\n    ].includes(field.type) && path.includes('.')) {\n        const segments = path.split('.');\n        segments.shift();\n        const foundField = getFieldFromSegments({\n            field,\n            payload,\n            segments\n        });\n        if (foundField) {\n            field = foundField;\n        }\n    }\n    // Disregard invalid _ids\n    if (path === '_id') {\n        if (typeof val === 'string' && val.split(',').length === 1) {\n            if (!hasCustomID) {\n                const isValid = mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(val);\n                if (!isValid) {\n                    return {\n                        operator: formattedOperator,\n                        val: undefined\n                    };\n                } else {\n                    if ([\n                        'in',\n                        'not_in'\n                    ].includes(operator)) {\n                        formattedValue = (0,payload__WEBPACK_IMPORTED_MODULE_1__.createArrayFromCommaDelineated)(formattedValue).map((id)=>new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(id));\n                    } else {\n                        formattedValue = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(val);\n                    }\n                }\n            }\n            if (field.type === 'number') {\n                const parsedNumber = parseFloat(val);\n                if (Number.isNaN(parsedNumber)) {\n                    return {\n                        operator: formattedOperator,\n                        val: undefined\n                    };\n                }\n            }\n        } else if (Array.isArray(val) || typeof val === 'string' && val.split(',').length > 1) {\n            if (typeof val === 'string') {\n                formattedValue = (0,payload__WEBPACK_IMPORTED_MODULE_1__.createArrayFromCommaDelineated)(val);\n            }\n            if (Array.isArray(formattedValue)) {\n                formattedValue = formattedValue.reduce((formattedValues, inVal)=>{\n                    if (!hasCustomID) {\n                        if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(inVal)) {\n                            formattedValues.push(new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(inVal));\n                        }\n                    }\n                    if (field.type === 'number') {\n                        const parsedNumber = parseFloat(inVal);\n                        if (!Number.isNaN(parsedNumber)) {\n                            formattedValues.push(parsedNumber);\n                        }\n                    } else {\n                        formattedValues.push(inVal);\n                    }\n                    return formattedValues;\n                }, []);\n            }\n        }\n    }\n    // Cast incoming values as proper searchable types\n    if (field.type === 'checkbox' && typeof val === 'string') {\n        if (val.toLowerCase() === 'true') {\n            formattedValue = true;\n        }\n        if (val.toLowerCase() === 'false') {\n            formattedValue = false;\n        }\n    }\n    if ([\n        'all',\n        'in',\n        'not_in'\n    ].includes(operator) && typeof formattedValue === 'string') {\n        formattedValue = (0,payload__WEBPACK_IMPORTED_MODULE_1__.createArrayFromCommaDelineated)(formattedValue);\n        if (field.type === 'number' && Array.isArray(formattedValue)) {\n            formattedValue = formattedValue.map((arrayVal)=>parseFloat(arrayVal));\n        }\n    }\n    if (field.type === 'number') {\n        if (typeof formattedValue === 'string' && operator !== 'exists') {\n            formattedValue = Number(val);\n        }\n        if (operator === 'exists') {\n            formattedValue = val === 'true' ? true : val === 'false' ? false : Boolean(val);\n            return buildExistsQuery(formattedValue, path);\n        }\n    }\n    if (field.type === 'date' && typeof val === 'string' && operator !== 'exists') {\n        formattedValue = new Date(val);\n        if (Number.isNaN(Date.parse(formattedValue))) {\n            return undefined;\n        }\n    }\n    if ([\n        'relationship',\n        'upload'\n    ].includes(field.type)) {\n        if (val === 'null') {\n            formattedValue = null;\n        }\n        // Object equality requires the value to be the first key in the object that is being queried.\n        if (operator === 'equals' && formattedValue && typeof formattedValue === 'object' && formattedValue.value && formattedValue.relationTo) {\n            const { value } = formattedValue;\n            const isValid = mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(value);\n            if (isValid) {\n                formattedValue.value = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(value);\n            }\n            let localizedPath = path;\n            if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_2__.fieldShouldBeLocalized)({\n                field,\n                parentIsLocalized\n            }) && payload.config.localization && locale) {\n                localizedPath = `${path}.${locale}`;\n            }\n            return {\n                rawQuery: {\n                    $or: [\n                        {\n                            [localizedPath]: {\n                                $eq: {\n                                    // disable auto sort\n                                    /* eslint-disable */ value: formattedValue.value,\n                                    relationTo: formattedValue.relationTo\n                                }\n                            }\n                        },\n                        {\n                            [localizedPath]: {\n                                $eq: {\n                                    relationTo: formattedValue.relationTo,\n                                    value: formattedValue.value\n                                }\n                            }\n                        }\n                    ]\n                }\n            };\n        }\n        const relationTo = field.relationTo;\n        if ([\n            'in',\n            'not_in'\n        ].includes(operator) && Array.isArray(formattedValue)) {\n            formattedValue = formattedValue.reduce((formattedValues, inVal)=>{\n                if (!inVal) {\n                    return formattedValues;\n                }\n                if (typeof relationTo === 'string' && payload.collections[relationTo]?.customIDType) {\n                    if (payload.collections[relationTo].customIDType === 'number') {\n                        const parsedNumber = parseFloat(inVal);\n                        if (!Number.isNaN(parsedNumber)) {\n                            formattedValues.push(parsedNumber);\n                            return formattedValues;\n                        }\n                    }\n                    formattedValues.push(inVal);\n                    return formattedValues;\n                }\n                if (Array.isArray(relationTo) && relationTo.some((relationTo)=>!!payload.collections[relationTo]?.customIDType)) {\n                    if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(inVal.toString())) {\n                        formattedValues.push(new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(inVal));\n                    } else {\n                        formattedValues.push(inVal);\n                    }\n                    return formattedValues;\n                }\n                if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(inVal.toString())) {\n                    formattedValues.push(new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(inVal));\n                }\n                return formattedValues;\n            }, []);\n        }\n        if ([\n            'contains',\n            'equals',\n            'like',\n            'not_equals'\n        ].includes(operator) && (!Array.isArray(relationTo) || !path.endsWith('.relationTo'))) {\n            if (typeof relationTo === 'string') {\n                const customIDType = payload.collections[relationTo]?.customIDType;\n                if (customIDType) {\n                    if (customIDType === 'number') {\n                        formattedValue = parseFloat(val);\n                        if (Number.isNaN(formattedValue)) {\n                            return {\n                                operator: formattedOperator,\n                                val: undefined\n                            };\n                        }\n                    }\n                } else {\n                    if (!mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(formattedValue)) {\n                        return {\n                            operator: formattedOperator,\n                            val: undefined\n                        };\n                    }\n                    formattedValue = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(formattedValue);\n                }\n            } else {\n                const hasCustomIDType = relationTo.some((relationTo)=>!!payload.collections[relationTo]?.customIDType);\n                if (hasCustomIDType) {\n                    if (typeof val === 'string') {\n                        const formattedNumber = Number(val);\n                        formattedValue = [\n                            mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(val) ? new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(val) : val\n                        ];\n                        formattedOperator = operator === 'not_equals' ? 'not_in' : 'in';\n                        if (!Number.isNaN(formattedNumber)) {\n                            formattedValue.push(formattedNumber);\n                        }\n                    }\n                } else {\n                    if (!mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(formattedValue)) {\n                        return {\n                            operator: formattedOperator,\n                            val: undefined\n                        };\n                    }\n                    formattedValue = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(formattedValue);\n                }\n            }\n        }\n        if (operator === 'all' && Array.isArray(relationTo) && path.endsWith('.value') && Array.isArray(formattedValue)) {\n            formattedValue.forEach((v, i)=>{\n                if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(v)) {\n                    formattedValue[i] = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(v);\n                }\n            });\n        }\n    }\n    // Set up specific formatting necessary by operators\n    if (operator === 'near') {\n        let lng;\n        let lat;\n        let maxDistance;\n        let minDistance;\n        if (Array.isArray(formattedValue)) {\n            ;\n            [lng, lat, maxDistance, minDistance] = formattedValue;\n        }\n        if (typeof formattedValue === 'string') {\n            ;\n            [lng, lat, maxDistance, minDistance] = (0,payload__WEBPACK_IMPORTED_MODULE_1__.createArrayFromCommaDelineated)(formattedValue);\n        }\n        if (lng == null || lat == null || maxDistance == null && minDistance == null) {\n            formattedValue = undefined;\n        } else {\n            formattedValue = {\n                $geometry: {\n                    type: 'Point',\n                    coordinates: [\n                        parseFloat(lng),\n                        parseFloat(lat)\n                    ]\n                }\n            };\n            if (maxDistance && !Number.isNaN(Number(maxDistance))) {\n                formattedValue.$maxDistance = parseFloat(maxDistance);\n            }\n            if (minDistance && !Number.isNaN(Number(minDistance))) {\n                formattedValue.$minDistance = parseFloat(minDistance);\n            }\n        }\n    }\n    if (operator === 'within' || operator === 'intersects') {\n        formattedValue = {\n            $geometry: formattedValue\n        };\n    }\n    if (path !== '_id' || path === '_id' && hasCustomID && field.type === 'text') {\n        if (operator === 'contains' && !mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(formattedValue)) {\n            formattedValue = {\n                $options: 'i',\n                $regex: formattedValue.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n            };\n        }\n        if (operator === 'exists') {\n            formattedValue = formattedValue === 'true' || formattedValue === true;\n            // _id can't be empty string, will error Cast to ObjectId failed for value \"\"\n            return buildExistsQuery(formattedValue, path, ![\n                'checkbox',\n                'relationship',\n                'upload'\n            ].includes(field.type));\n        }\n    }\n    if ((path === '_id' || path === 'parent') && operator === 'like' && formattedValue.length === 24 && !hasCustomID) {\n        formattedOperator = 'equals';\n    }\n    if (operator === 'exists') {\n        formattedValue = formattedValue === 'true' || formattedValue === true;\n        // Clearable fields\n        if ([\n            'relationship',\n            'select',\n            'upload'\n        ].includes(field.type)) {\n            if (formattedValue) {\n                return {\n                    rawQuery: {\n                        $and: [\n                            {\n                                [path]: {\n                                    $exists: true\n                                }\n                            },\n                            {\n                                [path]: {\n                                    $ne: null\n                                }\n                            }\n                        ]\n                    }\n                };\n            } else {\n                return {\n                    rawQuery: {\n                        $or: [\n                            {\n                                [path]: {\n                                    $exists: false\n                                }\n                            },\n                            {\n                                [path]: {\n                                    $eq: null\n                                }\n                            }\n                        ]\n                    }\n                };\n            }\n        }\n    }\n    return {\n        operator: formattedOperator,\n        val: formattedValue\n    };\n};\n\n//# sourceMappingURL=sanitizeQueryValue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9zYW5pdGl6ZVF1ZXJ5VmFsdWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUN3QjtBQUNEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywwQkFBMEI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFCQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ08sOEJBQThCLDZFQUE2RTtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMkNBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx1RUFBOEIsK0JBQStCLDJDQUFLO0FBQzNHLHNCQUFzQjtBQUN0Qiw2Q0FBNkMsMkNBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsaUNBQWlDLHVFQUE4QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwyQ0FBSztBQUNqQyxxREFBcUQsMkNBQUs7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUVBQThCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUIsNEJBQTRCLDJDQUFLO0FBQ2pDO0FBQ0EsMkNBQTJDLDJDQUFLO0FBQ2hEO0FBQ0E7QUFDQSxnQkFBZ0Isc0VBQXNCO0FBQ3RDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsbUNBQW1DLEtBQUssR0FBRyxPQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQUs7QUFDN0IsaURBQWlELDJDQUFLO0FBQ3RELHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwyQ0FBSztBQUN6Qiw2Q0FBNkMsMkNBQUs7QUFDbEQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQix5QkFBeUIsMkNBQUs7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywyQ0FBSztBQUM5QztBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJDQUFLLDZCQUE2QiwyQ0FBSztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIseUJBQXlCLDJDQUFLO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMkNBQUs7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwyQ0FBSztBQUN6Qiw0Q0FBNEMsMkNBQUs7QUFDakQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCx1RUFBOEI7QUFDakY7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMkNBQUs7QUFDN0M7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL3Nhbml0aXplUXVlcnlWYWx1ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUeXBlcyB9IGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IGNyZWF0ZUFycmF5RnJvbUNvbW1hRGVsaW5lYXRlZCB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgZmllbGRTaG91bGRCZUxvY2FsaXplZCB9IGZyb20gJ3BheWxvYWQvc2hhcmVkJztcbmNvbnN0IGJ1aWxkRXhpc3RzUXVlcnkgPSAoZm9ybWF0dGVkVmFsdWUsIHBhdGgsIHRyZWF0RW1wdHlTdHJpbmcgPSB0cnVlKT0+e1xuICAgIGlmIChmb3JtYXR0ZWRWYWx1ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmF3UXVlcnk6IHtcbiAgICAgICAgICAgICAgICAkYW5kOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRleGlzdHM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJG5lOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC4uLnRyZWF0RW1wdHlTdHJpbmcgPyBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRuZTogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF0gOiBbXVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmF3UXVlcnk6IHtcbiAgICAgICAgICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGV4aXN0czogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVxOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC4uLnRyZWF0RW1wdHlTdHJpbmcgPyBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcTogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF0gOiBbXVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuLy8gcmV0dXJucyBuZXN0ZWRGaWVsZCBGaWVsZCBvYmplY3QgZnJvbSBibG9ja3MubmVzdGVkRmllbGQgcGF0aCBiZWNhdXNlIGdldExvY2FsaXplZFBhdGhzIHNwbGl0cyB0aGVtIG9ubHkgZm9yIHJlbGF0aW9uc2hpcHNcbmNvbnN0IGdldEZpZWxkRnJvbVNlZ21lbnRzID0gKHsgZmllbGQsIHBheWxvYWQsIHNlZ21lbnRzIH0pPT57XG4gICAgaWYgKCdibG9ja3MnIGluIGZpZWxkIHx8ICdibG9ja1JlZmVyZW5jZXMnIGluIGZpZWxkKSB7XG4gICAgICAgIGNvbnN0IF9maWVsZCA9IGZpZWxkO1xuICAgICAgICBmb3IgKGNvbnN0IF9ibG9jayBvZiBfZmllbGQuYmxvY2tSZWZlcmVuY2VzID8/IF9maWVsZC5ibG9ja3Mpe1xuICAgICAgICAgICAgY29uc3QgYmxvY2sgPSB0eXBlb2YgX2Jsb2NrID09PSAnc3RyaW5nJyA/IHBheWxvYWQuYmxvY2tzW19ibG9ja10gOiBfYmxvY2s7XG4gICAgICAgICAgICBpZiAoYmxvY2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IGdldEZpZWxkRnJvbVNlZ21lbnRzKHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGJsb2NrLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50c1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgnZmllbGRzJyBpbiBmaWVsZCkge1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgY29uc3QgZm91bmRGaWVsZCA9IGZpZWxkLmZsYXR0ZW5lZEZpZWxkcy5maW5kKChlYWNoKT0+ZWFjaC5uYW1lID09PSBzZWdtZW50c1tpXSk7XG4gICAgICAgICAgICBpZiAoIWZvdW5kRmllbGQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3VuZEZpZWxkICYmIHNlZ21lbnRzLmxlbmd0aCAtIDEgPT09IGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmRGaWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICByZXR1cm4gZ2V0RmllbGRGcm9tU2VnbWVudHMoe1xuICAgICAgICAgICAgICAgIGZpZWxkOiBmb3VuZEZpZWxkLFxuICAgICAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICAgICAgc2VnbWVudHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBzYW5pdGl6ZVF1ZXJ5VmFsdWUgPSAoeyBmaWVsZCwgaGFzQ3VzdG9tSUQsIGxvY2FsZSwgb3BlcmF0b3IsIHBhcmVudElzTG9jYWxpemVkLCBwYXRoLCBwYXlsb2FkLCB2YWwgfSk9PntcbiAgICBsZXQgZm9ybWF0dGVkVmFsdWUgPSB2YWw7XG4gICAgbGV0IGZvcm1hdHRlZE9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgaWYgKFtcbiAgICAgICAgJ2FycmF5JyxcbiAgICAgICAgJ2Jsb2NrcycsXG4gICAgICAgICdncm91cCcsXG4gICAgICAgICd0YWInXG4gICAgXS5pbmNsdWRlcyhmaWVsZC50eXBlKSAmJiBwYXRoLmluY2x1ZGVzKCcuJykpIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7XG4gICAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7XG4gICAgICAgIGNvbnN0IGZvdW5kRmllbGQgPSBnZXRGaWVsZEZyb21TZWdtZW50cyh7XG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICBzZWdtZW50c1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZvdW5kRmllbGQpIHtcbiAgICAgICAgICAgIGZpZWxkID0gZm91bmRGaWVsZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBEaXNyZWdhcmQgaW52YWxpZCBfaWRzXG4gICAgaWYgKHBhdGggPT09ICdfaWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwuc3BsaXQoJywnKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGlmICghaGFzQ3VzdG9tSUQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gVHlwZXMuT2JqZWN0SWQuaXNWYWxpZCh2YWwpO1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3I6IGZvcm1hdHRlZE9wZXJhdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2luJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdub3RfaW4nXG4gICAgICAgICAgICAgICAgICAgIF0uaW5jbHVkZXMob3BlcmF0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGNyZWF0ZUFycmF5RnJvbUNvbW1hRGVsaW5lYXRlZChmb3JtYXR0ZWRWYWx1ZSkubWFwKChpZCk9Pm5ldyBUeXBlcy5PYmplY3RJZChpZCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBuZXcgVHlwZXMuT2JqZWN0SWQodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZE51bWJlciA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKHBhcnNlZE51bWJlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBmb3JtYXR0ZWRPcGVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsKSB8fCB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwuc3BsaXQoJywnKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGNyZWF0ZUFycmF5RnJvbUNvbW1hRGVsaW5lYXRlZCh2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZm9ybWF0dGVkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZS5yZWR1Y2UoKGZvcm1hdHRlZFZhbHVlcywgaW5WYWwpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzQ3VzdG9tSUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGluVmFsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlcy5wdXNoKG5ldyBUeXBlcy5PYmplY3RJZChpblZhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkTnVtYmVyID0gcGFyc2VGbG9hdChpblZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihwYXJzZWROdW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWVzLnB1c2gocGFyc2VkTnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlcy5wdXNoKGluVmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWVzO1xuICAgICAgICAgICAgICAgIH0sIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDYXN0IGluY29taW5nIHZhbHVlcyBhcyBwcm9wZXIgc2VhcmNoYWJsZSB0eXBlc1xuICAgIGlmIChmaWVsZC50eXBlID09PSAnY2hlY2tib3gnICYmIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh2YWwudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbC50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChbXG4gICAgICAgICdhbGwnLFxuICAgICAgICAnaW4nLFxuICAgICAgICAnbm90X2luJ1xuICAgIF0uaW5jbHVkZXMob3BlcmF0b3IpICYmIHR5cGVvZiBmb3JtYXR0ZWRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBjcmVhdGVBcnJheUZyb21Db21tYURlbGluZWF0ZWQoZm9ybWF0dGVkVmFsdWUpO1xuICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ251bWJlcicgJiYgQXJyYXkuaXNBcnJheShmb3JtYXR0ZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0dGVkVmFsdWUubWFwKChhcnJheVZhbCk9PnBhcnNlRmxvYXQoYXJyYXlWYWwpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmllbGQudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXR0ZWRWYWx1ZSA9PT0gJ3N0cmluZycgJiYgb3BlcmF0b3IgIT09ICdleGlzdHMnKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IE51bWJlcih2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2V4aXN0cycpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gdmFsID09PSAndHJ1ZScgPyB0cnVlIDogdmFsID09PSAnZmFsc2UnID8gZmFsc2UgOiBCb29sZWFuKHZhbCk7XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRFeGlzdHNRdWVyeShmb3JtYXR0ZWRWYWx1ZSwgcGF0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpZWxkLnR5cGUgPT09ICdkYXRlJyAmJiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiBvcGVyYXRvciAhPT0gJ2V4aXN0cycpIHtcbiAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBuZXcgRGF0ZSh2YWwpO1xuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKERhdGUucGFyc2UoZm9ybWF0dGVkVmFsdWUpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoW1xuICAgICAgICAncmVsYXRpb25zaGlwJyxcbiAgICAgICAgJ3VwbG9hZCdcbiAgICBdLmluY2x1ZGVzKGZpZWxkLnR5cGUpKSB7XG4gICAgICAgIGlmICh2YWwgPT09ICdudWxsJykge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIE9iamVjdCBlcXVhbGl0eSByZXF1aXJlcyB0aGUgdmFsdWUgdG8gYmUgdGhlIGZpcnN0IGtleSBpbiB0aGUgb2JqZWN0IHRoYXQgaXMgYmVpbmcgcXVlcmllZC5cbiAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnZXF1YWxzJyAmJiBmb3JtYXR0ZWRWYWx1ZSAmJiB0eXBlb2YgZm9ybWF0dGVkVmFsdWUgPT09ICdvYmplY3QnICYmIGZvcm1hdHRlZFZhbHVlLnZhbHVlICYmIGZvcm1hdHRlZFZhbHVlLnJlbGF0aW9uVG8pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGZvcm1hdHRlZFZhbHVlO1xuICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9IFR5cGVzLk9iamVjdElkLmlzVmFsaWQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZS52YWx1ZSA9IG5ldyBUeXBlcy5PYmplY3RJZCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbG9jYWxpemVkUGF0aCA9IHBhdGg7XG4gICAgICAgICAgICBpZiAoZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgIH0pICYmIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiAmJiBsb2NhbGUpIHtcbiAgICAgICAgICAgICAgICBsb2NhbGl6ZWRQYXRoID0gYCR7cGF0aH0uJHtsb2NhbGV9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmF3UXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgJG9yOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2xvY2FsaXplZFBhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSBhdXRvIHNvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovIHZhbHVlOiBmb3JtYXR0ZWRWYWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uVG86IGZvcm1hdHRlZFZhbHVlLnJlbGF0aW9uVG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2xvY2FsaXplZFBhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25UbzogZm9ybWF0dGVkVmFsdWUucmVsYXRpb25UbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmb3JtYXR0ZWRWYWx1ZS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWxhdGlvblRvID0gZmllbGQucmVsYXRpb25UbztcbiAgICAgICAgaWYgKFtcbiAgICAgICAgICAgICdpbicsXG4gICAgICAgICAgICAnbm90X2luJ1xuICAgICAgICBdLmluY2x1ZGVzKG9wZXJhdG9yKSAmJiBBcnJheS5pc0FycmF5KGZvcm1hdHRlZFZhbHVlKSkge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZS5yZWR1Y2UoKGZvcm1hdHRlZFZhbHVlcywgaW5WYWwpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFpblZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlbGF0aW9uVG8gPT09ICdzdHJpbmcnICYmIHBheWxvYWQuY29sbGVjdGlvbnNbcmVsYXRpb25Ub10/LmN1c3RvbUlEVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGF5bG9hZC5jb2xsZWN0aW9uc1tyZWxhdGlvblRvXS5jdXN0b21JRFR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWROdW1iZXIgPSBwYXJzZUZsb2F0KGluVmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHBhcnNlZE51bWJlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZXMucHVzaChwYXJzZWROdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRWYWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWVzLnB1c2goaW5WYWwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWxhdGlvblRvKSAmJiByZWxhdGlvblRvLnNvbWUoKHJlbGF0aW9uVG8pPT4hIXBheWxvYWQuY29sbGVjdGlvbnNbcmVsYXRpb25Ub10/LmN1c3RvbUlEVHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGVzLk9iamVjdElkLmlzVmFsaWQoaW5WYWwudG9TdHJpbmcoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlcy5wdXNoKG5ldyBUeXBlcy5PYmplY3RJZChpblZhbCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWVzLnB1c2goaW5WYWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRWYWx1ZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGluVmFsLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlcy5wdXNoKG5ldyBUeXBlcy5PYmplY3RJZChpblZhbCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWVzO1xuICAgICAgICAgICAgfSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChbXG4gICAgICAgICAgICAnY29udGFpbnMnLFxuICAgICAgICAgICAgJ2VxdWFscycsXG4gICAgICAgICAgICAnbGlrZScsXG4gICAgICAgICAgICAnbm90X2VxdWFscydcbiAgICAgICAgXS5pbmNsdWRlcyhvcGVyYXRvcikgJiYgKCFBcnJheS5pc0FycmF5KHJlbGF0aW9uVG8pIHx8ICFwYXRoLmVuZHNXaXRoKCcucmVsYXRpb25UbycpKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWxhdGlvblRvID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbUlEVHlwZSA9IHBheWxvYWQuY29sbGVjdGlvbnNbcmVsYXRpb25Ub10/LmN1c3RvbUlEVHlwZTtcbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSURUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21JRFR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4oZm9ybWF0dGVkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3I6IGZvcm1hdHRlZE9wZXJhdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIVR5cGVzLk9iamVjdElkLmlzVmFsaWQoZm9ybWF0dGVkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBmb3JtYXR0ZWRPcGVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IG5ldyBUeXBlcy5PYmplY3RJZChmb3JtYXR0ZWRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNDdXN0b21JRFR5cGUgPSByZWxhdGlvblRvLnNvbWUoKHJlbGF0aW9uVG8pPT4hIXBheWxvYWQuY29sbGVjdGlvbnNbcmVsYXRpb25Ub10/LmN1c3RvbUlEVHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0N1c3RvbUlEVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZE51bWJlciA9IE51bWJlcih2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVHlwZXMuT2JqZWN0SWQuaXNWYWxpZCh2YWwpID8gbmV3IFR5cGVzLk9iamVjdElkKHZhbCkgOiB2YWxcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRPcGVyYXRvciA9IG9wZXJhdG9yID09PSAnbm90X2VxdWFscycgPyAnbm90X2luJyA6ICdpbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihmb3JtYXR0ZWROdW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUucHVzaChmb3JtYXR0ZWROdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGZvcm1hdHRlZFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvcjogZm9ybWF0dGVkT3BlcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBuZXcgVHlwZXMuT2JqZWN0SWQoZm9ybWF0dGVkVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdhbGwnICYmIEFycmF5LmlzQXJyYXkocmVsYXRpb25UbykgJiYgcGF0aC5lbmRzV2l0aCgnLnZhbHVlJykgJiYgQXJyYXkuaXNBcnJheShmb3JtYXR0ZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlLmZvckVhY2goKHYsIGkpPT57XG4gICAgICAgICAgICAgICAgaWYgKFR5cGVzLk9iamVjdElkLmlzVmFsaWQodikpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWVbaV0gPSBuZXcgVHlwZXMuT2JqZWN0SWQodik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU2V0IHVwIHNwZWNpZmljIGZvcm1hdHRpbmcgbmVjZXNzYXJ5IGJ5IG9wZXJhdG9yc1xuICAgIGlmIChvcGVyYXRvciA9PT0gJ25lYXInKSB7XG4gICAgICAgIGxldCBsbmc7XG4gICAgICAgIGxldCBsYXQ7XG4gICAgICAgIGxldCBtYXhEaXN0YW5jZTtcbiAgICAgICAgbGV0IG1pbkRpc3RhbmNlO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmb3JtYXR0ZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIFtsbmcsIGxhdCwgbWF4RGlzdGFuY2UsIG1pbkRpc3RhbmNlXSA9IGZvcm1hdHRlZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZm9ybWF0dGVkVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBbbG5nLCBsYXQsIG1heERpc3RhbmNlLCBtaW5EaXN0YW5jZV0gPSBjcmVhdGVBcnJheUZyb21Db21tYURlbGluZWF0ZWQoZm9ybWF0dGVkVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsbmcgPT0gbnVsbCB8fCBsYXQgPT0gbnVsbCB8fCBtYXhEaXN0YW5jZSA9PSBudWxsICYmIG1pbkRpc3RhbmNlID09IG51bGwpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgJGdlb21ldHJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGxuZyksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGxhdClcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAobWF4RGlzdGFuY2UgJiYgIU51bWJlci5pc05hTihOdW1iZXIobWF4RGlzdGFuY2UpKSkge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlLiRtYXhEaXN0YW5jZSA9IHBhcnNlRmxvYXQobWF4RGlzdGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1pbkRpc3RhbmNlICYmICFOdW1iZXIuaXNOYU4oTnVtYmVyKG1pbkRpc3RhbmNlKSkpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZS4kbWluRGlzdGFuY2UgPSBwYXJzZUZsb2F0KG1pbkRpc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3BlcmF0b3IgPT09ICd3aXRoaW4nIHx8IG9wZXJhdG9yID09PSAnaW50ZXJzZWN0cycpIHtcbiAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSB7XG4gICAgICAgICAgICAkZ2VvbWV0cnk6IGZvcm1hdHRlZFZhbHVlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChwYXRoICE9PSAnX2lkJyB8fCBwYXRoID09PSAnX2lkJyAmJiBoYXNDdXN0b21JRCAmJiBmaWVsZC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnY29udGFpbnMnICYmICFUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGZvcm1hdHRlZFZhbHVlKSkge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgJG9wdGlvbnM6ICdpJyxcbiAgICAgICAgICAgICAgICAkcmVnZXg6IGZvcm1hdHRlZFZhbHVlLnJlcGxhY2UoL1tcXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnZXhpc3RzJykge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBmb3JtYXR0ZWRWYWx1ZSA9PT0gJ3RydWUnIHx8IGZvcm1hdHRlZFZhbHVlID09PSB0cnVlO1xuICAgICAgICAgICAgLy8gX2lkIGNhbid0IGJlIGVtcHR5IHN0cmluZywgd2lsbCBlcnJvciBDYXN0IHRvIE9iamVjdElkIGZhaWxlZCBmb3IgdmFsdWUgXCJcIlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkRXhpc3RzUXVlcnkoZm9ybWF0dGVkVmFsdWUsIHBhdGgsICFbXG4gICAgICAgICAgICAgICAgJ2NoZWNrYm94JyxcbiAgICAgICAgICAgICAgICAncmVsYXRpb25zaGlwJyxcbiAgICAgICAgICAgICAgICAndXBsb2FkJ1xuICAgICAgICAgICAgXS5pbmNsdWRlcyhmaWVsZC50eXBlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKChwYXRoID09PSAnX2lkJyB8fCBwYXRoID09PSAncGFyZW50JykgJiYgb3BlcmF0b3IgPT09ICdsaWtlJyAmJiBmb3JtYXR0ZWRWYWx1ZS5sZW5ndGggPT09IDI0ICYmICFoYXNDdXN0b21JRCkge1xuICAgICAgICBmb3JtYXR0ZWRPcGVyYXRvciA9ICdlcXVhbHMnO1xuICAgIH1cbiAgICBpZiAob3BlcmF0b3IgPT09ICdleGlzdHMnKSB7XG4gICAgICAgIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0dGVkVmFsdWUgPT09ICd0cnVlJyB8fCBmb3JtYXR0ZWRWYWx1ZSA9PT0gdHJ1ZTtcbiAgICAgICAgLy8gQ2xlYXJhYmxlIGZpZWxkc1xuICAgICAgICBpZiAoW1xuICAgICAgICAgICAgJ3JlbGF0aW9uc2hpcCcsXG4gICAgICAgICAgICAnc2VsZWN0JyxcbiAgICAgICAgICAgICd1cGxvYWQnXG4gICAgICAgIF0uaW5jbHVkZXMoZmllbGQudHlwZSkpIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXR0ZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJhd1F1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkYW5kOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRleGlzdHM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRuZTogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmF3UXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRvcjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXhpc3RzOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVxOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG9wZXJhdG9yOiBmb3JtYXR0ZWRPcGVyYXRvcixcbiAgICAgICAgdmFsOiBmb3JtYXR0ZWRWYWx1ZVxuICAgIH07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW5pdGl6ZVF1ZXJ5VmFsdWUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/sanitizeQueryValue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queryDrafts.js":
/*!*******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queryDrafts.js ***!
  \*******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   queryDrafts: () => (/* binding */ queryDrafts)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/combineQueries.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utilities/aggregatePaginate.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js\");\n/* harmony import */ var _utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utilities/buildJoinAggregation.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\n\n\nconst queryDrafts = async function queryDrafts({ collection: collectionSlug, joins, limit, locale, page, pagination, req, select, sort: sortArg, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    let hasNearConstraint;\n    let sort;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_3__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true);\n    const sortAggregation = [];\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_4__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields,\n            locale,\n            sort: sortArg || collectionConfig.defaultSort,\n            sortAggregation,\n            timestamps: true,\n            versions: true\n        });\n    }\n    const combinedWhere = (0,payload__WEBPACK_IMPORTED_MODULE_5__.combineQueries)({\n        latest: {\n            equals: true\n        }\n    }, where);\n    const versionQuery = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_6__.buildQuery)({\n        adapter: this,\n        fields,\n        locale,\n        where: combinedWhere\n    });\n    const projection = (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_7__.buildProjectionFromSelect)({\n        adapter: this,\n        fields,\n        select\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !versionQuery || Object.keys(versionQuery).length === 0;\n    const paginationOptions = {\n        lean: true,\n        leanWithId: true,\n        options,\n        page,\n        pagination,\n        projection,\n        sort,\n        useEstimatedCount\n    };\n    if (this.collation) {\n        const defaultLocale = 'en';\n        paginationOptions.collation = {\n            locale: locale && locale !== 'all' && locale !== '*' ? locale : defaultLocale,\n            ...this.collation\n        };\n    }\n    if (!useEstimatedCount && Object.keys(versionQuery).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        paginationOptions.useCustomCountFn = ()=>{\n            return Promise.resolve(Model.countDocuments(versionQuery, {\n                hint: {\n                    _id: 1\n                }\n            }));\n        };\n    }\n    if (limit && limit > 0) {\n        paginationOptions.limit = limit;\n        // limit must also be set here, it's ignored when pagination is false\n        paginationOptions.options.limit = limit;\n    }\n    let result;\n    const aggregate = await (0,_utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_8__.buildJoinAggregation)({\n        adapter: this,\n        collection: collectionSlug,\n        collectionConfig,\n        joins,\n        locale,\n        projection,\n        query: versionQuery,\n        versions: true\n    });\n    // build join aggregation\n    if (aggregate || sortAggregation.length > 0) {\n        result = await (0,_utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_9__.aggregatePaginate)({\n            adapter: this,\n            collation: paginationOptions.collation,\n            joinAggregation: aggregate,\n            limit: paginationOptions.limit,\n            Model,\n            page: paginationOptions.page,\n            pagination: paginationOptions.pagination,\n            projection: paginationOptions.projection,\n            query: versionQuery,\n            session: paginationOptions.options?.session ?? undefined,\n            sort: paginationOptions.sort,\n            sortAggregation,\n            useEstimatedCount: paginationOptions.useEstimatedCount\n        });\n    } else {\n        result = await Model.paginate(versionQuery, paginationOptions);\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_10__.transform)({\n        adapter: this,\n        data: result.docs,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_3__.buildVersionCollectionFields)(this.payload.config, collectionConfig),\n        operation: 'read'\n    });\n    for(let i = 0; i < result.docs.length; i++){\n        const id = result.docs[i].parent;\n        result.docs[i] = result.docs[i].version ?? {};\n        result.docs[i].id = id;\n    }\n    return result;\n};\n\n//# sourceMappingURL=queryDrafts.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcnlEcmFmdHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQWdHO0FBQzNDO0FBQ1E7QUFDUTtBQUNNO0FBQ1U7QUFDNUI7QUFDRjtBQUNGO0FBQzlDLGlEQUFpRCw0R0FBNEc7QUFDcEssWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQXVCO0FBQ25EO0FBQ0E7QUFDQSxtQkFBbUIscUVBQTRCO0FBQy9DO0FBQ0E7QUFDQSxlQUFlLDBFQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSwwQkFBMEIsdURBQWM7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLCtCQUErQixrRUFBVTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsa0dBQXlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsd0ZBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHVCQUF1QixrRkFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJLG1FQUFTO0FBQ2I7QUFDQTtBQUNBLGdCQUFnQixxRUFBNEI7QUFDNUM7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLHdCQUF3QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3F1ZXJ5RHJhZnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHMsIGNvbWJpbmVRdWVyaWVzLCBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkU29ydFBhcmFtIH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzJztcbmltcG9ydCB7IGFnZ3JlZ2F0ZVBhZ2luYXRlIH0gZnJvbSAnLi91dGlsaXRpZXMvYWdncmVnYXRlUGFnaW5hdGUuanMnO1xuaW1wb3J0IHsgYnVpbGRKb2luQWdncmVnYXRpb24gfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZEpvaW5BZ2dyZWdhdGlvbi5qcyc7XG5pbXBvcnQgeyBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdC5qcyc7XG5pbXBvcnQgeyBnZXRDb2xsZWN0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgcXVlcnlEcmFmdHMgPSBhc3luYyBmdW5jdGlvbiBxdWVyeURyYWZ0cyh7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBqb2lucywgbGltaXQsIGxvY2FsZSwgcGFnZSwgcGFnaW5hdGlvbiwgcmVxLCBzZWxlY3QsIHNvcnQ6IHNvcnRBcmcsIHdoZXJlID0ge30gfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGxldCBoYXNOZWFyQ29uc3RyYWludDtcbiAgICBsZXQgc29ydDtcbiAgICBpZiAod2hlcmUpIHtcbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyh3aGVyZSk7XG4gICAgICAgIGhhc05lYXJDb25zdHJhaW50ID0gY29uc3RyYWludHMuc29tZSgocHJvcCk9Pk9iamVjdC5rZXlzKHByb3ApLnNvbWUoKGtleSk9PmtleSA9PT0gJ25lYXInKSk7XG4gICAgfVxuICAgIGNvbnN0IGZpZWxkcyA9IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgY29sbGVjdGlvbkNvbmZpZywgdHJ1ZSk7XG4gICAgY29uc3Qgc29ydEFnZ3JlZ2F0aW9uID0gW107XG4gICAgaWYgKCFoYXNOZWFyQ29uc3RyYWludCkge1xuICAgICAgICBzb3J0ID0gYnVpbGRTb3J0UGFyYW0oe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5wYXlsb2FkLmNvbmZpZyxcbiAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgIHNvcnQ6IHNvcnRBcmcgfHwgY29sbGVjdGlvbkNvbmZpZy5kZWZhdWx0U29ydCxcbiAgICAgICAgICAgIHNvcnRBZ2dyZWdhdGlvbixcbiAgICAgICAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICAgICAgICB2ZXJzaW9uczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY29tYmluZWRXaGVyZSA9IGNvbWJpbmVRdWVyaWVzKHtcbiAgICAgICAgbGF0ZXN0OiB7XG4gICAgICAgICAgICBlcXVhbHM6IHRydWVcbiAgICAgICAgfVxuICAgIH0sIHdoZXJlKTtcbiAgICBjb25zdCB2ZXJzaW9uUXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlOiBjb21iaW5lZFdoZXJlXG4gICAgfSk7XG4gICAgY29uc3QgcHJvamVjdGlvbiA9IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3Qoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIHNlbGVjdFxuICAgIH0pO1xuICAgIC8vIHVzZUVzdGltYXRlZENvdW50IGlzIGZhc3RlciwgYnV0IG5vdCBhY2N1cmF0ZSwgYXMgaXQgaWdub3JlcyBhbnkgZmlsdGVycy4gSXQgaXMgdGh1cyBzZXQgdG8gdHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZmlsdGVycy5cbiAgICBjb25zdCB1c2VFc3RpbWF0ZWRDb3VudCA9IGhhc05lYXJDb25zdHJhaW50IHx8ICF2ZXJzaW9uUXVlcnkgfHwgT2JqZWN0LmtleXModmVyc2lvblF1ZXJ5KS5sZW5ndGggPT09IDA7XG4gICAgY29uc3QgcGFnaW5hdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIGxlYW5XaXRoSWQ6IHRydWUsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHBhZ2luYXRpb24sXG4gICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgIHNvcnQsXG4gICAgICAgIHVzZUVzdGltYXRlZENvdW50XG4gICAgfTtcbiAgICBpZiAodGhpcy5jb2xsYXRpb24pIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdExvY2FsZSA9ICdlbic7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLmNvbGxhdGlvbiA9IHtcbiAgICAgICAgICAgIGxvY2FsZTogbG9jYWxlICYmIGxvY2FsZSAhPT0gJ2FsbCcgJiYgbG9jYWxlICE9PSAnKicgPyBsb2NhbGUgOiBkZWZhdWx0TG9jYWxlLFxuICAgICAgICAgICAgLi4udGhpcy5jb2xsYXRpb25cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCF1c2VFc3RpbWF0ZWRDb3VudCAmJiBPYmplY3Qua2V5cyh2ZXJzaW9uUXVlcnkpLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmRpc2FibGVJbmRleEhpbnRzICE9PSB0cnVlKSB7XG4gICAgICAgIC8vIEltcHJvdmUgdGhlIHBlcmZvcm1hbmNlIG9mIHRoZSBjb3VudERvY3VtZW50cyBxdWVyeSB3aGljaCBpcyB1c2VkIGlmIHVzZUVzdGltYXRlZENvdW50IGlzIHNldCB0byBmYWxzZSBieSBhZGRpbmdcbiAgICAgICAgLy8gYSBoaW50LiBCeSBkZWZhdWx0LCBpZiBubyBoaW50IGlzIHByb3ZpZGVkLCBNb25nb0RCIGRvZXMgbm90IHVzZSBhbiBpbmRleGVkIGZpZWxkIHRvIGNvdW50IHRoZSByZXR1cm5lZCBkb2N1bWVudHMsXG4gICAgICAgIC8vIHdoaWNoIG1ha2VzIHF1ZXJpZXMgdmVyeSBzbG93LiBUaGlzIG9ubHkgaGFwcGVucyB3aGVuIG5vIHF1ZXJ5IChmaWx0ZXIpIGlzIHByb3ZpZGVkLiBJZiBvbmUgaXMgcHJvdmlkZWQsIGl0IHVzZXNcbiAgICAgICAgLy8gdGhlIGNvcnJlY3QgaW5kZXhlZCBmaWVsZFxuICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy51c2VDdXN0b21Db3VudEZuID0gKCk9PntcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoTW9kZWwuY291bnREb2N1bWVudHModmVyc2lvblF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgaGludDoge1xuICAgICAgICAgICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChsaW1pdCAmJiBsaW1pdCA+IDApIHtcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgLy8gbGltaXQgbXVzdCBhbHNvIGJlIHNldCBoZXJlLCBpdCdzIGlnbm9yZWQgd2hlbiBwYWdpbmF0aW9uIGlzIGZhbHNlXG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLm9wdGlvbnMubGltaXQgPSBsaW1pdDtcbiAgICB9XG4gICAgbGV0IHJlc3VsdDtcbiAgICBjb25zdCBhZ2dyZWdhdGUgPSBhd2FpdCBidWlsZEpvaW5BZ2dyZWdhdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBjb2xsZWN0aW9uQ29uZmlnLFxuICAgICAgICBqb2lucyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICBxdWVyeTogdmVyc2lvblF1ZXJ5LFxuICAgICAgICB2ZXJzaW9uczogdHJ1ZVxuICAgIH0pO1xuICAgIC8vIGJ1aWxkIGpvaW4gYWdncmVnYXRpb25cbiAgICBpZiAoYWdncmVnYXRlIHx8IHNvcnRBZ2dyZWdhdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGFnZ3JlZ2F0ZVBhZ2luYXRlKHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBjb2xsYXRpb246IHBhZ2luYXRpb25PcHRpb25zLmNvbGxhdGlvbixcbiAgICAgICAgICAgIGpvaW5BZ2dyZWdhdGlvbjogYWdncmVnYXRlLFxuICAgICAgICAgICAgbGltaXQ6IHBhZ2luYXRpb25PcHRpb25zLmxpbWl0LFxuICAgICAgICAgICAgTW9kZWwsXG4gICAgICAgICAgICBwYWdlOiBwYWdpbmF0aW9uT3B0aW9ucy5wYWdlLFxuICAgICAgICAgICAgcGFnaW5hdGlvbjogcGFnaW5hdGlvbk9wdGlvbnMucGFnaW5hdGlvbixcbiAgICAgICAgICAgIHByb2plY3Rpb246IHBhZ2luYXRpb25PcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBxdWVyeTogdmVyc2lvblF1ZXJ5LFxuICAgICAgICAgICAgc2Vzc2lvbjogcGFnaW5hdGlvbk9wdGlvbnMub3B0aW9ucz8uc2Vzc2lvbiA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBzb3J0OiBwYWdpbmF0aW9uT3B0aW9ucy5zb3J0LFxuICAgICAgICAgICAgc29ydEFnZ3JlZ2F0aW9uLFxuICAgICAgICAgICAgdXNlRXN0aW1hdGVkQ291bnQ6IHBhZ2luYXRpb25PcHRpb25zLnVzZUVzdGltYXRlZENvdW50XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IE1vZGVsLnBhZ2luYXRlKHZlcnNpb25RdWVyeSwgcGFnaW5hdGlvbk9wdGlvbnMpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiByZXN1bHQuZG9jcyxcbiAgICAgICAgZmllbGRzOiBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGNvbGxlY3Rpb25Db25maWcpLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXN1bHQuZG9jcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGNvbnN0IGlkID0gcmVzdWx0LmRvY3NbaV0ucGFyZW50O1xuICAgICAgICByZXN1bHQuZG9jc1tpXSA9IHJlc3VsdC5kb2NzW2ldLnZlcnNpb24gPz8ge307XG4gICAgICAgIHJlc3VsdC5kb2NzW2ldLmlkID0gaWQ7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeURyYWZ0cy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queryDrafts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/beginTransaction.js":
/*!*************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/beginTransaction.js ***!
  \*************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   beginTransaction: () => (/* binding */ beginTransaction)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/.pnpm/uuid@10.0.0/node_modules/uuid/dist/esm-node/v4.js\");\n\n\n// Needs await to fulfill the interface\n// @ts-expect-error TransactionOptions isn't compatible with BeginTransaction of the DatabaseAdapter interface.\n// eslint-disable-next-line @typescript-eslint/require-await\nconst beginTransaction = async function beginTransaction(options) {\n    if (!this.connection) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('beginTransaction called while no connection to the database exists');\n    }\n    const client = this.connection.getClient();\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    if (!this.sessions[id]) {\n        // @ts-expect-error BaseDatabaseAdapter and MongoosAdapter (that extends Base) sessions aren't compatible.\n        this.sessions[id] = client.startSession();\n    }\n    if (this.sessions[id]?.inTransaction()) {\n        this.payload.logger.warn('beginTransaction called while transaction already exists');\n    } else {\n        this.sessions[id]?.startTransaction(options || this.transactionOptions);\n    }\n    return id;\n};\n\n//# sourceMappingURL=beginTransaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdHJhbnNhY3Rpb25zL2JlZ2luVHJhbnNhY3Rpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBQ0Q7QUFDbEM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGtCQUFrQiw2Q0FBUTtBQUMxQjtBQUNBO0FBQ0EsZUFBZSxnREFBSTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3RyYW5zYWN0aW9ucy9iZWdpblRyYW5zYWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAndXVpZCc7XG4vLyBOZWVkcyBhd2FpdCB0byBmdWxmaWxsIHRoZSBpbnRlcmZhY2Vcbi8vIEB0cy1leHBlY3QtZXJyb3IgVHJhbnNhY3Rpb25PcHRpb25zIGlzbid0IGNvbXBhdGlibGUgd2l0aCBCZWdpblRyYW5zYWN0aW9uIG9mIHRoZSBEYXRhYmFzZUFkYXB0ZXIgaW50ZXJmYWNlLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9yZXF1aXJlLWF3YWl0XG5leHBvcnQgY29uc3QgYmVnaW5UcmFuc2FjdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIGJlZ2luVHJhbnNhY3Rpb24ob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5jb25uZWN0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcignYmVnaW5UcmFuc2FjdGlvbiBjYWxsZWQgd2hpbGUgbm8gY29ubmVjdGlvbiB0byB0aGUgZGF0YWJhc2UgZXhpc3RzJyk7XG4gICAgfVxuICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuY29ubmVjdGlvbi5nZXRDbGllbnQoKTtcbiAgICBjb25zdCBpZCA9IHV1aWQoKTtcbiAgICBpZiAoIXRoaXMuc2Vzc2lvbnNbaWRdKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgQmFzZURhdGFiYXNlQWRhcHRlciBhbmQgTW9uZ29vc0FkYXB0ZXIgKHRoYXQgZXh0ZW5kcyBCYXNlKSBzZXNzaW9ucyBhcmVuJ3QgY29tcGF0aWJsZS5cbiAgICAgICAgdGhpcy5zZXNzaW9uc1tpZF0gPSBjbGllbnQuc3RhcnRTZXNzaW9uKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNlc3Npb25zW2lkXT8uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgIHRoaXMucGF5bG9hZC5sb2dnZXIud2FybignYmVnaW5UcmFuc2FjdGlvbiBjYWxsZWQgd2hpbGUgdHJhbnNhY3Rpb24gYWxyZWFkeSBleGlzdHMnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlc3Npb25zW2lkXT8uc3RhcnRUcmFuc2FjdGlvbihvcHRpb25zIHx8IHRoaXMudHJhbnNhY3Rpb25PcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmVnaW5UcmFuc2FjdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/beginTransaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/commitTransaction.js":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/commitTransaction.js ***!
  \**************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   commitTransaction: () => (/* binding */ commitTransaction)\n/* harmony export */ });\nconst commitTransaction = async function commitTransaction(id) {\n    if (id instanceof Promise) {\n        return;\n    }\n    if (!this.sessions[id]?.inTransaction()) {\n        return;\n    }\n    await this.sessions[id].commitTransaction();\n    try {\n        await this.sessions[id].endSession();\n    } catch (_) {\n    // ending sessions is only best effort and won't impact anything if it fails since the transaction was committed\n    }\n    delete this.sessions[id];\n};\n\n//# sourceMappingURL=commitTransaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdHJhbnNhY3Rpb25zL2NvbW1pdFRyYW5zYWN0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdHJhbnNhY3Rpb25zL2NvbW1pdFRyYW5zYWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb21taXRUcmFuc2FjdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIGNvbW1pdFRyYW5zYWN0aW9uKGlkKSB7XG4gICAgaWYgKGlkIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy5zZXNzaW9uc1tpZF0/LmluVHJhbnNhY3Rpb24oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc2Vzc2lvbnNbaWRdLmNvbW1pdFRyYW5zYWN0aW9uKCk7XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXNzaW9uc1tpZF0uZW5kU2Vzc2lvbigpO1xuICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAvLyBlbmRpbmcgc2Vzc2lvbnMgaXMgb25seSBiZXN0IGVmZm9ydCBhbmQgd29uJ3QgaW1wYWN0IGFueXRoaW5nIGlmIGl0IGZhaWxzIHNpbmNlIHRoZSB0cmFuc2FjdGlvbiB3YXMgY29tbWl0dGVkXG4gICAgfVxuICAgIGRlbGV0ZSB0aGlzLnNlc3Npb25zW2lkXTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1pdFRyYW5zYWN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/commitTransaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/rollbackTransaction.js":
/*!****************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/rollbackTransaction.js ***!
  \****************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rollbackTransaction: () => (/* binding */ rollbackTransaction)\n/* harmony export */ });\nconst rollbackTransaction = async function rollbackTransaction(incomingID = '') {\n    let transactionID;\n    if (incomingID instanceof Promise) {\n        transactionID = await incomingID;\n    } else {\n        transactionID = incomingID;\n    }\n    // if multiple operations are using the same transaction, the first will flow through and delete the session.\n    // subsequent calls should be ignored.\n    if (!this.sessions[transactionID]) {\n        return;\n    }\n    // when session exists but is not inTransaction something unexpected is happening to the session\n    if (!this.sessions[transactionID]?.inTransaction()) {\n        this.payload.logger.warn('rollbackTransaction called when no transaction exists');\n        delete this.sessions[transactionID];\n        return;\n    }\n    // the first call for rollback should be aborted and deleted causing any other operations with the same transaction to fail\n    try {\n        await this.sessions[transactionID]?.abortTransaction();\n        await this.sessions[transactionID]?.endSession();\n    } catch (error) {\n    // ignore the error as it is likely a race condition from multiple errors\n    }\n    delete this.sessions[transactionID];\n};\n\n//# sourceMappingURL=rollbackTransaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdHJhbnNhY3Rpb25zL3JvbGxiYWNrVHJhbnNhY3Rpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3RyYW5zYWN0aW9ucy9yb2xsYmFja1RyYW5zYWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCByb2xsYmFja1RyYW5zYWN0aW9uID0gYXN5bmMgZnVuY3Rpb24gcm9sbGJhY2tUcmFuc2FjdGlvbihpbmNvbWluZ0lEID0gJycpIHtcbiAgICBsZXQgdHJhbnNhY3Rpb25JRDtcbiAgICBpZiAoaW5jb21pbmdJRCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdHJhbnNhY3Rpb25JRCA9IGF3YWl0IGluY29taW5nSUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNhY3Rpb25JRCA9IGluY29taW5nSUQ7XG4gICAgfVxuICAgIC8vIGlmIG11bHRpcGxlIG9wZXJhdGlvbnMgYXJlIHVzaW5nIHRoZSBzYW1lIHRyYW5zYWN0aW9uLCB0aGUgZmlyc3Qgd2lsbCBmbG93IHRocm91Z2ggYW5kIGRlbGV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAvLyBzdWJzZXF1ZW50IGNhbGxzIHNob3VsZCBiZSBpZ25vcmVkLlxuICAgIGlmICghdGhpcy5zZXNzaW9uc1t0cmFuc2FjdGlvbklEXSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHdoZW4gc2Vzc2lvbiBleGlzdHMgYnV0IGlzIG5vdCBpblRyYW5zYWN0aW9uIHNvbWV0aGluZyB1bmV4cGVjdGVkIGlzIGhhcHBlbmluZyB0byB0aGUgc2Vzc2lvblxuICAgIGlmICghdGhpcy5zZXNzaW9uc1t0cmFuc2FjdGlvbklEXT8uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgIHRoaXMucGF5bG9hZC5sb2dnZXIud2Fybigncm9sbGJhY2tUcmFuc2FjdGlvbiBjYWxsZWQgd2hlbiBubyB0cmFuc2FjdGlvbiBleGlzdHMnKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuc2Vzc2lvbnNbdHJhbnNhY3Rpb25JRF07XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGhlIGZpcnN0IGNhbGwgZm9yIHJvbGxiYWNrIHNob3VsZCBiZSBhYm9ydGVkIGFuZCBkZWxldGVkIGNhdXNpbmcgYW55IG90aGVyIG9wZXJhdGlvbnMgd2l0aCB0aGUgc2FtZSB0cmFuc2FjdGlvbiB0byBmYWlsXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXNzaW9uc1t0cmFuc2FjdGlvbklEXT8uYWJvcnRUcmFuc2FjdGlvbigpO1xuICAgICAgICBhd2FpdCB0aGlzLnNlc3Npb25zW3RyYW5zYWN0aW9uSURdPy5lbmRTZXNzaW9uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBpZ25vcmUgdGhlIGVycm9yIGFzIGl0IGlzIGxpa2VseSBhIHJhY2UgY29uZGl0aW9uIGZyb20gbXVsdGlwbGUgZXJyb3JzXG4gICAgfVxuICAgIGRlbGV0ZSB0aGlzLnNlc3Npb25zW3RyYW5zYWN0aW9uSURdO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm9sbGJhY2tUcmFuc2FjdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/transactions/rollbackTransaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateGlobal.js":
/*!********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateGlobal.js ***!
  \********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateGlobal: () => (/* binding */ updateGlobal)\n/* harmony export */ });\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\nconst updateGlobal = async function updateGlobal({ slug: globalSlug, data, options: optionsArgs = {}, req, returning, select }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug\n    });\n    const fields = globalConfig.fields;\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: globalConfig.flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data,\n        fields,\n        globalSlug,\n        operation: 'write'\n    });\n    if (returning === false) {\n        await Model.updateOne({\n            globalType: globalSlug\n        }, data, options);\n        return null;\n    }\n    const result = await Model.findOneAndUpdate({\n        globalType: globalSlug\n    }, data, options);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data: result,\n        fields,\n        globalSlug,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=updateGlobal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlR2xvYmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFGO0FBQ2hDO0FBQ0U7QUFDRjtBQUM5QyxtREFBbUQsaURBQWlELDBCQUEwQjtBQUNySSxZQUFZLHNCQUFzQixFQUFFLGtFQUFTO0FBQzdDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVHbG9iYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgdXBkYXRlR2xvYmFsID0gYXN5bmMgZnVuY3Rpb24gdXBkYXRlR2xvYmFsKHsgc2x1ZzogZ2xvYmFsU2x1ZywgZGF0YSwgb3B0aW9uczogb3B0aW9uc0FyZ3MgPSB7fSwgcmVxLCByZXR1cm5pbmcsIHNlbGVjdCB9KSB7XG4gICAgY29uc3QgeyBnbG9iYWxDb25maWcsIE1vZGVsIH0gPSBnZXRHbG9iYWwoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBnbG9iYWxTbHVnXG4gICAgfSk7XG4gICAgY29uc3QgZmllbGRzID0gZ2xvYmFsQ29uZmlnLmZpZWxkcztcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAuLi5vcHRpb25zQXJncyxcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICBwcm9qZWN0aW9uOiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHM6IGdsb2JhbENvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSksXG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICBvcGVyYXRpb246ICd3cml0ZSdcbiAgICB9KTtcbiAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICBhd2FpdCBNb2RlbC51cGRhdGVPbmUoe1xuICAgICAgICAgICAgZ2xvYmFsVHlwZTogZ2xvYmFsU2x1Z1xuICAgICAgICB9LCBkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE1vZGVsLmZpbmRPbmVBbmRVcGRhdGUoe1xuICAgICAgICBnbG9iYWxUeXBlOiBnbG9iYWxTbHVnXG4gICAgfSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZUdsb2JhbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateGlobal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateGlobalVersion.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateGlobalVersion.js ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateGlobalVersion: () => (/* binding */ updateGlobalVersion)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nasync function updateGlobalVersion({ id, global: globalSlug, locale, options: optionsArgs = {}, req, returning, select, versionData, where }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug,\n        versions: true\n    });\n    const whereToUse = where || {\n        id: {\n            equals: id\n        }\n    };\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig);\n    const flattenedFields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig, true);\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_2__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_3__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__.buildQuery)({\n        adapter: this,\n        fields: flattenedFields,\n        locale,\n        where: whereToUse\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: versionData,\n        fields,\n        operation: 'write'\n    });\n    if (returning === false) {\n        await Model.updateOne(query, versionData, options);\n        return null;\n    }\n    const doc = await Model.findOneAndUpdate(query, versionData, options);\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: doc,\n        fields,\n        operation: 'read'\n    });\n    return doc;\n}\n\n//# sourceMappingURL=updateGlobalVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlR2xvYmFsVmVyc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW1EO0FBQ0U7QUFDZ0M7QUFDaEM7QUFDRTtBQUNGO0FBQzlDLHFDQUFxQyx5REFBeUQsOENBQThDO0FBQ25KLFlBQVksc0JBQXNCLEVBQUUsa0VBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUVBQXdCO0FBQzNDLDRCQUE0QixpRUFBd0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0dBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQSx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlR2xvYmFsVmVyc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdC5qcyc7XG5pbXBvcnQgeyBnZXRHbG9iYWwgfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVHbG9iYWxWZXJzaW9uKHsgaWQsIGdsb2JhbDogZ2xvYmFsU2x1ZywgbG9jYWxlLCBvcHRpb25zOiBvcHRpb25zQXJncyA9IHt9LCByZXEsIHJldHVybmluZywgc2VsZWN0LCB2ZXJzaW9uRGF0YSwgd2hlcmUgfSkge1xuICAgIGNvbnN0IHsgZ2xvYmFsQ29uZmlnLCBNb2RlbCB9ID0gZ2V0R2xvYmFsKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCB3aGVyZVRvVXNlID0gd2hlcmUgfHwge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgZXF1YWxzOiBpZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBmaWVsZHMgPSBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgZ2xvYmFsQ29uZmlnKTtcbiAgICBjb25zdCBmbGF0dGVuZWRGaWVsZHMgPSBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgZ2xvYmFsQ29uZmlnLCB0cnVlKTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAuLi5vcHRpb25zQXJncyxcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICBwcm9qZWN0aW9uOiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHM6IGZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgIHNlbGVjdFxuICAgICAgICB9KSxcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBmaWVsZHM6IGZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZTogd2hlcmVUb1VzZVxuICAgIH0pO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IHZlcnNpb25EYXRhLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3dyaXRlJ1xuICAgIH0pO1xuICAgIGlmIChyZXR1cm5pbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIGF3YWl0IE1vZGVsLnVwZGF0ZU9uZShxdWVyeSwgdmVyc2lvbkRhdGEsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZG9jID0gYXdhaXQgTW9kZWwuZmluZE9uZUFuZFVwZGF0ZShxdWVyeSwgdmVyc2lvbkRhdGEsIG9wdGlvbnMpO1xuICAgIGlmICghZG9jKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiBkb2MsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gZG9jO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGVHbG9iYWxWZXJzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateGlobalVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateJobs.js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateJobs.js ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateJobs: () => (/* binding */ updateJobs)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_handleError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/handleError.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nconst updateJobs = async function updateMany({ id, data, limit, req, returning, sort: sortArg, where: whereArg }) {\n    if (!data?.log?.length) {\n        delete data.log;\n    }\n    const where = id ? {\n        id: {\n            equals: id\n        }\n    } : whereArg;\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug: 'payload-jobs'\n    });\n    const sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_1__.buildSortParam)({\n        adapter: this,\n        config: this.payload.config,\n        fields: collectionConfig.flattenedFields,\n        sort: sortArg || collectionConfig.defaultSort,\n        timestamps: true\n    });\n    const options = {\n        lean: true,\n        new: true,\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    let query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        collectionSlug: collectionConfig.slug,\n        fields: collectionConfig.flattenedFields,\n        where\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data,\n        fields: collectionConfig.fields,\n        operation: 'write'\n    });\n    let result = [];\n    try {\n        if (id) {\n            if (returning === false) {\n                await Model.updateOne(query, data, options);\n                return null;\n            } else {\n                const doc = await Model.findOneAndUpdate(query, data, options);\n                result = doc ? [\n                    doc\n                ] : [];\n            }\n        } else {\n            if (typeof limit === 'number' && limit > 0) {\n                const documentsToUpdate = await Model.find(query, {}, {\n                    ...options,\n                    limit,\n                    projection: {\n                        _id: 1\n                    },\n                    sort\n                });\n                if (documentsToUpdate.length === 0) {\n                    return null;\n                }\n                query = {\n                    _id: {\n                        $in: documentsToUpdate.map((doc)=>doc._id)\n                    }\n                };\n            }\n            await Model.updateMany(query, data, options);\n            if (returning === false) {\n                return null;\n            }\n            result = await Model.find(query, {}, {\n                ...options,\n                sort\n            });\n        }\n    } catch (error) {\n        (0,_utilities_handleError_js__WEBPACK_IMPORTED_MODULE_5__.handleError)({\n            collection: collectionConfig.slug,\n            error,\n            req\n        });\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data: result,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=updateJobs.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlSm9icy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBQ1E7QUFDSjtBQUNGO0FBQ0U7QUFDSjtBQUM5QywrQ0FBK0MsaUVBQWlFO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLFlBQVksMEJBQTBCLEVBQUUsc0VBQWE7QUFDckQ7QUFDQTtBQUNBLEtBQUs7QUFDTCxpQkFBaUIsMEVBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQSxzQkFBc0Isa0VBQVU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0Esb0VBQW9FO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxNQUFNO0FBQ04sUUFBUSxzRUFBVztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlSm9icy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRTb3J0UGFyYW0gfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRTb3J0UGFyYW0uanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyBoYW5kbGVFcnJvciB9IGZyb20gJy4vdXRpbGl0aWVzL2hhbmRsZUVycm9yLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgdXBkYXRlSm9icyA9IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1hbnkoeyBpZCwgZGF0YSwgbGltaXQsIHJlcSwgcmV0dXJuaW5nLCBzb3J0OiBzb3J0QXJnLCB3aGVyZTogd2hlcmVBcmcgfSkge1xuICAgIGlmICghZGF0YT8ubG9nPy5sZW5ndGgpIHtcbiAgICAgICAgZGVsZXRlIGRhdGEubG9nO1xuICAgIH1cbiAgICBjb25zdCB3aGVyZSA9IGlkID8ge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgZXF1YWxzOiBpZFxuICAgICAgICB9XG4gICAgfSA6IHdoZXJlQXJnO1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZzogJ3BheWxvYWQtam9icydcbiAgICB9KTtcbiAgICBjb25zdCBzb3J0ID0gYnVpbGRTb3J0UGFyYW0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb25maWc6IHRoaXMucGF5bG9hZC5jb25maWcsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIHNvcnQ6IHNvcnRBcmcgfHwgY29sbGVjdGlvbkNvbmZpZy5kZWZhdWx0U29ydCxcbiAgICAgICAgdGltZXN0YW1wczogdHJ1ZVxuICAgIH0pO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIG5ldzogdHJ1ZSxcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBsZXQgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWc6IGNvbGxlY3Rpb25Db25maWcuc2x1ZyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICd3cml0ZSdcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IE1vZGVsLnVwZGF0ZU9uZShxdWVyeSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRPbmVBbmRVcGRhdGUocXVlcnksIGRhdGEsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYyA/IFtcbiAgICAgICAgICAgICAgICAgICAgZG9jXG4gICAgICAgICAgICAgICAgXSA6IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBsaW1pdCA9PT0gJ251bWJlcicgJiYgbGltaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRzVG9VcGRhdGUgPSBhd2FpdCBNb2RlbC5maW5kKHF1ZXJ5LCB7fSwge1xuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiAxXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNvcnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnRzVG9VcGRhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxdWVyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW46IGRvY3VtZW50c1RvVXBkYXRlLm1hcCgoZG9jKT0+ZG9jLl9pZClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBNb2RlbC51cGRhdGVNYW55KHF1ZXJ5LCBkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChyZXR1cm5pbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5maW5kKHF1ZXJ5LCB7fSwge1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgc29ydFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcih7XG4gICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uQ29uZmlnLnNsdWcsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIHJlcVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGVKb2JzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateJobs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateMany.js":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateMany.js ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateMany: () => (/* binding */ updateMany)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_handleError_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/handleError.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\n\nconst updateMany = async function updateMany({ collection: collectionSlug, data, limit, locale, options: optionsArgs = {}, req, returning, select, sort: sortArg, where }) {\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_0__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    let sort;\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields: collectionConfig.flattenedFields,\n            locale,\n            sort: sortArg || collectionConfig.defaultSort,\n            timestamps: true\n        });\n    }\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_3__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: collectionConfig.flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_4__.getSession)(this, req)\n    };\n    let query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__.transform)({\n        adapter: this,\n        data,\n        fields: collectionConfig.fields,\n        operation: 'write'\n    });\n    try {\n        if (typeof limit === 'number' && limit > 0) {\n            const documentsToUpdate = await Model.find(query, {}, {\n                ...options,\n                limit,\n                projection: {\n                    _id: 1\n                },\n                sort\n            });\n            if (documentsToUpdate.length === 0) {\n                return null;\n            }\n            query = {\n                _id: {\n                    $in: documentsToUpdate.map((doc)=>doc._id)\n                }\n            };\n        }\n        await Model.updateMany(query, data, options);\n    } catch (error) {\n        (0,_utilities_handleError_js__WEBPACK_IMPORTED_MODULE_7__.handleError)({\n            collection: collectionSlug,\n            error,\n            req\n        });\n    }\n    if (returning === false) {\n        return null;\n    }\n    const result = await Model.find(query, {}, {\n        ...options,\n        sort\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__.transform)({\n        adapter: this,\n        data: result,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=updateMany.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlTWFueS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDRztBQUNRO0FBQ3dCO0FBQzVCO0FBQ0Y7QUFDRTtBQUNKO0FBQzlDLCtDQUErQywwRUFBMEUsZ0RBQWdEO0FBQ2hMO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQXVCO0FBQ25EO0FBQ0E7QUFDQSxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGVBQWUsMEVBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0dBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQSxzQkFBc0Isa0VBQVU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdFQUFnRTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixRQUFRLHNFQUFXO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVNYW55LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRTb3J0UGFyYW0gfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRTb3J0UGFyYW0uanMnO1xuaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyBoYW5kbGVFcnJvciB9IGZyb20gJy4vdXRpbGl0aWVzL2hhbmRsZUVycm9yLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgdXBkYXRlTWFueSA9IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1hbnkoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgZGF0YSwgbGltaXQsIGxvY2FsZSwgb3B0aW9uczogb3B0aW9uc0FyZ3MgPSB7fSwgcmVxLCByZXR1cm5pbmcsIHNlbGVjdCwgc29ydDogc29ydEFyZywgd2hlcmUgfSkge1xuICAgIGxldCBoYXNOZWFyQ29uc3RyYWludCA9IGZhbHNlO1xuICAgIGlmICh3aGVyZSkge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzKHdoZXJlKTtcbiAgICAgICAgaGFzTmVhckNvbnN0cmFpbnQgPSBjb25zdHJhaW50cy5zb21lKChwcm9wKT0+T2JqZWN0LmtleXMocHJvcCkuc29tZSgoa2V5KT0+a2V5ID09PSAnbmVhcicpKTtcbiAgICB9XG4gICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnLCBNb2RlbCB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnXG4gICAgfSk7XG4gICAgbGV0IHNvcnQ7XG4gICAgaWYgKCFoYXNOZWFyQ29uc3RyYWludCkge1xuICAgICAgICBzb3J0ID0gYnVpbGRTb3J0UGFyYW0oe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5wYXlsb2FkLmNvbmZpZyxcbiAgICAgICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBzb3J0OiBzb3J0QXJnIHx8IGNvbGxlY3Rpb25Db25maWcuZGVmYXVsdFNvcnQsXG4gICAgICAgICAgICB0aW1lc3RhbXBzOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAuLi5vcHRpb25zQXJncyxcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICBwcm9qZWN0aW9uOiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgc2VsZWN0XG4gICAgICAgIH0pLFxuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGxldCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5maWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3dyaXRlJ1xuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgbGltaXQgPT09ICdudW1iZXInICYmIGxpbWl0ID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRzVG9VcGRhdGUgPSBhd2FpdCBNb2RlbC5maW5kKHF1ZXJ5LCB7fSwge1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgbGltaXQsXG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNvcnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50c1RvVXBkYXRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVlcnkgPSB7XG4gICAgICAgICAgICAgICAgX2lkOiB7XG4gICAgICAgICAgICAgICAgICAgICRpbjogZG9jdW1lbnRzVG9VcGRhdGUubWFwKChkb2MpPT5kb2MuX2lkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgTW9kZWwudXBkYXRlTWFueShxdWVyeSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvblNsdWcsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIHJlcVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJldHVybmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE1vZGVsLmZpbmQocXVlcnksIHt9LCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIHNvcnRcbiAgICB9KTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5maWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZU1hbnkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateMany.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateOne.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateOne.js ***!
  \*****************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateOne: () => (/* binding */ updateOne)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_handleError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/handleError.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nconst updateOne = async function updateOne({ id, collection: collectionSlug, data, locale, options: optionsArgs = {}, req, returning, select, where: whereArg = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const where = id ? {\n        id: {\n            equals: id\n        }\n    } : whereArg;\n    const fields = collectionConfig.fields;\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: collectionConfig.flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    let result;\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data,\n        fields,\n        operation: 'write'\n    });\n    try {\n        if (returning === false) {\n            await Model.updateOne(query, data, options);\n            return null;\n        } else {\n            result = await Model.findOneAndUpdate(query, data, options);\n        }\n    } catch (error) {\n        (0,_utilities_handleError_js__WEBPACK_IMPORTED_MODULE_5__.handleError)({\n            collection: collectionSlug,\n            error,\n            req\n        });\n    }\n    if (!result) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data: result,\n        fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=updateOne.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlT25lLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBcUQ7QUFDZ0M7QUFDNUI7QUFDRjtBQUNFO0FBQ0o7QUFDOUMsNkNBQTZDLHVFQUF1RSxnREFBZ0Q7QUFDM0ssWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0dBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQSx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsTUFBTTtBQUNOLFFBQVEsc0VBQVc7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3VwZGF0ZU9uZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyBoYW5kbGVFcnJvciB9IGZyb20gJy4vdXRpbGl0aWVzL2hhbmRsZUVycm9yLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgdXBkYXRlT25lID0gYXN5bmMgZnVuY3Rpb24gdXBkYXRlT25lKHsgaWQsIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBkYXRhLCBsb2NhbGUsIG9wdGlvbnM6IG9wdGlvbnNBcmdzID0ge30sIHJlcSwgcmV0dXJuaW5nLCBzZWxlY3QsIHdoZXJlOiB3aGVyZUFyZyA9IHt9IH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWdcbiAgICB9KTtcbiAgICBjb25zdCB3aGVyZSA9IGlkID8ge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgZXF1YWxzOiBpZFxuICAgICAgICB9XG4gICAgfSA6IHdoZXJlQXJnO1xuICAgIGNvbnN0IGZpZWxkcyA9IGNvbGxlY3Rpb25Db25maWcuZmllbGRzO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIC4uLm9wdGlvbnNBcmdzLFxuICAgICAgICBsZWFuOiB0cnVlLFxuICAgICAgICBuZXc6IHRydWUsXG4gICAgICAgIHByb2plY3Rpb246IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3Qoe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSksXG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAnd3JpdGUnXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHJldHVybmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGF3YWl0IE1vZGVsLnVwZGF0ZU9uZShxdWVyeSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IE1vZGVsLmZpbmRPbmVBbmRVcGRhdGUocXVlcnksIGRhdGEsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvblNsdWcsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIHJlcVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGVPbmUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateOne.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateVersion.js":
/*!*********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateVersion.js ***!
  \*********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateVersion: () => (/* binding */ updateVersion)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nconst updateVersion = async function updateVersion({ id, collection: collectionSlug, locale, options: optionsArgs = {}, req, returning, select, versionData, where }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const whereToUse = where || {\n        id: {\n            equals: id\n        }\n    };\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionCollectionFields)(this.payload.config, collectionConfig);\n    const flattenedFields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true);\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_2__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_3__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__.buildQuery)({\n        adapter: this,\n        fields: flattenedFields,\n        locale,\n        where: whereToUse\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: versionData,\n        fields,\n        operation: 'write'\n    });\n    if (returning === false) {\n        await Model.updateOne(query, versionData, options);\n        return null;\n    }\n    const doc = await Model.findOneAndUpdate(query, versionData, options);\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: doc,\n        fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=updateVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlVmVyc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXVEO0FBQ0Y7QUFDZ0M7QUFDNUI7QUFDRjtBQUNGO0FBQzlDLHFEQUFxRCxpRUFBaUUsOENBQThDO0FBQzNLLFlBQVksMEJBQTBCLEVBQUUsc0VBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUVBQTRCO0FBQy9DLDRCQUE0QixxRUFBNEI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0dBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQSx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlVmVyc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVZlcnNpb24gPSBhc3luYyBmdW5jdGlvbiB1cGRhdGVWZXJzaW9uKHsgaWQsIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBsb2NhbGUsIG9wdGlvbnM6IG9wdGlvbnNBcmdzID0ge30sIHJlcSwgcmV0dXJuaW5nLCBzZWxlY3QsIHZlcnNpb25EYXRhLCB3aGVyZSB9KSB7XG4gICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnLCBNb2RlbCB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICB2ZXJzaW9uczogdHJ1ZVxuICAgIH0pO1xuICAgIGNvbnN0IHdoZXJlVG9Vc2UgPSB3aGVyZSB8fCB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICBlcXVhbHM6IGlkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGZpZWxkcyA9IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgY29sbGVjdGlvbkNvbmZpZyk7XG4gICAgY29uc3QgZmxhdHRlbmVkRmllbGRzID0gYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBjb2xsZWN0aW9uQ29uZmlnLCB0cnVlKTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAuLi5vcHRpb25zQXJncyxcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICBwcm9qZWN0aW9uOiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHM6IGZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgIHNlbGVjdFxuICAgICAgICB9KSxcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBmaWVsZHM6IGZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZTogd2hlcmVUb1VzZVxuICAgIH0pO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IHZlcnNpb25EYXRhLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3dyaXRlJ1xuICAgIH0pO1xuICAgIGlmIChyZXR1cm5pbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIGF3YWl0IE1vZGVsLnVwZGF0ZU9uZShxdWVyeSwgdmVyc2lvbkRhdGEsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZG9jID0gYXdhaXQgTW9kZWwuZmluZE9uZUFuZFVwZGF0ZShxdWVyeSwgdmVyc2lvbkRhdGEsIG9wdGlvbnMpO1xuICAgIGlmICghZG9jKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiBkb2MsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gZG9jO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRlVmVyc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/updateVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/upsert.js":
/*!**************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/upsert.js ***!
  \**************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   upsert: () => (/* binding */ upsert)\n/* harmony export */ });\nconst upsert = async function upsert({ collection, data, locale, req, returning, select, where }) {\n    return this.updateOne({\n        collection,\n        data,\n        locale,\n        options: {\n            upsert: true\n        },\n        req,\n        returning,\n        select,\n        where\n    });\n};\n\n//# sourceMappingURL=upsert.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBzZXJ0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyx1Q0FBdUMseURBQXlEO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBzZXJ0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB1cHNlcnQgPSBhc3luYyBmdW5jdGlvbiB1cHNlcnQoeyBjb2xsZWN0aW9uLCBkYXRhLCBsb2NhbGUsIHJlcSwgcmV0dXJuaW5nLCBzZWxlY3QsIHdoZXJlIH0pIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVPbmUoe1xuICAgICAgICBjb2xsZWN0aW9uLFxuICAgICAgICBkYXRhLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHVwc2VydDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICByZXEsXG4gICAgICAgIHJldHVybmluZyxcbiAgICAgICAgc2VsZWN0LFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBzZXJ0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/upsert.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js":
/*!***********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js ***!
  \***********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aggregatePaginate: () => (/* binding */ aggregatePaginate)\n/* harmony export */ });\nconst aggregatePaginate = async ({ adapter, collation, joinAggregation, limit, Model, page, pagination, projection, query, session, sort, sortAggregation, useEstimatedCount })=>{\n    const aggregation = [\n        {\n            $match: query\n        }\n    ];\n    if (sortAggregation && sortAggregation.length > 0) {\n        for (const stage of sortAggregation){\n            aggregation.push(stage);\n        }\n    }\n    if (sort) {\n        const $sort = {};\n        Object.entries(sort).forEach(([key, value])=>{\n            $sort[key] = value === 'desc' ? -1 : 1;\n        });\n        aggregation.push({\n            $sort\n        });\n    }\n    if (page) {\n        aggregation.push({\n            $skip: (page - 1) * (limit ?? 0)\n        });\n    }\n    if (limit) {\n        aggregation.push({\n            $limit: limit\n        });\n    }\n    if (joinAggregation) {\n        for (const stage of joinAggregation){\n            aggregation.push(stage);\n        }\n    }\n    if (projection) {\n        aggregation.push({\n            $project: projection\n        });\n    }\n    let countPromise = Promise.resolve(null);\n    if (pagination !== false && limit) {\n        if (useEstimatedCount) {\n            countPromise = Model.estimatedDocumentCount(query);\n        } else {\n            const hint = adapter.disableIndexHints !== true ? {\n                _id: 1\n            } : undefined;\n            countPromise = Model.countDocuments(query, {\n                collation,\n                hint,\n                session\n            });\n        }\n    }\n    const [docs, countResult] = await Promise.all([\n        Model.aggregate(aggregation, {\n            collation,\n            session\n        }),\n        countPromise\n    ]);\n    const count = countResult === null ? docs.length : countResult;\n    const totalPages = pagination !== false && typeof limit === 'number' && limit !== 0 ? Math.ceil(count / limit) : 1;\n    const hasPrevPage = typeof page === 'number' && pagination !== false && page > 1;\n    const hasNextPage = typeof page === 'number' && pagination !== false && totalPages > page;\n    const pagingCounter = typeof page === 'number' && pagination !== false && typeof limit === 'number' ? (page - 1) * limit + 1 : 1;\n    const result = {\n        docs,\n        hasNextPage,\n        hasPrevPage,\n        limit: limit ?? 0,\n        nextPage: hasNextPage ? page + 1 : null,\n        page,\n        pagingCounter,\n        prevPage: hasPrevPage ? page - 1 : null,\n        totalDocs: count,\n        totalPages\n    };\n    return result;\n};\n\n//# sourceMappingURL=aggregatePaginate.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2FnZ3JlZ2F0ZVBhZ2luYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxtQ0FBbUMsMklBQTJJO0FBQ3JMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWNrL0Rlc2t0b3AvQnVzaW5lc3MvUGF5bG9hZENNUy9wYXlsb2FkLXN0b3JhZ2UtY2xvdWRpbmFyeS9kZXYvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40NC4wX3BheWxvYWRAMy40NC4wX2dyYXBocWxAMTYuMTEuMF90eXBlc2NyaXB0QDUuOC4zXy9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3V0aWxpdGllcy9hZ2dyZWdhdGVQYWdpbmF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgYWdncmVnYXRlUGFnaW5hdGUgPSBhc3luYyAoeyBhZGFwdGVyLCBjb2xsYXRpb24sIGpvaW5BZ2dyZWdhdGlvbiwgbGltaXQsIE1vZGVsLCBwYWdlLCBwYWdpbmF0aW9uLCBwcm9qZWN0aW9uLCBxdWVyeSwgc2Vzc2lvbiwgc29ydCwgc29ydEFnZ3JlZ2F0aW9uLCB1c2VFc3RpbWF0ZWRDb3VudCB9KT0+e1xuICAgIGNvbnN0IGFnZ3JlZ2F0aW9uID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICAkbWF0Y2g6IHF1ZXJ5XG4gICAgICAgIH1cbiAgICBdO1xuICAgIGlmIChzb3J0QWdncmVnYXRpb24gJiYgc29ydEFnZ3JlZ2F0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBzdGFnZSBvZiBzb3J0QWdncmVnYXRpb24pe1xuICAgICAgICAgICAgYWdncmVnYXRpb24ucHVzaChzdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNvcnQpIHtcbiAgICAgICAgY29uc3QgJHNvcnQgPSB7fTtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoc29ydCkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKT0+e1xuICAgICAgICAgICAgJHNvcnRba2V5XSA9IHZhbHVlID09PSAnZGVzYycgPyAtMSA6IDE7XG4gICAgICAgIH0pO1xuICAgICAgICBhZ2dyZWdhdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICRzb3J0XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocGFnZSkge1xuICAgICAgICBhZ2dyZWdhdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICRza2lwOiAocGFnZSAtIDEpICogKGxpbWl0ID8/IDApXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAobGltaXQpIHtcbiAgICAgICAgYWdncmVnYXRpb24ucHVzaCh7XG4gICAgICAgICAgICAkbGltaXQ6IGxpbWl0XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoam9pbkFnZ3JlZ2F0aW9uKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc3RhZ2Ugb2Ygam9pbkFnZ3JlZ2F0aW9uKXtcbiAgICAgICAgICAgIGFnZ3JlZ2F0aW9uLnB1c2goc3RhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGFnZ3JlZ2F0aW9uLnB1c2goe1xuICAgICAgICAgICAgJHByb2plY3Q6IHByb2plY3Rpb25cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBjb3VudFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgaWYgKHBhZ2luYXRpb24gIT09IGZhbHNlICYmIGxpbWl0KSB7XG4gICAgICAgIGlmICh1c2VFc3RpbWF0ZWRDb3VudCkge1xuICAgICAgICAgICAgY291bnRQcm9taXNlID0gTW9kZWwuZXN0aW1hdGVkRG9jdW1lbnRDb3VudChxdWVyeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBoaW50ID0gYWRhcHRlci5kaXNhYmxlSW5kZXhIaW50cyAhPT0gdHJ1ZSA/IHtcbiAgICAgICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb3VudFByb21pc2UgPSBNb2RlbC5jb3VudERvY3VtZW50cyhxdWVyeSwge1xuICAgICAgICAgICAgICAgIGNvbGxhdGlvbixcbiAgICAgICAgICAgICAgICBoaW50LFxuICAgICAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IFtkb2NzLCBjb3VudFJlc3VsdF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIE1vZGVsLmFnZ3JlZ2F0ZShhZ2dyZWdhdGlvbiwge1xuICAgICAgICAgICAgY29sbGF0aW9uLFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9KSxcbiAgICAgICAgY291bnRQcm9taXNlXG4gICAgXSk7XG4gICAgY29uc3QgY291bnQgPSBjb3VudFJlc3VsdCA9PT0gbnVsbCA/IGRvY3MubGVuZ3RoIDogY291bnRSZXN1bHQ7XG4gICAgY29uc3QgdG90YWxQYWdlcyA9IHBhZ2luYXRpb24gIT09IGZhbHNlICYmIHR5cGVvZiBsaW1pdCA9PT0gJ251bWJlcicgJiYgbGltaXQgIT09IDAgPyBNYXRoLmNlaWwoY291bnQgLyBsaW1pdCkgOiAxO1xuICAgIGNvbnN0IGhhc1ByZXZQYWdlID0gdHlwZW9mIHBhZ2UgPT09ICdudW1iZXInICYmIHBhZ2luYXRpb24gIT09IGZhbHNlICYmIHBhZ2UgPiAxO1xuICAgIGNvbnN0IGhhc05leHRQYWdlID0gdHlwZW9mIHBhZ2UgPT09ICdudW1iZXInICYmIHBhZ2luYXRpb24gIT09IGZhbHNlICYmIHRvdGFsUGFnZXMgPiBwYWdlO1xuICAgIGNvbnN0IHBhZ2luZ0NvdW50ZXIgPSB0eXBlb2YgcGFnZSA9PT0gJ251bWJlcicgJiYgcGFnaW5hdGlvbiAhPT0gZmFsc2UgJiYgdHlwZW9mIGxpbWl0ID09PSAnbnVtYmVyJyA/IChwYWdlIC0gMSkgKiBsaW1pdCArIDEgOiAxO1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgZG9jcyxcbiAgICAgICAgaGFzTmV4dFBhZ2UsXG4gICAgICAgIGhhc1ByZXZQYWdlLFxuICAgICAgICBsaW1pdDogbGltaXQgPz8gMCxcbiAgICAgICAgbmV4dFBhZ2U6IGhhc05leHRQYWdlID8gcGFnZSArIDEgOiBudWxsLFxuICAgICAgICBwYWdlLFxuICAgICAgICBwYWdpbmdDb3VudGVyLFxuICAgICAgICBwcmV2UGFnZTogaGFzUHJldlBhZ2UgPyBwYWdlIC0gMSA6IG51bGwsXG4gICAgICAgIHRvdGFsRG9jczogY291bnQsXG4gICAgICAgIHRvdGFsUGFnZXNcbiAgICB9O1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2dyZWdhdGVQYWdpbmF0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js ***!
  \**************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildJoinAggregation: () => (/* binding */ buildJoinAggregation)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/drafts/getQueryDraftsSort.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/database/combineQueries.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/versions/drafts/appendVersionToQueryKey.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/fields/config/types.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _getEntity_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n\n\n\n\n\nconst buildJoinAggregation = async ({ adapter, collection, collectionConfig, draftsEnabled, joins, locale, projection, versions })=>{\n    if (Object.keys(collectionConfig.joins).length === 0 && collectionConfig.polymorphicJoins.length == 0 || joins === false) {\n        return;\n    }\n    const joinConfig = adapter.payload.collections[collection]?.config?.joins;\n    if (!joinConfig) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Could not retrieve sanitized join config for ${collection}.`);\n    }\n    const aggregate = [];\n    const polymorphicJoinsConfig = adapter.payload.collections[collection]?.config?.polymorphicJoins;\n    if (!polymorphicJoinsConfig) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Could not retrieve sanitized polymorphic joins config for ${collection}.`);\n    }\n    for (const join of polymorphicJoinsConfig){\n        if (projection && !projection[join.joinPath]) {\n            continue;\n        }\n        if (joins?.[join.joinPath] === false) {\n            continue;\n        }\n        const { count = false, limit: limitJoin = join.field.defaultLimit ?? 10, page, sort: sortJoin = join.field.defaultSort || collectionConfig.defaultSort, where: whereJoin = {} } = joins?.[join.joinPath] || {};\n        const aggregatedFields = [];\n        for (const collectionSlug of join.field.collection){\n            const { collectionConfig } = (0,_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n                adapter,\n                collectionSlug\n            });\n            for (const field of collectionConfig.flattenedFields){\n                if (!aggregatedFields.some((eachField)=>eachField.name === field.name)) {\n                    aggregatedFields.push(field);\n                }\n            }\n        }\n        const sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__.buildSortParam)({\n            adapter,\n            config: adapter.payload.config,\n            fields: aggregatedFields,\n            locale,\n            sort: sortJoin,\n            timestamps: true\n        });\n        const $match = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n            adapter,\n            fields: aggregatedFields,\n            locale,\n            where: whereJoin\n        });\n        const sortProperty = Object.keys(sort)[0]// assert because buildSortParam always returns at least 1 key.\n        ;\n        const sortDirection = sort[sortProperty] === 'asc' ? 1 : -1;\n        const projectSort = sortProperty !== '_id' && sortProperty !== 'relationTo';\n        const aliases = [];\n        const as = join.joinPath;\n        for (const collectionSlug of join.field.collection){\n            const alias = `${as}.docs.${collectionSlug}`;\n            aliases.push(alias);\n            const basePipeline = [\n                {\n                    $addFields: {\n                        relationTo: {\n                            $literal: collectionSlug\n                        }\n                    }\n                },\n                {\n                    $match: {\n                        $and: [\n                            {\n                                $expr: {\n                                    $eq: [\n                                        `$${join.field.on}`,\n                                        '$$root_id_'\n                                    ]\n                                }\n                            },\n                            $match\n                        ]\n                    }\n                }\n            ];\n            const { Model: JoinModel } = (0,_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n                adapter,\n                collectionSlug\n            });\n            aggregate.push({\n                $lookup: {\n                    as: alias,\n                    from: JoinModel.collection.name,\n                    let: {\n                        root_id_: '$_id'\n                    },\n                    pipeline: [\n                        ...basePipeline,\n                        {\n                            $sort: {\n                                [sortProperty]: sortDirection\n                            }\n                        },\n                        {\n                            // Unfortunately, we can't use $skip here because we can lose data, instead we do $slice then\n                            $limit: page ? page * limitJoin : limitJoin\n                        },\n                        {\n                            $project: {\n                                value: '$_id',\n                                ...projectSort && {\n                                    [sortProperty]: 1\n                                },\n                                relationTo: 1\n                            }\n                        }\n                    ]\n                }\n            });\n            if (count) {\n                aggregate.push({\n                    $lookup: {\n                        as: `${as}.totalDocs.${alias}`,\n                        from: JoinModel.collection.name,\n                        let: {\n                            root_id_: '$_id'\n                        },\n                        pipeline: [\n                            ...basePipeline,\n                            {\n                                $count: 'result'\n                            }\n                        ]\n                    }\n                });\n            }\n        }\n        aggregate.push({\n            $addFields: {\n                [`${as}.docs`]: {\n                    $concatArrays: aliases.map((alias)=>`$${alias}`)\n                }\n            }\n        });\n        if (count) {\n            aggregate.push({\n                $addFields: {\n                    [`${as}.totalDocs`]: {\n                        $add: aliases.map((alias)=>({\n                                $ifNull: [\n                                    {\n                                        $first: `$${as}.totalDocs.${alias}.result`\n                                    },\n                                    0\n                                ]\n                            }))\n                    }\n                }\n            });\n        }\n        aggregate.push({\n            $set: {\n                [`${as}.docs`]: {\n                    $sortArray: {\n                        input: `$${as}.docs`,\n                        sortBy: {\n                            [sortProperty]: sortDirection\n                        }\n                    }\n                }\n            }\n        });\n        const sliceValue = page ? [\n            (page - 1) * limitJoin,\n            limitJoin\n        ] : [\n            limitJoin\n        ];\n        aggregate.push({\n            $addFields: {\n                [`${as}.hasNextPage`]: {\n                    $gt: [\n                        {\n                            $size: `$${as}.docs`\n                        },\n                        limitJoin || Number.MAX_VALUE\n                    ]\n                }\n            }\n        });\n        aggregate.push({\n            $set: {\n                [`${as}.docs`]: {\n                    $slice: [\n                        `$${as}.docs`,\n                        ...sliceValue\n                    ]\n                }\n            }\n        });\n    }\n    for (const slug of Object.keys(joinConfig)){\n        const joinsList = joinConfig[slug];\n        if (!joinsList) {\n            throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Failed to retrieve array of joins for ${slug} in collectio ${collection}`);\n        }\n        for (const join of joinsList){\n            if (projection && !projection[join.joinPath]) {\n                continue;\n            }\n            if (joins?.[join.joinPath] === false) {\n                continue;\n            }\n            const collectionConfig = adapter.payload.collections[join.field.collection]?.config;\n            if (!collectionConfig) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Collection config for ${join.field.collection.toString()} was not found`);\n            }\n            let JoinModel;\n            const useDrafts = (draftsEnabled || versions) && Boolean(collectionConfig.versions.drafts);\n            if (useDrafts) {\n                JoinModel = adapter.versions[collectionConfig.slug];\n            } else {\n                JoinModel = adapter.collections[collectionConfig.slug];\n            }\n            if (!JoinModel) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Join Model was not found for ${collectionConfig.slug}`);\n            }\n            const { count, limit: limitJoin = join.field.defaultLimit ?? 10, page, sort: sortJoin = join.field.defaultSort || collectionConfig.defaultSort, where: whereJoin = {} } = joins?.[join.joinPath] || {};\n            if (Array.isArray(join.field.collection)) {\n                throw new Error('Unreachable');\n            }\n            const fields = useDrafts ? (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(adapter.payload.config, collectionConfig, true) : collectionConfig.flattenedFields;\n            const sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__.buildSortParam)({\n                adapter,\n                config: adapter.payload.config,\n                fields,\n                locale,\n                sort: useDrafts ? (0,payload__WEBPACK_IMPORTED_MODULE_5__.getQueryDraftsSort)({\n                    collectionConfig,\n                    sort: sortJoin\n                }) : sortJoin,\n                timestamps: true\n            });\n            const sortProperty = Object.keys(sort)[0];\n            const sortDirection = sort[sortProperty] === 'asc' ? 1 : -1;\n            const $match = await JoinModel.buildQuery({\n                locale,\n                payload: adapter.payload,\n                where: useDrafts ? (0,payload__WEBPACK_IMPORTED_MODULE_6__.combineQueries)((0,payload__WEBPACK_IMPORTED_MODULE_7__.appendVersionToQueryKey)(whereJoin), {\n                    latest: {\n                        equals: true\n                    }\n                }) : whereJoin\n            });\n            const pipeline = [\n                {\n                    $match\n                },\n                {\n                    $sort: {\n                        [sortProperty]: sortDirection\n                    }\n                }\n            ];\n            if (page) {\n                pipeline.push({\n                    $skip: (page - 1) * limitJoin\n                });\n            }\n            if (limitJoin > 0) {\n                pipeline.push({\n                    $limit: limitJoin + 1\n                });\n            }\n            let polymorphicSuffix = '';\n            if (Array.isArray(join.targetField.relationTo)) {\n                polymorphicSuffix = '.value';\n            }\n            const addTotalDocsAggregation = (as, foreignField)=>aggregate.push({\n                    $lookup: {\n                        as: `${as}.totalDocs`,\n                        foreignField,\n                        from: JoinModel.collection.name,\n                        localField: versions ? 'parent' : '_id',\n                        pipeline: [\n                            {\n                                $match\n                            },\n                            {\n                                $count: 'result'\n                            }\n                        ]\n                    }\n                }, {\n                    $addFields: {\n                        [`${as}.totalDocs`]: {\n                            $ifNull: [\n                                {\n                                    $first: `$${as}.totalDocs.result`\n                                },\n                                0\n                            ]\n                        }\n                    }\n                });\n            let foreignFieldPrefix = '';\n            if (useDrafts) {\n                foreignFieldPrefix = 'version.';\n            }\n            if (adapter.payload.config.localization && locale === 'all') {\n                adapter.payload.config.localization.localeCodes.forEach((code)=>{\n                    const as = `${versions ? `version.${join.joinPath}` : join.joinPath}${code}`;\n                    aggregate.push({\n                        $lookup: {\n                            as: `${as}.docs`,\n                            foreignField: `${foreignFieldPrefix}${join.field.on}${code}${polymorphicSuffix}`,\n                            from: JoinModel.collection.name,\n                            localField: versions ? 'parent' : '_id',\n                            pipeline\n                        }\n                    }, {\n                        $addFields: {\n                            [`${as}.docs`]: {\n                                $map: {\n                                    as: 'doc',\n                                    in: useDrafts ? `$$doc.parent` : '$$doc._id',\n                                    input: `$${as}.docs`\n                                }\n                            },\n                            [`${as}.hasNextPage`]: limitJoin ? {\n                                $gt: [\n                                    {\n                                        $size: `$${as}.docs`\n                                    },\n                                    limitJoin\n                                ]\n                            } : false\n                        }\n                    });\n                    if (limitJoin > 0) {\n                        aggregate.push({\n                            $addFields: {\n                                [`${as}.docs`]: {\n                                    $slice: [\n                                        `$${as}.docs`,\n                                        limitJoin\n                                    ]\n                                }\n                            }\n                        });\n                    }\n                    if (count) {\n                        addTotalDocsAggregation(as, `${foreignFieldPrefix}${join.field.on}${code}${polymorphicSuffix}`);\n                    }\n                });\n            } else {\n                const localeSuffix = (0,payload_shared__WEBPACK_IMPORTED_MODULE_8__.fieldShouldBeLocalized)({\n                    field: join.field,\n                    parentIsLocalized: join.parentIsLocalized\n                }) && adapter.payload.config.localization && locale ? `.${locale}` : '';\n                const as = `${versions ? `version.${join.joinPath}` : join.joinPath}${localeSuffix}`;\n                let foreignField;\n                if (join.getForeignPath) {\n                    foreignField = `${join.getForeignPath({\n                        locale\n                    })}${polymorphicSuffix}`;\n                } else {\n                    foreignField = `${join.field.on}${polymorphicSuffix}`;\n                }\n                aggregate.push({\n                    $lookup: {\n                        as: `${as}.docs`,\n                        foreignField: `${foreignFieldPrefix}${foreignField}`,\n                        from: JoinModel.collection.name,\n                        localField: versions ? 'parent' : '_id',\n                        pipeline\n                    }\n                }, {\n                    $addFields: {\n                        [`${as}.docs`]: {\n                            $map: {\n                                as: 'doc',\n                                in: useDrafts ? `$$doc.parent` : '$$doc._id',\n                                input: `$${as}.docs`\n                            }\n                        },\n                        [`${as}.hasNextPage`]: {\n                            $gt: [\n                                {\n                                    $size: `$${as}.docs`\n                                },\n                                limitJoin || Number.MAX_VALUE\n                            ]\n                        }\n                    }\n                });\n                if (count) {\n                    addTotalDocsAggregation(as, `${foreignFieldPrefix}${foreignField}`);\n                }\n                if (limitJoin > 0) {\n                    aggregate.push({\n                        $addFields: {\n                            [`${as}.docs`]: {\n                                $slice: [\n                                    `$${as}.docs`,\n                                    limitJoin\n                                ]\n                            }\n                        }\n                    });\n                }\n            }\n        }\n    }\n    return aggregate;\n};\n\n//# sourceMappingURL=buildJoinAggregation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2J1aWxkSm9pbkFnZ3JlZ2F0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBOEg7QUFDdEU7QUFDRjtBQUNRO0FBQ2Y7QUFDeEMsc0NBQXNDLDJGQUEyRjtBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZDQUFRLGlEQUFpRCxXQUFXO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZDQUFRLDhEQUE4RCxXQUFXO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0tBQXdLO0FBQ3hMO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CLEVBQUUsNERBQWE7QUFDdEQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMEVBQWM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDZCQUE2QixrRUFBVTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixHQUFHLFFBQVEsZUFBZTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxjQUFjO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1CQUFtQixFQUFFLDREQUFhO0FBQ3REO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixHQUFHLGFBQWEsTUFBTTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsR0FBRztBQUN2Qiw0REFBNEQsTUFBTTtBQUNsRTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixHQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxHQUFHLGFBQWEsTUFBTTtBQUMxRSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixHQUFHO0FBQ3ZCO0FBQ0EsbUNBQW1DLEdBQUc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsR0FBRztBQUN2QjtBQUNBO0FBQ0EsdUNBQXVDLEdBQUc7QUFDMUMseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0IsR0FBRztBQUN2QjtBQUNBLDRCQUE0QixHQUFHO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZDQUFRLDBDQUEwQyxNQUFNLGVBQWUsV0FBVztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2Q0FBUSwwQkFBMEIsa0NBQWtDO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZDQUFRLGlDQUFpQyxzQkFBc0I7QUFDekY7QUFDQSxvQkFBb0IsZ0tBQWdLO0FBQ3BMO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxxRUFBNEI7QUFDbkUseUJBQXlCLDBFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJEQUFrQjtBQUNwRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdURBQWMsQ0FBQyxnRUFBdUI7QUFDekU7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLEdBQUc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSw0QkFBNEIsR0FBRztBQUMvQjtBQUNBO0FBQ0EsZ0RBQWdELEdBQUc7QUFDbkQsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxzQkFBc0IsY0FBYyxrQkFBa0IsRUFBRSxLQUFLO0FBQy9GO0FBQ0E7QUFDQSxtQ0FBbUMsR0FBRztBQUN0Qyw2Q0FBNkMsbUJBQW1CLEVBQUUsY0FBYyxFQUFFLEtBQUssRUFBRSxrQkFBa0I7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxnQ0FBZ0MsR0FBRztBQUNuQztBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsR0FBRztBQUNsRDtBQUNBLDZCQUE2QjtBQUM3QixnQ0FBZ0MsR0FBRztBQUNuQztBQUNBO0FBQ0EsbURBQW1ELEdBQUc7QUFDdEQscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLEdBQUc7QUFDdkM7QUFDQSw0Q0FBNEMsR0FBRztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsdURBQXVELG1CQUFtQixFQUFFLGNBQWMsRUFBRSxLQUFLLEVBQUUsa0JBQWtCO0FBQ3JIO0FBQ0EsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZCxxQ0FBcUMsc0VBQXNCO0FBQzNEO0FBQ0E7QUFDQSxpQkFBaUIseURBQXlELE9BQU87QUFDakYsOEJBQThCLHNCQUFzQixjQUFjLGtCQUFrQixFQUFFLGFBQWE7QUFDbkc7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBLHFCQUFxQixFQUFFLEVBQUUsa0JBQWtCO0FBQzNDLGtCQUFrQjtBQUNsQixzQ0FBc0MsY0FBYyxFQUFFLGtCQUFrQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsR0FBRztBQUNsQyx5Q0FBeUMsbUJBQW1CLEVBQUUsYUFBYTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDRCQUE0QixHQUFHO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxHQUFHO0FBQzlDO0FBQ0EseUJBQXlCO0FBQ3pCLDRCQUE0QixHQUFHO0FBQy9CO0FBQ0E7QUFDQSwrQ0FBK0MsR0FBRztBQUNsRCxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxtREFBbUQsbUJBQW1CLEVBQUUsYUFBYTtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxHQUFHO0FBQ25DO0FBQ0Esd0NBQXdDLEdBQUc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvYnVpbGRKb2luQWdncmVnYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJRXJyb3IsIGFwcGVuZFZlcnNpb25Ub1F1ZXJ5S2V5LCBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzLCBjb21iaW5lUXVlcmllcywgZ2V0UXVlcnlEcmFmdHNTb3J0IH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBmaWVsZFNob3VsZEJlTG9jYWxpemVkIH0gZnJvbSAncGF5bG9hZC9zaGFyZWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4uL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBidWlsZFNvcnRQYXJhbSB9IGZyb20gJy4uL3F1ZXJpZXMvYnVpbGRTb3J0UGFyYW0uanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vZ2V0RW50aXR5LmpzJztcbmV4cG9ydCBjb25zdCBidWlsZEpvaW5BZ2dyZWdhdGlvbiA9IGFzeW5jICh7IGFkYXB0ZXIsIGNvbGxlY3Rpb24sIGNvbGxlY3Rpb25Db25maWcsIGRyYWZ0c0VuYWJsZWQsIGpvaW5zLCBsb2NhbGUsIHByb2plY3Rpb24sIHZlcnNpb25zIH0pPT57XG4gICAgaWYgKE9iamVjdC5rZXlzKGNvbGxlY3Rpb25Db25maWcuam9pbnMpLmxlbmd0aCA9PT0gMCAmJiBjb2xsZWN0aW9uQ29uZmlnLnBvbHltb3JwaGljSm9pbnMubGVuZ3RoID09IDAgfHwgam9pbnMgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgam9pbkNvbmZpZyA9IGFkYXB0ZXIucGF5bG9hZC5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXT8uY29uZmlnPy5qb2lucztcbiAgICBpZiAoIWpvaW5Db25maWcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBDb3VsZCBub3QgcmV0cmlldmUgc2FuaXRpemVkIGpvaW4gY29uZmlnIGZvciAke2NvbGxlY3Rpb259LmApO1xuICAgIH1cbiAgICBjb25zdCBhZ2dyZWdhdGUgPSBbXTtcbiAgICBjb25zdCBwb2x5bW9ycGhpY0pvaW5zQ29uZmlnID0gYWRhcHRlci5wYXlsb2FkLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25dPy5jb25maWc/LnBvbHltb3JwaGljSm9pbnM7XG4gICAgaWYgKCFwb2x5bW9ycGhpY0pvaW5zQ29uZmlnKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihgQ291bGQgbm90IHJldHJpZXZlIHNhbml0aXplZCBwb2x5bW9ycGhpYyBqb2lucyBjb25maWcgZm9yICR7Y29sbGVjdGlvbn0uYCk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgam9pbiBvZiBwb2x5bW9ycGhpY0pvaW5zQ29uZmlnKXtcbiAgICAgICAgaWYgKHByb2plY3Rpb24gJiYgIXByb2plY3Rpb25bam9pbi5qb2luUGF0aF0pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb2lucz8uW2pvaW4uam9pblBhdGhdID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBjb3VudCA9IGZhbHNlLCBsaW1pdDogbGltaXRKb2luID0gam9pbi5maWVsZC5kZWZhdWx0TGltaXQgPz8gMTAsIHBhZ2UsIHNvcnQ6IHNvcnRKb2luID0gam9pbi5maWVsZC5kZWZhdWx0U29ydCB8fCBjb2xsZWN0aW9uQ29uZmlnLmRlZmF1bHRTb3J0LCB3aGVyZTogd2hlcmVKb2luID0ge30gfSA9IGpvaW5zPy5bam9pbi5qb2luUGF0aF0gfHwge307XG4gICAgICAgIGNvbnN0IGFnZ3JlZ2F0ZWRGaWVsZHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBjb2xsZWN0aW9uU2x1ZyBvZiBqb2luLmZpZWxkLmNvbGxlY3Rpb24pe1xuICAgICAgICAgICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25TbHVnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMpe1xuICAgICAgICAgICAgICAgIGlmICghYWdncmVnYXRlZEZpZWxkcy5zb21lKChlYWNoRmllbGQpPT5lYWNoRmllbGQubmFtZSA9PT0gZmllbGQubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZEZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc29ydCA9IGJ1aWxkU29ydFBhcmFtKHtcbiAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICBjb25maWc6IGFkYXB0ZXIucGF5bG9hZC5jb25maWcsXG4gICAgICAgICAgICBmaWVsZHM6IGFnZ3JlZ2F0ZWRGaWVsZHMsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBzb3J0OiBzb3J0Sm9pbixcbiAgICAgICAgICAgIHRpbWVzdGFtcHM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0ICRtYXRjaCA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgIGZpZWxkczogYWdncmVnYXRlZEZpZWxkcyxcbiAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgIHdoZXJlOiB3aGVyZUpvaW5cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNvcnRQcm9wZXJ0eSA9IE9iamVjdC5rZXlzKHNvcnQpWzBdLy8gYXNzZXJ0IGJlY2F1c2UgYnVpbGRTb3J0UGFyYW0gYWx3YXlzIHJldHVybnMgYXQgbGVhc3QgMSBrZXkuXG4gICAgICAgIDtcbiAgICAgICAgY29uc3Qgc29ydERpcmVjdGlvbiA9IHNvcnRbc29ydFByb3BlcnR5XSA9PT0gJ2FzYycgPyAxIDogLTE7XG4gICAgICAgIGNvbnN0IHByb2plY3RTb3J0ID0gc29ydFByb3BlcnR5ICE9PSAnX2lkJyAmJiBzb3J0UHJvcGVydHkgIT09ICdyZWxhdGlvblRvJztcbiAgICAgICAgY29uc3QgYWxpYXNlcyA9IFtdO1xuICAgICAgICBjb25zdCBhcyA9IGpvaW4uam9pblBhdGg7XG4gICAgICAgIGZvciAoY29uc3QgY29sbGVjdGlvblNsdWcgb2Ygam9pbi5maWVsZC5jb2xsZWN0aW9uKXtcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzID0gYCR7YXN9LmRvY3MuJHtjb2xsZWN0aW9uU2x1Z31gO1xuICAgICAgICAgICAgYWxpYXNlcy5wdXNoKGFsaWFzKTtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VQaXBlbGluZSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uVG86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGl0ZXJhbDogY29sbGVjdGlvblNsdWdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkbWF0Y2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhbmQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRleHByOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXE6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJCR7am9pbi5maWVsZC5vbn1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckJHJvb3RfaWRfJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCB7IE1vZGVsOiBKb2luTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblNsdWdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICAgICAgICAgICAgYXM6IGFsaWFzLFxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBKb2luTW9kZWwuY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBsZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RfaWRfOiAnJF9pZCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmJhc2VQaXBlbGluZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc29ydDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc29ydFByb3BlcnR5XTogc29ydERpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgd2UgY2FuJ3QgdXNlICRza2lwIGhlcmUgYmVjYXVzZSB3ZSBjYW4gbG9zZSBkYXRhLCBpbnN0ZWFkIHdlIGRvICRzbGljZSB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpbWl0OiBwYWdlID8gcGFnZSAqIGxpbWl0Sm9pbiA6IGxpbWl0Sm9pblxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcHJvamVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJyRfaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9qZWN0U29ydCAmJiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc29ydFByb3BlcnR5XTogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvblRvOiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY291bnQpIHtcbiAgICAgICAgICAgICAgICBhZ2dyZWdhdGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzOiBgJHthc30udG90YWxEb2NzLiR7YWxpYXN9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IEpvaW5Nb2RlbC5jb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290X2lkXzogJyRfaWQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5iYXNlUGlwZWxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY291bnQ6ICdyZXN1bHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgJGFkZEZpZWxkczoge1xuICAgICAgICAgICAgICAgIFtgJHthc30uZG9jc2BdOiB7XG4gICAgICAgICAgICAgICAgICAgICRjb25jYXRBcnJheXM6IGFsaWFzZXMubWFwKChhbGlhcyk9PmAkJHthbGlhc31gKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb3VudCkge1xuICAgICAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgW2Ake2FzfS50b3RhbERvY3NgXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFkZDogYWxpYXNlcy5tYXAoKGFsaWFzKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlmTnVsbDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmaXJzdDogYCQke2FzfS50b3RhbERvY3MuJHthbGlhc30ucmVzdWx0YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgICAgIFtgJHthc30uZG9jc2BdOiB7XG4gICAgICAgICAgICAgICAgICAgICRzb3J0QXJyYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBgJCR7YXN9LmRvY3NgLFxuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NvcnRQcm9wZXJ0eV06IHNvcnREaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNsaWNlVmFsdWUgPSBwYWdlID8gW1xuICAgICAgICAgICAgKHBhZ2UgLSAxKSAqIGxpbWl0Sm9pbixcbiAgICAgICAgICAgIGxpbWl0Sm9pblxuICAgICAgICBdIDogW1xuICAgICAgICAgICAgbGltaXRKb2luXG4gICAgICAgIF07XG4gICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBbYCR7YXN9Lmhhc05leHRQYWdlYF06IHtcbiAgICAgICAgICAgICAgICAgICAgJGd0OiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNpemU6IGAkJHthc30uZG9jc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdEpvaW4gfHwgTnVtYmVyLk1BWF9WQUxVRVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgICAgIFtgJHthc30uZG9jc2BdOiB7XG4gICAgICAgICAgICAgICAgICAgICRzbGljZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgYCQke2FzfS5kb2NzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnNsaWNlVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2x1ZyBvZiBPYmplY3Qua2V5cyhqb2luQ29uZmlnKSl7XG4gICAgICAgIGNvbnN0IGpvaW5zTGlzdCA9IGpvaW5Db25maWdbc2x1Z107XG4gICAgICAgIGlmICgham9pbnNMaXN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEZhaWxlZCB0byByZXRyaWV2ZSBhcnJheSBvZiBqb2lucyBmb3IgJHtzbHVnfSBpbiBjb2xsZWN0aW8gJHtjb2xsZWN0aW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgam9pbiBvZiBqb2luc0xpc3Qpe1xuICAgICAgICAgICAgaWYgKHByb2plY3Rpb24gJiYgIXByb2plY3Rpb25bam9pbi5qb2luUGF0aF0pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqb2lucz8uW2pvaW4uam9pblBhdGhdID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGFkYXB0ZXIucGF5bG9hZC5jb2xsZWN0aW9uc1tqb2luLmZpZWxkLmNvbGxlY3Rpb25dPy5jb25maWc7XG4gICAgICAgICAgICBpZiAoIWNvbGxlY3Rpb25Db25maWcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYENvbGxlY3Rpb24gY29uZmlnIGZvciAke2pvaW4uZmllbGQuY29sbGVjdGlvbi50b1N0cmluZygpfSB3YXMgbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgSm9pbk1vZGVsO1xuICAgICAgICAgICAgY29uc3QgdXNlRHJhZnRzID0gKGRyYWZ0c0VuYWJsZWQgfHwgdmVyc2lvbnMpICYmIEJvb2xlYW4oY29sbGVjdGlvbkNvbmZpZy52ZXJzaW9ucy5kcmFmdHMpO1xuICAgICAgICAgICAgaWYgKHVzZURyYWZ0cykge1xuICAgICAgICAgICAgICAgIEpvaW5Nb2RlbCA9IGFkYXB0ZXIudmVyc2lvbnNbY29sbGVjdGlvbkNvbmZpZy5zbHVnXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSm9pbk1vZGVsID0gYWRhcHRlci5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uQ29uZmlnLnNsdWddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFKb2luTW9kZWwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEpvaW4gTW9kZWwgd2FzIG5vdCBmb3VuZCBmb3IgJHtjb2xsZWN0aW9uQ29uZmlnLnNsdWd9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGNvdW50LCBsaW1pdDogbGltaXRKb2luID0gam9pbi5maWVsZC5kZWZhdWx0TGltaXQgPz8gMTAsIHBhZ2UsIHNvcnQ6IHNvcnRKb2luID0gam9pbi5maWVsZC5kZWZhdWx0U29ydCB8fCBjb2xsZWN0aW9uQ29uZmlnLmRlZmF1bHRTb3J0LCB3aGVyZTogd2hlcmVKb2luID0ge30gfSA9IGpvaW5zPy5bam9pbi5qb2luUGF0aF0gfHwge307XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqb2luLmZpZWxkLmNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnJlYWNoYWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmllbGRzID0gdXNlRHJhZnRzID8gYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyhhZGFwdGVyLnBheWxvYWQuY29uZmlnLCBjb2xsZWN0aW9uQ29uZmlnLCB0cnVlKSA6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzO1xuICAgICAgICAgICAgY29uc3Qgc29ydCA9IGJ1aWxkU29ydFBhcmFtKHtcbiAgICAgICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgICAgIGNvbmZpZzogYWRhcHRlci5wYXlsb2FkLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgICAgIHNvcnQ6IHVzZURyYWZ0cyA/IGdldFF1ZXJ5RHJhZnRzU29ydCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Db25maWcsXG4gICAgICAgICAgICAgICAgICAgIHNvcnQ6IHNvcnRKb2luXG4gICAgICAgICAgICAgICAgfSkgOiBzb3J0Sm9pbixcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBzOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHNvcnRQcm9wZXJ0eSA9IE9iamVjdC5rZXlzKHNvcnQpWzBdO1xuICAgICAgICAgICAgY29uc3Qgc29ydERpcmVjdGlvbiA9IHNvcnRbc29ydFByb3BlcnR5XSA9PT0gJ2FzYycgPyAxIDogLTE7XG4gICAgICAgICAgICBjb25zdCAkbWF0Y2ggPSBhd2FpdCBKb2luTW9kZWwuYnVpbGRRdWVyeSh7XG4gICAgICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IGFkYXB0ZXIucGF5bG9hZCxcbiAgICAgICAgICAgICAgICB3aGVyZTogdXNlRHJhZnRzID8gY29tYmluZVF1ZXJpZXMoYXBwZW5kVmVyc2lvblRvUXVlcnlLZXkod2hlcmVKb2luKSwge1xuICAgICAgICAgICAgICAgICAgICBsYXRlc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFsczogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkgOiB3aGVyZUpvaW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcGlwZWxpbmUgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkbWF0Y2hcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJHNvcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtzb3J0UHJvcGVydHldOiBzb3J0RGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaWYgKHBhZ2UpIHtcbiAgICAgICAgICAgICAgICBwaXBlbGluZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgJHNraXA6IChwYWdlIC0gMSkgKiBsaW1pdEpvaW5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaW1pdEpvaW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgcGlwZWxpbmUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICRsaW1pdDogbGltaXRKb2luICsgMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHBvbHltb3JwaGljU3VmZml4ID0gJyc7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqb2luLnRhcmdldEZpZWxkLnJlbGF0aW9uVG8pKSB7XG4gICAgICAgICAgICAgICAgcG9seW1vcnBoaWNTdWZmaXggPSAnLnZhbHVlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFkZFRvdGFsRG9jc0FnZ3JlZ2F0aW9uID0gKGFzLCBmb3JlaWduRmllbGQpPT5hZ2dyZWdhdGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzOiBgJHthc30udG90YWxEb2NzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVpZ25GaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IEpvaW5Nb2RlbC5jb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbEZpZWxkOiB2ZXJzaW9ucyA/ICdwYXJlbnQnIDogJ19pZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb3VudDogJ3Jlc3VsdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtgJHthc30udG90YWxEb2NzYF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaWZOdWxsOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmaXJzdDogYCQke2FzfS50b3RhbERvY3MucmVzdWx0YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgZm9yZWlnbkZpZWxkUHJlZml4ID0gJyc7XG4gICAgICAgICAgICBpZiAodXNlRHJhZnRzKSB7XG4gICAgICAgICAgICAgICAgZm9yZWlnbkZpZWxkUHJlZml4ID0gJ3ZlcnNpb24uJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhZGFwdGVyLnBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiAmJiBsb2NhbGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAgICAgYWRhcHRlci5wYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24ubG9jYWxlQ29kZXMuZm9yRWFjaCgoY29kZSk9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXMgPSBgJHt2ZXJzaW9ucyA/IGB2ZXJzaW9uLiR7am9pbi5qb2luUGF0aH1gIDogam9pbi5qb2luUGF0aH0ke2NvZGV9YDtcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzOiBgJHthc30uZG9jc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWlnbkZpZWxkOiBgJHtmb3JlaWduRmllbGRQcmVmaXh9JHtqb2luLmZpZWxkLm9ufSR7Y29kZX0ke3BvbHltb3JwaGljU3VmZml4fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogSm9pbk1vZGVsLmNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbEZpZWxkOiB2ZXJzaW9ucyA/ICdwYXJlbnQnIDogJ19pZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFkZEZpZWxkczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtgJHthc30uZG9jc2BdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtYXA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzOiAnZG9jJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluOiB1c2VEcmFmdHMgPyBgJCRkb2MucGFyZW50YCA6ICckJGRvYy5faWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGAkJHthc30uZG9jc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Ake2FzfS5oYXNOZXh0UGFnZWBdOiBsaW1pdEpvaW4gPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRndDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzaXplOiBgJCR7YXN9LmRvY3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXRKb2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW1pdEpvaW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFkZEZpZWxkczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYCR7YXN9LmRvY3NgXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNsaWNlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCQke2FzfS5kb2NzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdEpvaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVG90YWxEb2NzQWdncmVnYXRpb24oYXMsIGAke2ZvcmVpZ25GaWVsZFByZWZpeH0ke2pvaW4uZmllbGQub259JHtjb2RlfSR7cG9seW1vcnBoaWNTdWZmaXh9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxlU3VmZml4ID0gZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBqb2luLmZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZDogam9pbi5wYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICAgICAgICAgIH0pICYmIGFkYXB0ZXIucGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uICYmIGxvY2FsZSA/IGAuJHtsb2NhbGV9YCA6ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFzID0gYCR7dmVyc2lvbnMgPyBgdmVyc2lvbi4ke2pvaW4uam9pblBhdGh9YCA6IGpvaW4uam9pblBhdGh9JHtsb2NhbGVTdWZmaXh9YDtcbiAgICAgICAgICAgICAgICBsZXQgZm9yZWlnbkZpZWxkO1xuICAgICAgICAgICAgICAgIGlmIChqb2luLmdldEZvcmVpZ25QYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmVpZ25GaWVsZCA9IGAke2pvaW4uZ2V0Rm9yZWlnblBhdGgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlXG4gICAgICAgICAgICAgICAgICAgIH0pfSR7cG9seW1vcnBoaWNTdWZmaXh9YDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3JlaWduRmllbGQgPSBgJHtqb2luLmZpZWxkLm9ufSR7cG9seW1vcnBoaWNTdWZmaXh9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhczogYCR7YXN9LmRvY3NgLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWlnbkZpZWxkOiBgJHtmb3JlaWduRmllbGRQcmVmaXh9JHtmb3JlaWduRmllbGR9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IEpvaW5Nb2RlbC5jb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbEZpZWxkOiB2ZXJzaW9ucyA/ICdwYXJlbnQnIDogJ19pZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAkYWRkRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbYCR7YXN9LmRvY3NgXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtYXA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXM6ICdkb2MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbjogdXNlRHJhZnRzID8gYCQkZG9jLnBhcmVudGAgOiAnJCRkb2MuX2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGAkJHthc30uZG9jc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgW2Ake2FzfS5oYXNOZXh0UGFnZWBdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGd0OiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzaXplOiBgJCR7YXN9LmRvY3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0Sm9pbiB8fCBOdW1iZXIuTUFYX1ZBTFVFXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFRvdGFsRG9jc0FnZ3JlZ2F0aW9uKGFzLCBgJHtmb3JlaWduRmllbGRQcmVmaXh9JHtmb3JlaWduRmllbGR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsaW1pdEpvaW4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYCR7YXN9LmRvY3NgXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2xpY2U6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAkJHthc30uZG9jc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdEpvaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhZ2dyZWdhdGU7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZEpvaW5BZ2dyZWdhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js":
/*!*******************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js ***!
  \*******************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildProjectionFromSelect: () => (/* binding */ buildProjectionFromSelect)\n/* harmony export */ });\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/fields/config/types.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/deepCopyObject.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/getSelectMode.js\");\n\nconst addFieldToProjection = ({ adapter, databaseSchemaPath, field, parentIsLocalized, projection })=>{\n    const { config } = adapter.payload;\n    if (parentIsLocalized && config.localization) {\n        for (const locale of config.localization.localeCodes){\n            const localeDatabaseSchemaPath = databaseSchemaPath.replace('<locale>', locale);\n            projection[`${localeDatabaseSchemaPath}${field.name}`] = true;\n        }\n    } else {\n        projection[`${databaseSchemaPath}${field.name}`] = true;\n    }\n};\nconst traverseFields = ({ adapter, databaseSchemaPath = '', fields, parentIsLocalized = false, projection, select, selectAllOnCurrentLevel = false, selectMode })=>{\n    for (const field of fields){\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(field)) {\n            if (selectMode === 'include') {\n                if (select[field.name] === true || selectAllOnCurrentLevel) {\n                    addFieldToProjection({\n                        adapter,\n                        databaseSchemaPath,\n                        field,\n                        parentIsLocalized,\n                        projection\n                    });\n                    continue;\n                }\n                if (!select[field.name]) {\n                    continue;\n                }\n            }\n            if (selectMode === 'exclude') {\n                if (typeof select[field.name] === 'undefined') {\n                    addFieldToProjection({\n                        adapter,\n                        databaseSchemaPath,\n                        field,\n                        parentIsLocalized,\n                        projection\n                    });\n                    continue;\n                }\n                if (select[field.name] === false) {\n                    continue;\n                }\n            }\n        }\n        let fieldDatabaseSchemaPath = databaseSchemaPath;\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(field)) {\n            fieldDatabaseSchemaPath = `${databaseSchemaPath}${field.name}.`;\n            if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldShouldBeLocalized)({\n                field,\n                parentIsLocalized\n            })) {\n                fieldDatabaseSchemaPath = `${fieldDatabaseSchemaPath}<locale>.`;\n            }\n        }\n        switch(field.type){\n            case 'array':\n            case 'group':\n            case 'tab':\n                {\n                    const fieldSelect = select[field.name];\n                    if (field.type === 'array' && selectMode === 'include') {\n                        fieldSelect.id = true;\n                    }\n                    traverseFields({\n                        adapter,\n                        databaseSchemaPath: fieldDatabaseSchemaPath,\n                        fields: field.flattenedFields,\n                        parentIsLocalized: parentIsLocalized || field.localized,\n                        projection,\n                        select: fieldSelect,\n                        selectMode\n                    });\n                    break;\n                }\n            case 'blocks':\n                {\n                    const blocksSelect = select[field.name];\n                    for (const _block of field.blockReferences ?? field.blocks){\n                        const block = typeof _block === 'string' ? adapter.payload.blocks[_block] : _block;\n                        if (!block) {\n                            continue;\n                        }\n                        if (selectMode === 'include' && blocksSelect[block.slug] === true || selectMode === 'exclude' && typeof blocksSelect[block.slug] === 'undefined') {\n                            traverseFields({\n                                adapter,\n                                databaseSchemaPath: fieldDatabaseSchemaPath,\n                                fields: block.flattenedFields,\n                                parentIsLocalized: parentIsLocalized || field.localized,\n                                projection,\n                                select: {},\n                                selectAllOnCurrentLevel: true,\n                                selectMode: 'include'\n                            });\n                            continue;\n                        }\n                        let blockSelectMode = selectMode;\n                        if (selectMode === 'exclude' && blocksSelect[block.slug] === false) {\n                            blockSelectMode = 'include';\n                        }\n                        if (typeof blocksSelect[block.slug] !== 'object') {\n                            blocksSelect[block.slug] = {};\n                        }\n                        if (blockSelectMode === 'include' && typeof blocksSelect[block.slug] === 'object') {\n                            const blockSelect = blocksSelect[block.slug];\n                            blockSelect.id = true;\n                            blockSelect.blockType = true;\n                        }\n                        traverseFields({\n                            adapter,\n                            databaseSchemaPath: fieldDatabaseSchemaPath,\n                            fields: block.flattenedFields,\n                            parentIsLocalized: parentIsLocalized || field.localized,\n                            projection,\n                            select: blocksSelect[block.slug],\n                            selectMode: blockSelectMode\n                        });\n                    }\n                    break;\n                }\n            default:\n                break;\n        }\n    }\n};\nconst buildProjectionFromSelect = ({ adapter, fields, select })=>{\n    if (!select) {\n        return;\n    }\n    const projection = {\n        _id: true\n    };\n    traverseFields({\n        adapter,\n        fields,\n        projection,\n        // Clone to safely mutate it later\n        select: (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.deepCopyObjectSimple)(select),\n        selectMode: (0,payload_shared__WEBPACK_IMPORTED_MODULE_2__.getSelectMode)(select)\n    });\n    return projection;\n};\n\n//# sourceMappingURL=buildProjectionFromSelect.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErRztBQUMvRyxnQ0FBZ0MsbUVBQW1FO0FBQ25HLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIseUJBQXlCLEVBQUUsV0FBVztBQUNoRTtBQUNBLE1BQU07QUFDTixzQkFBc0IsbUJBQW1CLEVBQUUsV0FBVztBQUN0RDtBQUNBO0FBQ0EsMEJBQTBCLHNJQUFzSTtBQUNoSztBQUNBLFlBQVksZ0VBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnRUFBZ0I7QUFDNUIseUNBQXlDLG1CQUFtQixFQUFFLFdBQVc7QUFDekUsZ0JBQWdCLHNFQUFzQjtBQUN0QztBQUNBO0FBQ0EsYUFBYTtBQUNiLDZDQUE2Qyx3QkFBd0I7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxxQ0FBcUMseUJBQXlCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0VBQW9CO0FBQ3BDLG9CQUFvQiw2REFBYTtBQUNqQyxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVlcENvcHlPYmplY3RTaW1wbGUsIGZpZWxkQWZmZWN0c0RhdGEsIGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQsIGdldFNlbGVjdE1vZGUgfSBmcm9tICdwYXlsb2FkL3NoYXJlZCc7XG5jb25zdCBhZGRGaWVsZFRvUHJvamVjdGlvbiA9ICh7IGFkYXB0ZXIsIGRhdGFiYXNlU2NoZW1hUGF0aCwgZmllbGQsIHBhcmVudElzTG9jYWxpemVkLCBwcm9qZWN0aW9uIH0pPT57XG4gICAgY29uc3QgeyBjb25maWcgfSA9IGFkYXB0ZXIucGF5bG9hZDtcbiAgICBpZiAocGFyZW50SXNMb2NhbGl6ZWQgJiYgY29uZmlnLmxvY2FsaXphdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IGxvY2FsZSBvZiBjb25maWcubG9jYWxpemF0aW9uLmxvY2FsZUNvZGVzKXtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsZURhdGFiYXNlU2NoZW1hUGF0aCA9IGRhdGFiYXNlU2NoZW1hUGF0aC5yZXBsYWNlKCc8bG9jYWxlPicsIGxvY2FsZSk7XG4gICAgICAgICAgICBwcm9qZWN0aW9uW2Ake2xvY2FsZURhdGFiYXNlU2NoZW1hUGF0aH0ke2ZpZWxkLm5hbWV9YF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvamVjdGlvbltgJHtkYXRhYmFzZVNjaGVtYVBhdGh9JHtmaWVsZC5uYW1lfWBdID0gdHJ1ZTtcbiAgICB9XG59O1xuY29uc3QgdHJhdmVyc2VGaWVsZHMgPSAoeyBhZGFwdGVyLCBkYXRhYmFzZVNjaGVtYVBhdGggPSAnJywgZmllbGRzLCBwYXJlbnRJc0xvY2FsaXplZCA9IGZhbHNlLCBwcm9qZWN0aW9uLCBzZWxlY3QsIHNlbGVjdEFsbE9uQ3VycmVudExldmVsID0gZmFsc2UsIHNlbGVjdE1vZGUgfSk9PntcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcyl7XG4gICAgICAgIGlmIChmaWVsZEFmZmVjdHNEYXRhKGZpZWxkKSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdE1vZGUgPT09ICdpbmNsdWRlJykge1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RbZmllbGQubmFtZV0gPT09IHRydWUgfHwgc2VsZWN0QWxsT25DdXJyZW50TGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRmllbGRUb1Byb2plY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlU2NoZW1hUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RbZmllbGQubmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdE1vZGUgPT09ICdleGNsdWRlJykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0W2ZpZWxkLm5hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBhZGRGaWVsZFRvUHJvamVjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VTY2hlbWFQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0W2ZpZWxkLm5hbWVdID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZpZWxkRGF0YWJhc2VTY2hlbWFQYXRoID0gZGF0YWJhc2VTY2hlbWFQYXRoO1xuICAgICAgICBpZiAoZmllbGRBZmZlY3RzRGF0YShmaWVsZCkpIHtcbiAgICAgICAgICAgIGZpZWxkRGF0YWJhc2VTY2hlbWFQYXRoID0gYCR7ZGF0YWJhc2VTY2hlbWFQYXRofSR7ZmllbGQubmFtZX0uYDtcbiAgICAgICAgICAgIGlmIChmaWVsZFNob3VsZEJlTG9jYWxpemVkKHtcbiAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICBmaWVsZERhdGFiYXNlU2NoZW1hUGF0aCA9IGAke2ZpZWxkRGF0YWJhc2VTY2hlbWFQYXRofTxsb2NhbGU+LmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoKGZpZWxkLnR5cGUpe1xuICAgICAgICAgICAgY2FzZSAnYXJyYXknOlxuICAgICAgICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICAgICAgY2FzZSAndGFiJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkU2VsZWN0ID0gc2VsZWN0W2ZpZWxkLm5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2FycmF5JyAmJiBzZWxlY3RNb2RlID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkU2VsZWN0LmlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZUZpZWxkcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VTY2hlbWFQYXRoOiBmaWVsZERhdGFiYXNlU2NoZW1hUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogZmllbGQuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IHBhcmVudElzTG9jYWxpemVkIHx8IGZpZWxkLmxvY2FsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6IGZpZWxkU2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0TW9kZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnYmxvY2tzJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2Nrc1NlbGVjdCA9IHNlbGVjdFtmaWVsZC5uYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBfYmxvY2sgb2YgZmllbGQuYmxvY2tSZWZlcmVuY2VzID8/IGZpZWxkLmJsb2Nrcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9jayA9IHR5cGVvZiBfYmxvY2sgPT09ICdzdHJpbmcnID8gYWRhcHRlci5wYXlsb2FkLmJsb2Nrc1tfYmxvY2tdIDogX2Jsb2NrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdE1vZGUgPT09ICdpbmNsdWRlJyAmJiBibG9ja3NTZWxlY3RbYmxvY2suc2x1Z10gPT09IHRydWUgfHwgc2VsZWN0TW9kZSA9PT0gJ2V4Y2x1ZGUnICYmIHR5cGVvZiBibG9ja3NTZWxlY3RbYmxvY2suc2x1Z10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VGaWVsZHMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZVNjaGVtYVBhdGg6IGZpZWxkRGF0YWJhc2VTY2hlbWFQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IGJsb2NrLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IHBhcmVudElzTG9jYWxpemVkIHx8IGZpZWxkLmxvY2FsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0QWxsT25DdXJyZW50TGV2ZWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE1vZGU6ICdpbmNsdWRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrU2VsZWN0TW9kZSA9IHNlbGVjdE1vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0TW9kZSA9PT0gJ2V4Y2x1ZGUnICYmIGJsb2Nrc1NlbGVjdFtibG9jay5zbHVnXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja1NlbGVjdE1vZGUgPSAnaW5jbHVkZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGJsb2Nrc1NlbGVjdFtibG9jay5zbHVnXSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NTZWxlY3RbYmxvY2suc2x1Z10gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG9ja1NlbGVjdE1vZGUgPT09ICdpbmNsdWRlJyAmJiB0eXBlb2YgYmxvY2tzU2VsZWN0W2Jsb2NrLnNsdWddID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrU2VsZWN0ID0gYmxvY2tzU2VsZWN0W2Jsb2NrLnNsdWddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrU2VsZWN0LmlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja1NlbGVjdC5ibG9ja1R5cGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VGaWVsZHMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VTY2hlbWFQYXRoOiBmaWVsZERhdGFiYXNlU2NoZW1hUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IGJsb2NrLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZDogcGFyZW50SXNMb2NhbGl6ZWQgfHwgZmllbGQubG9jYWxpemVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiBibG9ja3NTZWxlY3RbYmxvY2suc2x1Z10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0TW9kZTogYmxvY2tTZWxlY3RNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0ID0gKHsgYWRhcHRlciwgZmllbGRzLCBzZWxlY3QgfSk9PntcbiAgICBpZiAoIXNlbGVjdCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHByb2plY3Rpb24gPSB7XG4gICAgICAgIF9pZDogdHJ1ZVxuICAgIH07XG4gICAgdHJhdmVyc2VGaWVsZHMoe1xuICAgICAgICBhZGFwdGVyLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgIC8vIENsb25lIHRvIHNhZmVseSBtdXRhdGUgaXQgbGF0ZXJcbiAgICAgICAgc2VsZWN0OiBkZWVwQ29weU9iamVjdFNpbXBsZShzZWxlY3QpLFxuICAgICAgICBzZWxlY3RNb2RlOiBnZXRTZWxlY3RNb2RlKHNlbGVjdClcbiAgICB9KTtcbiAgICByZXR1cm4gcHJvamVjdGlvbjtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getDBName.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getDBName.js ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDBName: () => (/* binding */ getDBName)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/APIError.js\");\n\n/**\n * Used to name database enums and collections\n * Returns the collection or enum name for a given entity\n */ const getDBName = ({ config: { name, slug }, config, target = 'dbName', versions = false })=>{\n    let result = null;\n    let custom = config[target];\n    if (!custom && target === 'enumName') {\n        custom = config['dbName'];\n    }\n    if (custom) {\n        result = typeof custom === 'function' ? custom({}) : custom;\n    } else {\n        result = name ?? slug ?? null;\n    }\n    if (versions) {\n        result = `_${result}_versions`;\n    }\n    if (!result) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Assertion for DB name of ${name} ${slug} was failed.`);\n    }\n    return result;\n};\n\n//# sourceMappingURL=getDBName.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2dldERCTmFtZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQSxJQUFXLHFCQUFxQixVQUFVLFlBQVksK0NBQStDO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EscUJBQXFCLE9BQU87QUFDNUI7QUFDQTtBQUNBLGtCQUFrQiw2Q0FBUSw2QkFBNkIsTUFBTSxFQUFFLE1BQU07QUFDckU7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvZ2V0REJOYW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSAncGF5bG9hZCc7XG4vKipcbiAqIFVzZWQgdG8gbmFtZSBkYXRhYmFzZSBlbnVtcyBhbmQgY29sbGVjdGlvbnNcbiAqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gb3IgZW51bSBuYW1lIGZvciBhIGdpdmVuIGVudGl0eVxuICovIGV4cG9ydCBjb25zdCBnZXREQk5hbWUgPSAoeyBjb25maWc6IHsgbmFtZSwgc2x1ZyB9LCBjb25maWcsIHRhcmdldCA9ICdkYk5hbWUnLCB2ZXJzaW9ucyA9IGZhbHNlIH0pPT57XG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG4gICAgbGV0IGN1c3RvbSA9IGNvbmZpZ1t0YXJnZXRdO1xuICAgIGlmICghY3VzdG9tICYmIHRhcmdldCA9PT0gJ2VudW1OYW1lJykge1xuICAgICAgICBjdXN0b20gPSBjb25maWdbJ2RiTmFtZSddO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tKSB7XG4gICAgICAgIHJlc3VsdCA9IHR5cGVvZiBjdXN0b20gPT09ICdmdW5jdGlvbicgPyBjdXN0b20oe30pIDogY3VzdG9tO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IG5hbWUgPz8gc2x1ZyA/PyBudWxsO1xuICAgIH1cbiAgICBpZiAodmVyc2lvbnMpIHtcbiAgICAgICAgcmVzdWx0ID0gYF8ke3Jlc3VsdH1fdmVyc2lvbnNgO1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEFzc2VydGlvbiBmb3IgREIgbmFtZSBvZiAke25hbWV9ICR7c2x1Z30gd2FzIGZhaWxlZC5gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldERCTmFtZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getDBName.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCollection: () => (/* binding */ getCollection),\n/* harmony export */   getGlobal: () => (/* binding */ getGlobal)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/APIError.js\");\n\nconst getCollection = ({ adapter, collectionSlug, versions = false })=>{\n    const collection = adapter.payload.collections[collectionSlug];\n    if (!collection) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve collection with the slug \"${collectionSlug}\". Does not exist.`);\n    }\n    if (versions) {\n        const Model = adapter.versions[collectionSlug];\n        if (!Model) {\n            throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve collection version model with the slug \"${collectionSlug}\". Does not exist.`);\n        }\n        return {\n            collectionConfig: collection.config,\n            customIDType: collection.customIDType,\n            Model\n        };\n    }\n    const Model = adapter.collections[collectionSlug];\n    if (!Model) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve collection model with the slug \"${collectionSlug}\". Does not exist.`);\n    }\n    return {\n        collectionConfig: collection.config,\n        customIDType: collection.customIDType,\n        Model\n    };\n};\nconst getGlobal = ({ adapter, globalSlug, versions = false })=>{\n    const globalConfig = adapter.payload.config.globals.find((each)=>each.slug === globalSlug);\n    if (!globalConfig) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve global with the slug \"${globalSlug}\". Does not exist.`);\n    }\n    if (versions) {\n        const Model = adapter.versions[globalSlug];\n        if (!Model) {\n            throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve global version model with the slug \"${globalSlug}\". Does not exist.`);\n        }\n        return {\n            globalConfig,\n            Model\n        };\n    }\n    return {\n        globalConfig,\n        Model: adapter.globals\n    };\n};\n\n//# sourceMappingURL=getEntity.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2dldEVudGl0eS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUM7QUFDNUIseUJBQXlCLDJDQUEyQztBQUMzRTtBQUNBO0FBQ0Esa0JBQWtCLDZDQUFRLHdEQUF3RCxlQUFlO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZDQUFRLHNFQUFzRSxlQUFlO0FBQ25IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2Q0FBUSw4REFBOEQsZUFBZTtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHFCQUFxQix1Q0FBdUM7QUFDbkU7QUFDQTtBQUNBLGtCQUFrQiw2Q0FBUSxvREFBb0QsV0FBVztBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2Q0FBUSxrRUFBa0UsV0FBVztBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvZ2V0RW50aXR5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSAncGF5bG9hZCc7XG5leHBvcnQgY29uc3QgZ2V0Q29sbGVjdGlvbiA9ICh7IGFkYXB0ZXIsIGNvbGxlY3Rpb25TbHVnLCB2ZXJzaW9ucyA9IGZhbHNlIH0pPT57XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGFkYXB0ZXIucGF5bG9hZC5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uU2x1Z107XG4gICAgaWYgKCFjb2xsZWN0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihgRVJST1I6IEZhaWxlZCB0byByZXRyaWV2ZSBjb2xsZWN0aW9uIHdpdGggdGhlIHNsdWcgXCIke2NvbGxlY3Rpb25TbHVnfVwiLiBEb2VzIG5vdCBleGlzdC5gKTtcbiAgICB9XG4gICAgaWYgKHZlcnNpb25zKSB7XG4gICAgICAgIGNvbnN0IE1vZGVsID0gYWRhcHRlci52ZXJzaW9uc1tjb2xsZWN0aW9uU2x1Z107XG4gICAgICAgIGlmICghTW9kZWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBUElFcnJvcihgRVJST1I6IEZhaWxlZCB0byByZXRyaWV2ZSBjb2xsZWN0aW9uIHZlcnNpb24gbW9kZWwgd2l0aCB0aGUgc2x1ZyBcIiR7Y29sbGVjdGlvblNsdWd9XCIuIERvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uQ29uZmlnOiBjb2xsZWN0aW9uLmNvbmZpZyxcbiAgICAgICAgICAgIGN1c3RvbUlEVHlwZTogY29sbGVjdGlvbi5jdXN0b21JRFR5cGUsXG4gICAgICAgICAgICBNb2RlbFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBNb2RlbCA9IGFkYXB0ZXIuY29sbGVjdGlvbnNbY29sbGVjdGlvblNsdWddO1xuICAgIGlmICghTW9kZWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBFUlJPUjogRmFpbGVkIHRvIHJldHJpZXZlIGNvbGxlY3Rpb24gbW9kZWwgd2l0aCB0aGUgc2x1ZyBcIiR7Y29sbGVjdGlvblNsdWd9XCIuIERvZXMgbm90IGV4aXN0LmApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjb2xsZWN0aW9uQ29uZmlnOiBjb2xsZWN0aW9uLmNvbmZpZyxcbiAgICAgICAgY3VzdG9tSURUeXBlOiBjb2xsZWN0aW9uLmN1c3RvbUlEVHlwZSxcbiAgICAgICAgTW9kZWxcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBnZXRHbG9iYWwgPSAoeyBhZGFwdGVyLCBnbG9iYWxTbHVnLCB2ZXJzaW9ucyA9IGZhbHNlIH0pPT57XG4gICAgY29uc3QgZ2xvYmFsQ29uZmlnID0gYWRhcHRlci5wYXlsb2FkLmNvbmZpZy5nbG9iYWxzLmZpbmQoKGVhY2gpPT5lYWNoLnNsdWcgPT09IGdsb2JhbFNsdWcpO1xuICAgIGlmICghZ2xvYmFsQ29uZmlnKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihgRVJST1I6IEZhaWxlZCB0byByZXRyaWV2ZSBnbG9iYWwgd2l0aCB0aGUgc2x1ZyBcIiR7Z2xvYmFsU2x1Z31cIi4gRG9lcyBub3QgZXhpc3QuYCk7XG4gICAgfVxuICAgIGlmICh2ZXJzaW9ucykge1xuICAgICAgICBjb25zdCBNb2RlbCA9IGFkYXB0ZXIudmVyc2lvbnNbZ2xvYmFsU2x1Z107XG4gICAgICAgIGlmICghTW9kZWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBUElFcnJvcihgRVJST1I6IEZhaWxlZCB0byByZXRyaWV2ZSBnbG9iYWwgdmVyc2lvbiBtb2RlbCB3aXRoIHRoZSBzbHVnIFwiJHtnbG9iYWxTbHVnfVwiLiBEb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2xvYmFsQ29uZmlnLFxuICAgICAgICAgICAgTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2xvYmFsQ29uZmlnLFxuICAgICAgICBNb2RlbDogYWRhcHRlci5nbG9iYWxzXG4gICAgfTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldEVudGl0eS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js":
/*!****************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js ***!
  \****************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSession: () => (/* binding */ getSession)\n/* harmony export */ });\n/**\n * returns the session belonging to the transaction of the req.session if exists\n * @returns ClientSession\n */ async function getSession(db, req) {\n    if (!req) {\n        return;\n    }\n    let transactionID = req.transactionID;\n    if (transactionID instanceof Promise) {\n        transactionID = await req.transactionID;\n    }\n    if (transactionID) {\n        return db.sessions[transactionID];\n    }\n}\n\n//# sourceMappingURL=getSession.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2dldFNlc3Npb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLElBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHJldHVybnMgdGhlIHNlc3Npb24gYmVsb25naW5nIHRvIHRoZSB0cmFuc2FjdGlvbiBvZiB0aGUgcmVxLnNlc3Npb24gaWYgZXhpc3RzXG4gKiBAcmV0dXJucyBDbGllbnRTZXNzaW9uXG4gKi8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb24oZGIsIHJlcSkge1xuICAgIGlmICghcmVxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHRyYW5zYWN0aW9uSUQgPSByZXEudHJhbnNhY3Rpb25JRDtcbiAgICBpZiAodHJhbnNhY3Rpb25JRCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdHJhbnNhY3Rpb25JRCA9IGF3YWl0IHJlcS50cmFuc2FjdGlvbklEO1xuICAgIH1cbiAgICBpZiAodHJhbnNhY3Rpb25JRCkge1xuICAgICAgICByZXR1cm4gZGIuc2Vzc2lvbnNbdHJhbnNhY3Rpb25JRF07XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRTZXNzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js":
/*!*****************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js ***!
  \*****************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleError: () => (/* binding */ handleError)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/errors/ValidationError.js\");\n\nconst handleError = ({ collection, error, global, req })=>{\n    if (!error || typeof error !== 'object') {\n        throw error;\n    }\n    // Handle uniqueness error from MongoDB\n    if ('code' in error && error.code === 11000 && 'keyValue' in error && error.keyValue && typeof error.keyValue === 'object') {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.ValidationError({\n            collection,\n            errors: [\n                {\n                    message: req?.t ? req.t('error:valueMustBeUnique') : 'Value must be unique',\n                    path: Object.keys(error.keyValue)[0] ?? ''\n                }\n            ],\n            global\n        }, req?.t);\n    }\n    // eslint-disable-next-line @typescript-eslint/only-throw-error\n    throw error;\n};\n\n//# sourceMappingURL=handleError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2hhbmRsZUVycm9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBDO0FBQ25DLHVCQUF1QixnQ0FBZ0M7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbmljay9EZXNrdG9wL0J1c2luZXNzL1BheWxvYWRDTVMvcGF5bG9hZC1zdG9yYWdlLWNsb3VkaW5hcnkvZGV2L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDQuMF9wYXlsb2FkQDMuNDQuMF9ncmFwaHFsQDE2LjExLjBfdHlwZXNjcmlwdEA1LjguM18vbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvaGFuZGxlRXJyb3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAncGF5bG9hZCc7XG5leHBvcnQgY29uc3QgaGFuZGxlRXJyb3IgPSAoeyBjb2xsZWN0aW9uLCBlcnJvciwgZ2xvYmFsLCByZXEgfSk9PntcbiAgICBpZiAoIWVycm9yIHx8IHR5cGVvZiBlcnJvciAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIC8vIEhhbmRsZSB1bmlxdWVuZXNzIGVycm9yIGZyb20gTW9uZ29EQlxuICAgIGlmICgnY29kZScgaW4gZXJyb3IgJiYgZXJyb3IuY29kZSA9PT0gMTEwMDAgJiYgJ2tleVZhbHVlJyBpbiBlcnJvciAmJiBlcnJvci5rZXlWYWx1ZSAmJiB0eXBlb2YgZXJyb3Iua2V5VmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3Ioe1xuICAgICAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgICAgIGVycm9yczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVxPy50ID8gcmVxLnQoJ2Vycm9yOnZhbHVlTXVzdEJlVW5pcXVlJykgOiAnVmFsdWUgbXVzdCBiZSB1bmlxdWUnLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBPYmplY3Qua2V5cyhlcnJvci5rZXlWYWx1ZSlbMF0gPz8gJydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZ2xvYmFsXG4gICAgICAgIH0sIHJlcT8udCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvb25seS10aHJvdy1lcnJvclxuICAgIHRocm93IGVycm9yO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFuZGxlRXJyb3IuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transform: () => (/* binding */ transform)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/flattenAllFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/utilities/traverseFields.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.44.0_graphql@16.11.0_typescript@5.8.3/node_modules/payload/dist/fields/config/types.js\");\n\n\n\nfunction isValidRelationObject(value) {\n    return typeof value === 'object' && value !== null && 'relationTo' in value && 'value' in value;\n}\nconst convertRelationshipValue = ({ operation, relatedCollection, validateRelationships, value })=>{\n    const customIDField = relatedCollection.fields.find((field)=>(0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field) && field.name === 'id');\n    if (operation === 'read') {\n        if (value instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n            return value.toHexString();\n        }\n        return value;\n    }\n    if (customIDField) {\n        return value;\n    }\n    if (typeof value === 'string') {\n        try {\n            return new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(value);\n        } catch (e) {\n            if (validateRelationships) {\n                throw e;\n            }\n            return value;\n        }\n    }\n    return value;\n};\nconst sanitizeRelationship = ({ config, field, locale, operation, ref, validateRelationships, value })=>{\n    if (field.type === 'join') {\n        if (operation === 'read' && value && typeof value === 'object' && 'docs' in value && Array.isArray(value.docs)) {\n            for(let i = 0; i < value.docs.length; i++){\n                const item = value.docs[i];\n                if (item instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n                    value.docs[i] = item.toHexString();\n                } else if (Array.isArray(field.collection) && item) {\n                    // Fields here for polymorphic joins cannot be determinted, JSON.parse needed\n                    value.docs[i] = JSON.parse(JSON.stringify(value.docs[i]));\n                }\n            }\n        }\n        return value;\n    }\n    let relatedCollection;\n    let result = value;\n    const hasManyRelations = typeof field.relationTo !== 'string';\n    if (!hasManyRelations) {\n        relatedCollection = config.collections?.find(({ slug })=>slug === field.relationTo);\n    }\n    if (Array.isArray(value)) {\n        result = value.map((val)=>{\n            // Handle has many - polymorphic\n            if (isValidRelationObject(val)) {\n                const relatedCollectionForSingleValue = config.collections?.find(({ slug })=>slug === val.relationTo);\n                if (relatedCollectionForSingleValue) {\n                    return {\n                        relationTo: val.relationTo,\n                        value: convertRelationshipValue({\n                            operation,\n                            relatedCollection: relatedCollectionForSingleValue,\n                            validateRelationships,\n                            value: val.value\n                        })\n                    };\n                }\n            }\n            if (relatedCollection) {\n                return convertRelationshipValue({\n                    operation,\n                    relatedCollection,\n                    validateRelationships,\n                    value: val\n                });\n            }\n            return val;\n        });\n    } else if (isValidRelationObject(value)) {\n        relatedCollection = config.collections?.find(({ slug })=>slug === value.relationTo);\n        if (relatedCollection) {\n            result = {\n                relationTo: value.relationTo,\n                value: convertRelationshipValue({\n                    operation,\n                    relatedCollection,\n                    validateRelationships,\n                    value: value.value\n                })\n            };\n        }\n    } else if (relatedCollection) {\n        result = convertRelationshipValue({\n            operation,\n            relatedCollection,\n            validateRelationships,\n            value\n        });\n    }\n    if (locale) {\n        ref[locale] = result;\n    } else {\n        ref[field.name] = result;\n    }\n};\nconst sanitizeDate = ({ field, locale, ref, value })=>{\n    if (!value) {\n        return;\n    }\n    if (value instanceof Date) {\n        value = value.toISOString();\n    }\n    if (locale) {\n        ref[locale] = value;\n    } else {\n        ref[field.name] = value;\n    }\n};\nconst stripFields = ({ config, data, fields, reservedKeys = [] })=>{\n    for(const k in data){\n        if (!fields.some((field)=>field.name === k) && !reservedKeys.includes(k)) {\n            delete data[k];\n        }\n    }\n    for (const field of fields){\n        reservedKeys = [];\n        const fieldData = data[field.name];\n        if (!fieldData || typeof fieldData !== 'object') {\n            continue;\n        }\n        if (field.type === 'blocks') {\n            reservedKeys.push('blockType');\n        }\n        if ('flattenedFields' in field || 'blocks' in field) {\n            if (field.localized && config.localization) {\n                for(const localeKey in fieldData){\n                    if (!config.localization.localeCodes.some((code)=>code === localeKey)) {\n                        delete fieldData[localeKey];\n                        continue;\n                    }\n                    const localeData = fieldData[localeKey];\n                    if (!localeData || typeof localeData !== 'object') {\n                        continue;\n                    }\n                    if (field.type === 'array' || field.type === 'blocks') {\n                        if (!Array.isArray(localeData)) {\n                            continue;\n                        }\n                        let hasNull = false;\n                        for(let i = 0; i < localeData.length; i++){\n                            const data = localeData[i];\n                            let fields = null;\n                            if (field.type === 'array') {\n                                fields = field.flattenedFields;\n                            } else {\n                                let maybeBlock = undefined;\n                                if (field.blockReferences) {\n                                    const maybeBlockReference = field.blockReferences.find((each)=>{\n                                        const slug = typeof each === 'string' ? each : each.slug;\n                                        return slug === data.blockType;\n                                    });\n                                    if (maybeBlockReference) {\n                                        if (typeof maybeBlockReference === 'object') {\n                                            maybeBlock = maybeBlockReference;\n                                        } else {\n                                            maybeBlock = config.blocks?.find((each)=>each.slug === maybeBlockReference);\n                                        }\n                                    }\n                                }\n                                if (!maybeBlock) {\n                                    maybeBlock = field.blocks.find((each)=>each.slug === data.blockType);\n                                }\n                                if (maybeBlock) {\n                                    fields = maybeBlock.flattenedFields;\n                                } else {\n                                    localeData[i] = null;\n                                    hasNull = true;\n                                }\n                            }\n                            if (!fields) {\n                                continue;\n                            }\n                            stripFields({\n                                config,\n                                data,\n                                fields,\n                                reservedKeys\n                            });\n                        }\n                        if (hasNull) {\n                            fieldData[localeKey] = localeData.filter(Boolean);\n                        }\n                        continue;\n                    } else {\n                        stripFields({\n                            config,\n                            data: localeData,\n                            fields: field.flattenedFields,\n                            reservedKeys\n                        });\n                    }\n                }\n                continue;\n            }\n            if (field.type === 'array' || field.type === 'blocks') {\n                if (!Array.isArray(fieldData)) {\n                    continue;\n                }\n                let hasNull = false;\n                for(let i = 0; i < fieldData.length; i++){\n                    const data = fieldData[i];\n                    let fields = null;\n                    if (field.type === 'array') {\n                        fields = field.flattenedFields;\n                    } else {\n                        let maybeBlock = undefined;\n                        if (field.blockReferences) {\n                            const maybeBlockReference = field.blockReferences.find((each)=>{\n                                const slug = typeof each === 'string' ? each : each.slug;\n                                return slug === data.blockType;\n                            });\n                            if (maybeBlockReference) {\n                                if (typeof maybeBlockReference === 'object') {\n                                    maybeBlock = maybeBlockReference;\n                                } else {\n                                    maybeBlock = config.blocks?.find((each)=>each.slug === maybeBlockReference);\n                                }\n                            }\n                        }\n                        if (!maybeBlock) {\n                            maybeBlock = field.blocks.find((each)=>each.slug === data.blockType);\n                        }\n                        if (maybeBlock) {\n                            fields = maybeBlock.flattenedFields;\n                        } else {\n                            fieldData[i] = null;\n                            hasNull = true;\n                        }\n                    }\n                    if (!fields) {\n                        continue;\n                    }\n                    stripFields({\n                        config,\n                        data,\n                        fields,\n                        reservedKeys\n                    });\n                }\n                if (hasNull) {\n                    data[field.name] = fieldData.filter(Boolean);\n                }\n                continue;\n            } else {\n                stripFields({\n                    config,\n                    data: fieldData,\n                    fields: field.flattenedFields,\n                    reservedKeys\n                });\n            }\n        }\n    }\n};\nconst transform = ({ adapter, data, fields, globalSlug, operation, parentIsLocalized = false, validateRelationships = true })=>{\n    if (Array.isArray(data)) {\n        for (const item of data){\n            transform({\n                adapter,\n                data: item,\n                fields,\n                globalSlug,\n                operation,\n                validateRelationships\n            });\n        }\n        return;\n    }\n    const { payload: { config } } = adapter;\n    if (operation === 'read') {\n        delete data['__v'];\n        data.id = data._id;\n        delete data['_id'];\n        if (data.id instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n            data.id = data.id.toHexString();\n        }\n        if (!adapter.allowAdditionalKeys) {\n            stripFields({\n                config,\n                data,\n                fields: (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenAllFields)({\n                    cache: true,\n                    fields\n                }),\n                reservedKeys: [\n                    'id',\n                    'globalType'\n                ]\n            });\n        }\n    }\n    if (operation === 'write' && globalSlug) {\n        data.globalType = globalSlug;\n    }\n    const sanitize = ({ field, ref: incomingRef })=>{\n        if (!incomingRef || typeof incomingRef !== 'object') {\n            return;\n        }\n        const ref = incomingRef;\n        if (field.type === 'date' && operation === 'read' && field.name in ref && ref[field.name]) {\n            if (config.localization && (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n                field,\n                parentIsLocalized\n            })) {\n                const fieldRef = ref[field.name];\n                if (!fieldRef || typeof fieldRef !== 'object') {\n                    return;\n                }\n                for (const locale of config.localization.localeCodes){\n                    sanitizeDate({\n                        field,\n                        locale,\n                        ref: fieldRef,\n                        value: fieldRef[locale]\n                    });\n                }\n            } else {\n                sanitizeDate({\n                    field,\n                    ref,\n                    value: ref[field.name]\n                });\n            }\n        }\n        if (field.type === 'relationship' || field.type === 'upload' || operation === 'read' && field.type === 'join') {\n            if (!ref[field.name]) {\n                return;\n            }\n            // handle localized relationships\n            if (config.localization && (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n                field,\n                parentIsLocalized\n            })) {\n                const locales = config.localization.locales;\n                const fieldRef = ref[field.name];\n                if (typeof fieldRef !== 'object') {\n                    return;\n                }\n                for (const { code } of locales){\n                    const value = fieldRef[code];\n                    if (value) {\n                        sanitizeRelationship({\n                            config,\n                            field,\n                            locale: code,\n                            operation,\n                            ref: fieldRef,\n                            validateRelationships,\n                            value\n                        });\n                    }\n                }\n            } else {\n                // handle non-localized relationships\n                sanitizeRelationship({\n                    config,\n                    field,\n                    locale: undefined,\n                    operation,\n                    ref,\n                    validateRelationships,\n                    value: ref[field.name]\n                });\n            }\n        }\n    };\n    (0,payload__WEBPACK_IMPORTED_MODULE_3__.traverseFields)({\n        callback: sanitize,\n        config,\n        fields,\n        fillEmpty: false,\n        parentIsLocalized,\n        ref: data\n    });\n};\n\n//# sourceMappingURL=transform.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpQztBQUMwQjtBQUNlO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw0REFBNEQ7QUFDaEcsaUVBQWlFLGdFQUFnQjtBQUNqRjtBQUNBLDZCQUE2QiwyQ0FBSztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkNBQUs7QUFDNUIsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MscUVBQXFFO0FBQ3JHO0FBQ0E7QUFDQSwyQkFBMkIsdUJBQXVCO0FBQ2xEO0FBQ0Esb0NBQW9DLDJDQUFLO0FBQ3pDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsTUFBTTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLE1BQU07QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ04sd0RBQXdELE1BQU07QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyQkFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIseUNBQXlDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyx1QkFBdUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHNCQUFzQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNPLHFCQUFxQix1R0FBdUc7QUFDbkk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVyxXQUFXO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDJDQUFLO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5REFBZ0I7QUFDeEM7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlCQUF5QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHNFQUFzQjtBQUM3RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHNFQUFzQjtBQUM3RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsT0FBTztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVEQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL25pY2svRGVza3RvcC9CdXNpbmVzcy9QYXlsb2FkQ01TL3BheWxvYWQtc3RvcmFnZS1jbG91ZGluYXJ5L2Rldi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQ0LjBfcGF5bG9hZEAzLjQ0LjBfZ3JhcGhxbEAxNi4xMS4wX3R5cGVzY3JpcHRANS44LjNfL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUeXBlcyB9IGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IGZsYXR0ZW5BbGxGaWVsZHMsIHRyYXZlcnNlRmllbGRzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBmaWVsZEFmZmVjdHNEYXRhLCBmaWVsZFNob3VsZEJlTG9jYWxpemVkIH0gZnJvbSAncGF5bG9hZC9zaGFyZWQnO1xuZnVuY3Rpb24gaXNWYWxpZFJlbGF0aW9uT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgJ3JlbGF0aW9uVG8nIGluIHZhbHVlICYmICd2YWx1ZScgaW4gdmFsdWU7XG59XG5jb25zdCBjb252ZXJ0UmVsYXRpb25zaGlwVmFsdWUgPSAoeyBvcGVyYXRpb24sIHJlbGF0ZWRDb2xsZWN0aW9uLCB2YWxpZGF0ZVJlbGF0aW9uc2hpcHMsIHZhbHVlIH0pPT57XG4gICAgY29uc3QgY3VzdG9tSURGaWVsZCA9IHJlbGF0ZWRDb2xsZWN0aW9uLmZpZWxkcy5maW5kKChmaWVsZCk9PmZpZWxkQWZmZWN0c0RhdGEoZmllbGQpICYmIGZpZWxkLm5hbWUgPT09ICdpZCcpO1xuICAgIGlmIChvcGVyYXRpb24gPT09ICdyZWFkJykge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBUeXBlcy5PYmplY3RJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tSURGaWVsZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFR5cGVzLk9iamVjdElkKHZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRlUmVsYXRpb25zaGlwcykge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbmNvbnN0IHNhbml0aXplUmVsYXRpb25zaGlwID0gKHsgY29uZmlnLCBmaWVsZCwgbG9jYWxlLCBvcGVyYXRpb24sIHJlZiwgdmFsaWRhdGVSZWxhdGlvbnNoaXBzLCB2YWx1ZSB9KT0+e1xuICAgIGlmIChmaWVsZC50eXBlID09PSAnam9pbicpIHtcbiAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ3JlYWQnICYmIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgJ2RvY3MnIGluIHZhbHVlICYmIEFycmF5LmlzQXJyYXkodmFsdWUuZG9jcykpIHtcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2YWx1ZS5kb2NzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gdmFsdWUuZG9jc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFR5cGVzLk9iamVjdElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmRvY3NbaV0gPSBpdGVtLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpZWxkLmNvbGxlY3Rpb24pICYmIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmllbGRzIGhlcmUgZm9yIHBvbHltb3JwaGljIGpvaW5zIGNhbm5vdCBiZSBkZXRlcm1pbnRlZCwgSlNPTi5wYXJzZSBuZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuZG9jc1tpXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodmFsdWUuZG9jc1tpXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGxldCByZWxhdGVkQ29sbGVjdGlvbjtcbiAgICBsZXQgcmVzdWx0ID0gdmFsdWU7XG4gICAgY29uc3QgaGFzTWFueVJlbGF0aW9ucyA9IHR5cGVvZiBmaWVsZC5yZWxhdGlvblRvICE9PSAnc3RyaW5nJztcbiAgICBpZiAoIWhhc01hbnlSZWxhdGlvbnMpIHtcbiAgICAgICAgcmVsYXRlZENvbGxlY3Rpb24gPSBjb25maWcuY29sbGVjdGlvbnM/LmZpbmQoKHsgc2x1ZyB9KT0+c2x1ZyA9PT0gZmllbGQucmVsYXRpb25Ubyk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXN1bHQgPSB2YWx1ZS5tYXAoKHZhbCk9PntcbiAgICAgICAgICAgIC8vIEhhbmRsZSBoYXMgbWFueSAtIHBvbHltb3JwaGljXG4gICAgICAgICAgICBpZiAoaXNWYWxpZFJlbGF0aW9uT2JqZWN0KHZhbCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGVkQ29sbGVjdGlvbkZvclNpbmdsZVZhbHVlID0gY29uZmlnLmNvbGxlY3Rpb25zPy5maW5kKCh7IHNsdWcgfSk9PnNsdWcgPT09IHZhbC5yZWxhdGlvblRvKTtcbiAgICAgICAgICAgICAgICBpZiAocmVsYXRlZENvbGxlY3Rpb25Gb3JTaW5nbGVWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25UbzogdmFsLnJlbGF0aW9uVG8sXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29udmVydFJlbGF0aW9uc2hpcFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZENvbGxlY3Rpb246IHJlbGF0ZWRDb2xsZWN0aW9uRm9yU2luZ2xlVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVSZWxhdGlvbnNoaXBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWwudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlbGF0ZWRDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRSZWxhdGlvbnNoaXBWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRlZENvbGxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlUmVsYXRpb25zaGlwcyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpc1ZhbGlkUmVsYXRpb25PYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJlbGF0ZWRDb2xsZWN0aW9uID0gY29uZmlnLmNvbGxlY3Rpb25zPy5maW5kKCh7IHNsdWcgfSk9PnNsdWcgPT09IHZhbHVlLnJlbGF0aW9uVG8pO1xuICAgICAgICBpZiAocmVsYXRlZENvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICByZWxhdGlvblRvOiB2YWx1ZS5yZWxhdGlvblRvLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBjb252ZXJ0UmVsYXRpb25zaGlwVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0ZWRDb2xsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVJlbGF0aW9uc2hpcHMsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChyZWxhdGVkQ29sbGVjdGlvbikge1xuICAgICAgICByZXN1bHQgPSBjb252ZXJ0UmVsYXRpb25zaGlwVmFsdWUoe1xuICAgICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgICAgcmVsYXRlZENvbGxlY3Rpb24sXG4gICAgICAgICAgICB2YWxpZGF0ZVJlbGF0aW9uc2hpcHMsXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGxvY2FsZSkge1xuICAgICAgICByZWZbbG9jYWxlXSA9IHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZWZbZmllbGQubmFtZV0gPSByZXN1bHQ7XG4gICAgfVxufTtcbmNvbnN0IHNhbml0aXplRGF0ZSA9ICh7IGZpZWxkLCBsb2NhbGUsIHJlZiwgdmFsdWUgfSk9PntcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmIChsb2NhbGUpIHtcbiAgICAgICAgcmVmW2xvY2FsZV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZWZbZmllbGQubmFtZV0gPSB2YWx1ZTtcbiAgICB9XG59O1xuY29uc3Qgc3RyaXBGaWVsZHMgPSAoeyBjb25maWcsIGRhdGEsIGZpZWxkcywgcmVzZXJ2ZWRLZXlzID0gW10gfSk9PntcbiAgICBmb3IoY29uc3QgayBpbiBkYXRhKXtcbiAgICAgICAgaWYgKCFmaWVsZHMuc29tZSgoZmllbGQpPT5maWVsZC5uYW1lID09PSBrKSAmJiAhcmVzZXJ2ZWRLZXlzLmluY2x1ZGVzKGspKSB7XG4gICAgICAgICAgICBkZWxldGUgZGF0YVtrXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcyl7XG4gICAgICAgIHJlc2VydmVkS2V5cyA9IFtdO1xuICAgICAgICBjb25zdCBmaWVsZERhdGEgPSBkYXRhW2ZpZWxkLm5hbWVdO1xuICAgICAgICBpZiAoIWZpZWxkRGF0YSB8fCB0eXBlb2YgZmllbGREYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdibG9ja3MnKSB7XG4gICAgICAgICAgICByZXNlcnZlZEtleXMucHVzaCgnYmxvY2tUeXBlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdmbGF0dGVuZWRGaWVsZHMnIGluIGZpZWxkIHx8ICdibG9ja3MnIGluIGZpZWxkKSB7XG4gICAgICAgICAgICBpZiAoZmllbGQubG9jYWxpemVkICYmIGNvbmZpZy5sb2NhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICBmb3IoY29uc3QgbG9jYWxlS2V5IGluIGZpZWxkRGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVDb2Rlcy5zb21lKChjb2RlKT0+Y29kZSA9PT0gbG9jYWxlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpZWxkRGF0YVtsb2NhbGVLZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYWxlRGF0YSA9IGZpZWxkRGF0YVtsb2NhbGVLZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxvY2FsZURhdGEgfHwgdHlwZW9mIGxvY2FsZURhdGEgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2FycmF5JyB8fCBmaWVsZC50eXBlID09PSAnYmxvY2tzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGxvY2FsZURhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGFzTnVsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxvY2FsZURhdGEubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBsb2NhbGVEYXRhW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnYXJyYXknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF5YmVCbG9jayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmJsb2NrUmVmZXJlbmNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF5YmVCbG9ja1JlZmVyZW5jZSA9IGZpZWxkLmJsb2NrUmVmZXJlbmNlcy5maW5kKChlYWNoKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsdWcgPSB0eXBlb2YgZWFjaCA9PT0gJ3N0cmluZycgPyBlYWNoIDogZWFjaC5zbHVnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzbHVnID09PSBkYXRhLmJsb2NrVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlQmxvY2tSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heWJlQmxvY2tSZWZlcmVuY2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlQmxvY2sgPSBtYXliZUJsb2NrUmVmZXJlbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlQmxvY2sgPSBjb25maWcuYmxvY2tzPy5maW5kKChlYWNoKT0+ZWFjaC5zbHVnID09PSBtYXliZUJsb2NrUmVmZXJlbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXliZUJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZUJsb2NrID0gZmllbGQuYmxvY2tzLmZpbmQoKGVhY2gpPT5lYWNoLnNsdWcgPT09IGRhdGEuYmxvY2tUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVCbG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzID0gbWF5YmVCbG9jay5mbGF0dGVuZWRGaWVsZHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGVEYXRhW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc051bGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpcEZpZWxkcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNlcnZlZEtleXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNOdWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGREYXRhW2xvY2FsZUtleV0gPSBsb2NhbGVEYXRhLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBGaWVsZHMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBsb2NhbGVEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogZmllbGQuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2VydmVkS2V5c1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2FycmF5JyB8fCBmaWVsZC50eXBlID09PSAnYmxvY2tzJykge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShmaWVsZERhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgaGFzTnVsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBmaWVsZERhdGEubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gZmllbGREYXRhW2ldO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdhcnJheScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXliZUJsb2NrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmJsb2NrUmVmZXJlbmNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlQmxvY2tSZWZlcmVuY2UgPSBmaWVsZC5ibG9ja1JlZmVyZW5jZXMuZmluZCgoZWFjaCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2x1ZyA9IHR5cGVvZiBlYWNoID09PSAnc3RyaW5nJyA/IGVhY2ggOiBlYWNoLnNsdWc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzbHVnID09PSBkYXRhLmJsb2NrVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVCbG9ja1JlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heWJlQmxvY2tSZWZlcmVuY2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZUJsb2NrID0gbWF5YmVCbG9ja1JlZmVyZW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlQmxvY2sgPSBjb25maWcuYmxvY2tzPy5maW5kKChlYWNoKT0+ZWFjaC5zbHVnID09PSBtYXliZUJsb2NrUmVmZXJlbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF5YmVCbG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlQmxvY2sgPSBmaWVsZC5ibG9ja3MuZmluZCgoZWFjaCk9PmVhY2guc2x1ZyA9PT0gZGF0YS5ibG9ja1R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSBtYXliZUJsb2NrLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGREYXRhW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNOdWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpZWxkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RyaXBGaWVsZHMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2VydmVkS2V5c1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGhhc051bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtmaWVsZC5uYW1lXSA9IGZpZWxkRGF0YS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHJpcEZpZWxkcyh7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZmllbGREYXRhLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IGZpZWxkLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgcmVzZXJ2ZWRLZXlzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybSA9ICh7IGFkYXB0ZXIsIGRhdGEsIGZpZWxkcywgZ2xvYmFsU2x1Zywgb3BlcmF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZCA9IGZhbHNlLCB2YWxpZGF0ZVJlbGF0aW9uc2hpcHMgPSB0cnVlIH0pPT57XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGEpe1xuICAgICAgICAgICAgdHJhbnNmb3JtKHtcbiAgICAgICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgICAgIGRhdGE6IGl0ZW0sXG4gICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRlUmVsYXRpb25zaGlwc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHBheWxvYWQ6IHsgY29uZmlnIH0gfSA9IGFkYXB0ZXI7XG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gJ3JlYWQnKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhWydfX3YnXTtcbiAgICAgICAgZGF0YS5pZCA9IGRhdGEuX2lkO1xuICAgICAgICBkZWxldGUgZGF0YVsnX2lkJ107XG4gICAgICAgIGlmIChkYXRhLmlkIGluc3RhbmNlb2YgVHlwZXMuT2JqZWN0SWQpIHtcbiAgICAgICAgICAgIGRhdGEuaWQgPSBkYXRhLmlkLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhZGFwdGVyLmFsbG93QWRkaXRpb25hbEtleXMpIHtcbiAgICAgICAgICAgIHN0cmlwRmllbGRzKHtcbiAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGZsYXR0ZW5BbGxGaWVsZHMoe1xuICAgICAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgcmVzZXJ2ZWRLZXlzOiBbXG4gICAgICAgICAgICAgICAgICAgICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICdnbG9iYWxUeXBlJ1xuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChvcGVyYXRpb24gPT09ICd3cml0ZScgJiYgZ2xvYmFsU2x1Zykge1xuICAgICAgICBkYXRhLmdsb2JhbFR5cGUgPSBnbG9iYWxTbHVnO1xuICAgIH1cbiAgICBjb25zdCBzYW5pdGl6ZSA9ICh7IGZpZWxkLCByZWY6IGluY29taW5nUmVmIH0pPT57XG4gICAgICAgIGlmICghaW5jb21pbmdSZWYgfHwgdHlwZW9mIGluY29taW5nUmVmICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlZiA9IGluY29taW5nUmVmO1xuICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2RhdGUnICYmIG9wZXJhdGlvbiA9PT0gJ3JlYWQnICYmIGZpZWxkLm5hbWUgaW4gcmVmICYmIHJlZltmaWVsZC5uYW1lXSkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5sb2NhbGl6YXRpb24gJiYgZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRSZWYgPSByZWZbZmllbGQubmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKCFmaWVsZFJlZiB8fCB0eXBlb2YgZmllbGRSZWYgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBsb2NhbGUgb2YgY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVDb2Rlcyl7XG4gICAgICAgICAgICAgICAgICAgIHNhbml0aXplRGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogZmllbGRSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmllbGRSZWZbbG9jYWxlXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNhbml0aXplRGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICByZWYsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZWZbZmllbGQubmFtZV1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ3JlbGF0aW9uc2hpcCcgfHwgZmllbGQudHlwZSA9PT0gJ3VwbG9hZCcgfHwgb3BlcmF0aW9uID09PSAncmVhZCcgJiYgZmllbGQudHlwZSA9PT0gJ2pvaW4nKSB7XG4gICAgICAgICAgICBpZiAoIXJlZltmaWVsZC5uYW1lXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGhhbmRsZSBsb2NhbGl6ZWQgcmVsYXRpb25zaGlwc1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5sb2NhbGl6YXRpb24gJiYgZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxlcyA9IGNvbmZpZy5sb2NhbGl6YXRpb24ubG9jYWxlcztcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFJlZiA9IHJlZltmaWVsZC5uYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkUmVmICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBjb2RlIH0gb2YgbG9jYWxlcyl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGRSZWZbY29kZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FuaXRpemVSZWxhdGlvbnNoaXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGU6IGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogZmllbGRSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVSZWxhdGlvbnNoaXBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIG5vbi1sb2NhbGl6ZWQgcmVsYXRpb25zaGlwc1xuICAgICAgICAgICAgICAgIHNhbml0aXplUmVsYXRpb25zaGlwKHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcmVmLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVJlbGF0aW9uc2hpcHMsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZWZbZmllbGQubmFtZV1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgdHJhdmVyc2VGaWVsZHMoe1xuICAgICAgICBjYWxsYmFjazogc2FuaXRpemUsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBmaWxsRW1wdHk6IGZhbHNlLFxuICAgICAgICBwYXJlbnRJc0xvY2FsaXplZCxcbiAgICAgICAgcmVmOiBkYXRhXG4gICAgfSk7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.44.0_payload@3.44.0_graphql@16.11.0_typescript@5.8.3_/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\n");

/***/ })

};
;